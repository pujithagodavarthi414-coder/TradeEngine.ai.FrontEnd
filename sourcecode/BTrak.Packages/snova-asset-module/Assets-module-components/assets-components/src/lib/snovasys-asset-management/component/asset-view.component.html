<mat-card class="p-0" *ngIf="(anyOperationInProgress$ | async)">
  <mat-card-title class="data-table-header">
    <div class="card-title-text p-05 ml-05">
      {{'ASSETS.VIEWASSET' | translate}}
    </div>
    <mat-divider></mat-divider>
  </mat-card-title>
  <mat-card-content class="p-1">
    <div fxLayout="row" fxLayoutGap="10px" *ngFor="let item of [1,2,3]">
      <div fxFlex="33.3">
        <p class="mat-body-1 empty-text loading-bg"></p>
      </div>
      <div fxFlex="33.3">
        <p class="mat-body-1 empty-text loading-bg"></p>
      </div>
      <div fxFlex="33.3">
        <p class="mat-body-1 empty-text loading-bg"></p>
      </div>
    </div>
  </mat-card-content>
</mat-card>
<mat-card class="p-0 edit_employee"
  *ngIf="!closeEditForm && !editAssets && assetDetails && !(anyOperationInProgress$ | async)">
  <mat-card-title class="data-table-header">
    <div fxLayout="row wrap">
      <div fxFlex="calc(100% - 130px)" class="card-title-text p-05 ml-05" fxLayoutAlign="start center">
        {{'ASSETS.VIEWASSET' | translate}}
      </div>
      <div fxFlex="120px" fxLayoutAlign="end center">
        <ng-container *ngIf="(canAccess_feature_AssetComment)">
          <button mat-icon-button matTooltip="{{'ASSETS.ADDCOMMENT' | translate}}"
            [satPopoverAnchorFor]="commentPopover" (click)="commentPopover.open()">
            <fa-icon class="mat-color-accent" icon="comment"></fa-icon>
          </button>
        </ng-container>
        <ng-container *ngIf="(canAccess_feature_MarkDamagedAssest) && !assetDetails.isWriteOff">
          <button mat-icon-button matTooltip="{{'ASSETS.MARKDAMAGE' | translate}}"
            [satPopoverAnchorFor]="writeoffPopover" (click)="writeoffPopover.open()">
            <fa-icon class="mat-color-accent" icon="house-damage"></fa-icon>
          </button>
        </ng-container>
        <ng-container *ngIf="(canAccess_feature_AddOrUpdateAsset)">
          <button mat-icon-button (click)="enableDisableForm()" matTooltip="{{'ASSETS.CLICKTOEDITASSET' | translate}}">
            <fa-icon class="mat-color-accent" icon="edit"></fa-icon>
          </button>
        </ng-container>
        <!-- <button mat-button mat-raised-button color="warn" matTooltip="Close asset view" class="ml-1"
                          (click)="closeForm()">
                          <fa-icon icon="times"></fa-icon>
                      </button> -->
      </div>
    </div>
    <mat-divider></mat-divider>
  </mat-card-title>
  <mat-card-content class="p-1" *ngIf="assetDetails">
    <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutGap.xs="0px">
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b>{{'ASSETS.ASSETCODE' | translate}}</b></label>
          </div>
          <div fxFlex="55" class="hide-content-overflow">
            <label matTooltip="{{assetDetails.assetNumber}}">:&nbsp;{{assetDetails.assetNumber}}</label>
          </div>
        </div>
      </div>
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b>{{'ASSETS.ASSETNAME' | translate}}</b></label>
          </div>
          <div fxFlex="55" class="hide-content-overflow">
            <label matTooltip="{{assetDetails.assetName}}">:&nbsp;{{assetDetails.assetName}}</label>
          </div>
        </div>
      </div>
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b>{{'ASSETS.PRODUCTNAME' | translate}}</b></label>
          </div>
          <div fxFlex="55" class="hide-content-overflow">
            <label matTooltip="{{assetDetails.productName}}">:&nbsp;{{assetDetails.productName}}<span
                *ngIf="assetDetails.manufacturerCode">({{assetDetails.manufacturerCode}})</span></label>
          </div>
        </div>
      </div>
    </div>
    <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutGap.xs="0px">
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label> <b>{{'ASSETS.PURCHASEDDATE' | translate}}</b></label>
          </div>
          <div fxFlex="55">
            <label>:&nbsp;{{assetDetails.purchasedDate | date: "dd-MMM-yyyy" }}</label>
          </div>
        </div>
      </div>
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b>{{'ASSETS.APPROVEDDATE' | translate}}</b></label>
          </div>
          <div fxFlex="55">
            <label>:&nbsp;{{assetDetails.assignedDateFrom | date: "dd-MMM-yyyy" }}</label>
          </div>
        </div>
      </div>
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b>{{'ASSETS.ASSIGNEDTO' | translate}}</b> </label>
          </div>
          <div fxFlex="55" class="hide-content-overflow">
            <label
              matTooltip="{{assetDetails.assignedToEmployeeName}}">:&nbsp;{{assetDetails.assignedToEmployeeName}}</label>
          </div>
        </div>
      </div>
    </div>
    <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutGap.xs="0px">
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b>{{'ASSETS.APPROVEDBY' | translate}}</b></label>
          </div>
          <div fxFlex="55" class="hide-content-overflow">
            <label
              matTooltip="{{assetDetails.approvedByEmployeeName}}">:&nbsp;{{assetDetails.approvedByEmployeeName}}</label>
          </div>
        </div>
      </div>
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b>{{'ASSETS.COST' | translate}}</b></label>
          </div>
          <div fxFlex="55">
            <label>:&nbsp;{{assetDetails.cost}}</label>
          </div>
        </div>
      </div>
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b> {{'ASSETS.CURRENCY' | translate}}</b></label>
          </div>
          <div fxFlex="55">
            <label>:&nbsp;{{assetDetails.currencyType}}</label>
          </div>
        </div>
      </div>
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b> {{'ASSETS.BRANCH' | translate}}</b></label>
          </div>
          <div fxFlex="55">
            <label>:&nbsp;{{assetDetails.branchName}}</label>
          </div>
        </div>
      </div>
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b> {{'ASSETS.SEATCODE' | translate}}</b></label>
          </div>
          <div fxFlex="55">
            <label>:&nbsp;{{assetDetails.seatCode}}</label>
          </div>
        </div>
      </div>
      <div fxFlex="33.3" *ngIf="checkForMACAddress(assetDetails.assetName)">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b> {{'ASSETS.ASSETUNIQUENUMBER' | translate}}</b></label>
          </div>
          <div fxFlex="55">
            <label>:&nbsp;{{assetDetails.assetUniqueNumber}}</label>
          </div>
        </div>
      </div>
    </div>
    <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutGap.xs="0px" *ngIf="assetDetails.isWriteOff">
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b>{{'ASSETS.DAMAGEDBY' | translate}}</b></label>
          </div>
          <div fxFlex="55" class="hide-content-overflow">
            <label matTooltip="{{assetDetails.damagedByFullName}}">:&nbsp;{{assetDetails.damagedByFullName}}</label>
          </div>
        </div>
      </div>
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b>{{'ASSETS.DAMAGEDDATE' | translate}}</b></label>
          </div>
          <div fxFlex="55">
            <label>:&nbsp;{{assetDetails.damagedDate | date: "dd-MMM-yyyy" }}</label>
          </div>
        </div>
      </div>
      <div fxFlex="33.3">
        <div fxLayout="row wrap" fxLayout.md="column">
          <div fxFlex="45">
            <label><b>{{'ASSETS.DAMAGEDREASON' | translate}}:</b></label>
          </div>
          <div fxFlex="55">
            <label matTooltip="{{assetDetails.damagedReason}}" matTooltipClass="tooltip-overflow"
              class="hide-content-overflow full-width">:&nbsp;{{assetDetails.damagedReason}}</label>
          </div>
        </div>
      </div>
    </div>
    <div fxLayout="row wrap">
      <div fxFlex="15" fxFlex.lt-md="50">
        <input type="checkbox" [checked]="assetDetails.isVendor"
          [disabled]="!editAssets" />&nbsp;{{'ASSETS.VENDORPRODUCT' | translate}}
      </div>
      <div fxFlex="20" fxFlex.lt-md="50">
        <input type="checkbox" [checked]="assetDetails.isEmpty"
          [disabled]="!editAssets" />&nbsp;{{'ASSETS.ISAVAILABLE' | translate}}
      </div>
    </div>
  </mat-card-content>
</mat-card>

<app-am-component-add-asset *ngIf="editAssets && !closeEditForm && !(anyOperationInProgress$ | async)"
  [selectedAssetData]="selectedAssetData$ | async" [activeAssignee]="activeAssignee" (updateCustomFields)="updateEvent($event)"
  (discardAssetChanges)="discardAssetChanges($event)" (closeAssetsViewAndEdit)="closeAssetsViewAndEdit($event)"  (refreshCustomField)="refreshFields($event)">
</app-am-component-add-asset>
<mat-card *ngIf="isNoData">
  <div fxLayoutAlign="center center" fxLayout="column" class="no-data">
    {{ 'ACTIVITYTRACKER.NODATATODISPLAY' | translate }}
  </div>
</mat-card>
<sat-popover #commentPopover [autoFocus]="false" hasBackdrop backdropClass="backdrop-color" [restoreFocus]="false"
  [interactiveClose]="false" scrollStrategy="reposition" verticalAlign="below" horizontalAlign="end">
  <add-asset-comment (closePopup)="cancelComments()" [assetDetails]="selectedAssetData$ | async">
  </add-asset-comment>
</sat-popover>

<ng-container
  *ngIf="(canAccess_feature_AssetHistory) && !closeEditForm && assetDetails && !(anyOperationInProgress$ | async)">
  <app-am-component-assets-comments-and-history [assetId]="assetIdForComments">
  </app-am-component-assets-comments-and-history>
</ng-container>

<sat-popover #writeoffPopover [autoFocus]="false" hasBackdrop backdropClass="backdrop-color" [restoreFocus]="false"
  [interactiveClose]="false" scrollStrategy="reposition" verticalAlign="below" horizontalAlign="end">
  <app-am-component-delete-asset (closePopup)="cancelDeletion()" [assetDetails]="selectedAssetData$ | async">
  </app-am-component-delete-asset>
</sat-popover>