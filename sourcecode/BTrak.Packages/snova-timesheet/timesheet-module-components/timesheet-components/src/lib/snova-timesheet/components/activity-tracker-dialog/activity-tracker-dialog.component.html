<div class="custom-dialog">
    <div class="custom-close" mat-dialog-close (click)="onNoClick()">
        <fa-icon icon="times" class="project-dialog"></fa-icon>
    </div>
</div>
<div fxLayout="column">
<div fxFlex fxLayout="row" fxLayout.lt-md="column">
    <div *ngIf="trackerParameters.profileImage != null && trackerParameters.profileImage != ''" class="pr-05">
        <app-profile-avatar [src]="trackerParameters.profileImage | fetchSizedAndCachedImage: '30':''" [isRound]="true"
            size="30">
        </app-profile-avatar>
    </div>
    <div *ngIf="trackerParameters.profileImage == null || trackerParameters.profileImage == ''" class="pr-05">
        <app-profile-avatar [name]="trackerParameters.employeeName | removeSpecialCharacters" [isRound]="true"
            size="30">
        </app-profile-avatar>
    </div>
    <div class="pt-lg-1">
        <h5>{{trackerParameters.employeeName}}'s&nbsp;{{'ACTIVITYTRACKER.TRACKERDETAILS' | translate}}&nbsp;:&nbsp;</h5>
    </div>
    <div class="pt-lg-1" fxLayout="row">
        <h5 *ngIf="trackerParameters?.totalTime" class="pr-05">
            {{'ACTIVITYTRACKER.TOTALTIME' | translate}}&nbsp;:&nbsp;<b>{{trackerParameters?.totalTime |
                hoursAndMinutes}}</b>
        </h5>
        <h5 *ngIf="trackerParameters?.usageTime">
            {{'ACTIVITYTRACKER.USAGETIME' | translate}}&nbsp;:&nbsp;<b>{{trackerParameters?.usageTime |
                hoursAndMinutes}}</b>
        </h5>
    </div>
    <!-- <div *ngIf="canAccess_feature_CanViewLiveScreen && userDetails.status && !userDetails.isLeave && userDetails.userId != loggedInUserId"
        fxFlex="5" fxLayoutAlign="center">
        <button type="submit" mat-icon-button [disabled]="liveScreenshotInProgress" *ngIf="canAccess_feature_CanViewLiveScreen && userDetails.status && !userDetails.isLeave && userDetails.userId != loggedInUserId">
            <fa-icon matTooltip="{{'ACTIVITYTRACKER.TAKELIVESCREENSHOT' | translate}}"
                (click)="$event.stopPropagation();getLiveScreenshot(userDetails, true, false)" class="times-on-hover" icon="camera">
            </fa-icon>
        </button>
    </div>
    <div *ngIf="canAccess_feature_CanViewLiveScreen && userDetails.status && !userDetails.isLeave && userDetails.userId != loggedInUserId"
        fxFlex="1" fxLayoutAlign="center">
        <button type="submit" mat-icon-button [disabled]="liveScreenshotStreamInProgress" *ngIf="canAccess_feature_CanViewLiveScreen && userDetails.status && !userDetails.isLeave && userDetails.userId != loggedInUserId">
            <fa-icon matTooltip="{{'ACTIVITYTRACKER.TAKELIVESCREENSTREAM' | translate}}"
                (click)="$event.stopPropagation();getLiveScreenshot(userDetails, false, true)" class="times-on-hover" icon="video">
            </fa-icon>
        </button>
    </div> -->
</div>
</div>
<!-- <div class="pl-05 pt-lg-1">

</div> -->
<mat-tab-group class="mb-1" (selectedTabChange)="onTabClick($event)" [(selectedIndex)]="tabIndex">
    <ng-container>
        <mat-tab label="ProductiveApps">
            <ng-template mat-tab-label>
                {{'ACTIVITYAPPS.PRODUCTIVEAPPS' | translate}}
            </ng-template>
            <ng-template matTabContent>
                <app-activity-tracker-view [appType]="'Productive'" [trackerParameters]="trackerParameters">
                </app-activity-tracker-view>
            </ng-template>
        </mat-tab>
    </ng-container>

    <ng-container>
        <mat-tab label="UnProductiveApps">
            <ng-template mat-tab-label>
                {{'ACTIVITYTRACKER.UNPRODUCTIVEAPPS' | translate}}
            </ng-template>
            <ng-template matTabContent>
                <app-activity-tracker-view [appType]="'UnProductive'" [trackerParameters]="trackerParameters">
                </app-activity-tracker-view>
            </ng-template>
        </mat-tab>
    </ng-container>

    <ng-container>
        <mat-tab label="UnProductiveApps">
            <ng-template mat-tab-label>
                {{'ACTIVITYTRACKER.NEUTRALAPPS' | translate}}
            </ng-template>
            <ng-template matTabContent>
                <app-activity-tracker-view [appType]="'Neutral'" [trackerParameters]="trackerParameters">
                </app-activity-tracker-view>
            </ng-template>
        </mat-tab>
    </ng-container>

    <ng-container>
        <mat-tab label="SystemDetectedBreaks">
            <ng-template mat-tab-label>
                {{'ACTIVITYTRACKER.SYSTEMDETECTEDBREAKS' | translate}}
            </ng-template>
            <ng-template matTabContent>
                <app-system-detected-breaks [trackerParameters]="trackerParameters">
                </app-system-detected-breaks>
            </ng-template>
        </mat-tab>
    </ng-container>

    <ng-container *ngIf="canAccess_feature_ViewActivityScreenshots">
        <mat-tab label="Screenshots">
            <ng-template mat-tab-label>
                {{'ACTIVITYTRACKER.SCREENSHOTS' | translate}}
            </ng-template>
            <ng-template matTabContent>
                <app-ts-component-trackerscreenshots [data]="trackerParameters">
                </app-ts-component-trackerscreenshots>
            </ng-template>
        </mat-tab>
    </ng-container>

    <ng-container *ngIf="(userCommitDetails.length > 0)">
        <mat-tab label="Commits">
            <ng-template mat-tab-label>
                {{'REPOSITORYCOMMITS.REPOCOMMITS' | translate}}
            </ng-template>
            <ng-template matTabContent>
                <app-user-commit-details [commitsData]="userCommitDetails">
                </app-user-commit-details>
            </ng-template>
        </mat-tab>
    </ng-container>

</mat-tab-group>

<ng-template #liveCastDialog let-data>
    <app-timesheet-component-live-cast-dialog [data]=[data] [liveImageUrl]="liveImageUrl">
    </app-timesheet-component-live-cast-dialog>
</ng-template>

<!-- View outlet -->
<div id="btrak-preloader" *ngIf="loader">
    <span class="preloading-text" *ngIf="screenshot">
        {{ 'ACTIVITYTRACKER.LOADINGLIVESCREENSHOT' | translate }} ({{totalLoadingTime}} {{ 'SECONDS' | translate }})
    </span>
    <span class="preloading-text" *ngIf="liveCast">
        {{ 'ACTIVITYTRACKER.LOADINGLIVESTREAM' | translate }} ({{totalLoadingTime}} {{ 'SECONDS' | translate }})
    </span>
    <div id="btrak-loader" *ngIf="loader">
    </div>
</div>