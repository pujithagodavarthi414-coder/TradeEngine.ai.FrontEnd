<div class="ml-1 mb-05" fxLayout="row">
    <mat-checkbox *ngIf="(canAccess_entityType_feature_CopyOrMoveCases) && (casesCount > 0)" class="mr-05"
        [(ngModel)]="isMultiCasesSelected" (change)="changeStatus($event.checked)" style="position: relative; top: 3px;">
    </mat-checkbox>
    <b class="word-break user-select-text"
        matTooltip="{{'TESTMANAGEMENT.SECTIONNAME' | translate}}">{{hierarchicalData.sectionName}}</b>
    <span matTooltip="{{'TESTMANAGEMENT.CASESCOUNT' | translate}}"
        class="ml-05 badge-item test-case-count-number">{{casesCount}}</span>
    <span *ngIf="totalEstimate > 0">
        <mat-icon icon="clock" class="ml-05 mr-05 mat-color-accent clock-icon"
            matTooltip="{{totalEstimate | estimationTime}}">access_time</mat-icon>
    </span>
    <span *ngIf="totalEstimate == 0">
        <mat-icon icon="clock" class="ml-05 mr-05 mat-color-accent clock-icon" matTooltip="0h">access_time</mat-icon>
    </span>
</div>
<div class="ml-1 mb-1" *ngIf="hierarchicalData.description != null && hierarchicalData.description.length > 0">
    <span class="section-description word-break user-select-text"
        matTooltip="{{'TESTMANAGEMENT.SECTIONDESCRIPTION' | translate}}">{{hierarchicalData.description}}</span>
</div>
<mat-card-content class="p-0">
    <mat-list class="compact-list ml-02 mb-1" dragula="testcases" [(dragulaModel)]="testCasesModel"
        [ngStyle]="{ 'pointer-events': (reOrderOperationInProgress$ | async)  ? 'none' : '' }">
        <mat-divider class="mat-divider-position">
        </mat-divider>
        <mat-list-item *ngFor="let case of (testCases$ | async)" [attr.data-testCaseId]="case.testCaseId"
            [ngStyle]="{ 'pointer-events': (reOrderOperationInProgress$ | async)  ? 'none' : '' }">
            <testsuite-case class="full-width" (click)="handleClick(case)"
                (casePreviewDetails)="getCasePreviewDetails($event)" (caseSelection)="getCaseSelection($event)"
                (casesSelected)="getCasesSelected($event)" [caseSelected]="case.testCaseId === selectedCaseId"
                [caseDetails]="case" [allCasesSelect]="selection">
            </testsuite-case>
        </mat-list-item>
    </mat-list>
</mat-card-content>
<div *ngIf="(canAccess_entityType_feature_AddOrUpdateTestcases)">
    <div fxLayout="row" *ngIf="!isAddTestCaseOpened">
        <div fxFlex="100" class="mb-05">
            <a class="ml-1 mt-1 new-testcase" matTooltip="{{'TESTMANAGEMENT.ADDTESTCASE' | translate}}"
                *ngIf="!isAddTestCaseOpened" (click)="openAddTestCase()">
                <fa-icon icon="plus" class="mr-05 add-icon"></fa-icon>
                <b>{{'TESTMANAGEMENT.ADDCASE' | translate}}</b>
            </a>
        </div>
    </div>
</div>
<div *ngIf="isAddTestCaseOpened">
    <div class="full-width tp-05">
        <textarea rows="3" class="full-width  testcase-custom-input "
            placeholder="{{'TESTMANAGEMENT.ADDNEWTESTCASE' | translate}}" [(ngModel)]="testCaseName"></textarea>
    </div>
    <div class="p-05 text-center">
        <button mat-raised-button color="primary" class="mr-05" type="button"
            matTooltip="{{'TESTMANAGEMENT.ADD' | translate}}"
            [disabled]="testCaseName.trim().length == 0 || disableAddCase" (click)="addTestCase()">
            <fa-icon icon="plus" class="mr-05"></fa-icon> {{'TESTMANAGEMENT.ADD' | translate}}
        </button>
        <button mat-raised-button type="button" matTooltip="{{'TESTMANAGEMENT.CANCEL' | translate}}"
            (click)="openAddTestCase()">
            <fa-icon icon="times" class="mr-05"></fa-icon> {{'TESTMANAGEMENT.CANCEL' | translate}}
        </button>
    </div>
</div>
<div class="ml-08 mb-05 hierarchical-subsection-border"
    *ngIf="!(hierarchicalData.subSections == null) && hierarchicalData.subSections.length > 0">
    <div class="ml-05" *ngFor="let subSection of hierarchicalData.subSections">
        <hierarchical-cases (casePreviewDetails)="getCasePreviewDetails($event)"
            (caseSelection)="getCaseSelection($event)" (casesSelected)="getCasesSelected($event)"
            [hierarchicalData]="subSection" [testSuiteId]="testSuiteId" [casesData]="testCases"
            [hierarchicalSectionId]="hierarchicalSectionId" [selectedCase]="testCaseFromPreview"
            [allCasesSelect]="selection">
        </hierarchical-cases>
    </div>
</div>