<div fxFlex="100" fxFlex.gt-sm="100" class="case-details-view">
    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="(anyOperationInProgress$ | async)">
    </mat-progress-bar>
    <mat-card class="p-0" *ngIf="!(anyOperationInProgress$ | async)">
        <mat-card-title>
            <div fxLayout="row" fxFlex="100">
                <div class="card-title-text" fxFlex="90" fxFlex.xs="50" fxFlex.sm="85" fxFlex.md="90">
                    <span matTooltip="Test case name" matTooltipPosition="after">{{testCaseDetails.testCaseIdentity}} -
                        {{testCaseDetails.title}}</span>
                </div>
                <div class="m-1" fxFlex="10" fxFlex.xs="50" fxFlex.sm="15" fxFlex.md="10">
                    <button mat-button mat-raised-button color="primary" matTooltip="Edit Case"
                        matTooltipPosition="after" (click)="editTestCase()">
                        <fa-icon class="mr-05" icon="edit"></fa-icon> Edit
                    </button>
                </div>
            </div>
            <mat-divider></mat-divider>
        </mat-card-title>
        <mat-card-content class="p-0">
            <div class="mb-1 mt-1 ml-1 previous-page" (click)="backToSections()">
                <fa-icon class="mr-05" icon="arrow-left" matTooltip="Back to sections"></fa-icon>
                <span>Back to sections</span>
            </div>
            <div fxLayout="row wrap" class="">
                <div fxLayout="row wrap">
                    <!-- <a class="ml-1">{{caseDetails.SuiteName}}</a><span class="ml-1">></span><a
                        class="ml-1">{{caseDetails.SectionName}}</a> -->
                </div>
                <mat-card fxFlex="100" fxFlex.gt-sm="100" class="">
                    <div fxFlex="100" fxLayout="row wrap">
                        <div fxFlex="100" class="ml-1" fxFlex.gt-sm="20" fxLayout="column wrap">
                            <p class="m-0"><b>Type</b></p>
                            <p>{{testCaseDetails.typeName}}</p>
                        </div>
                        <div fxFlex="100" class="ml-1" fxFlex.gt-sm="20" fxLayout="column wrap">
                            <p class="m-0"><b>Priority :</b></p>
                            <p>{{testCaseDetails.priorityType}}</p>
                        </div>
                        <div fxFlex="100" class="ml-1" fxFlex.gt-sm="20" fxLayout="column wrap">
                            <p class="m-0"><b>Estimate :</b></p>
                            <p>{{testCaseDetails.estimate}}</p>
                        </div>
                        <div fxFlex="100" class="ml-1" fxFlex.gt-sm="20" fxLayout="column wrap">
                            <p class="m-0"><b>AutomationType :</b></p>
                            <p class="mb-0">{{testCaseDetails.automationType}}</p>
                        </div>
                    </div>
                </mat-card>
            </div>
            <div fxLayout="row wrap" class="mt-1" *ngIf="showSteps || showText">
                <div fx-Flex="100" class="ml-1" fxFlex.gt-sm="100" fxLayout="column wrap">
                    <p class="m-0"><b>Preconditions</b></p>
                    <p>{{testCaseDetails.precondition}}</p>
                </div>
            </div>
            <div fxLayout="row wrap" class="mt-1" *ngIf="showSteps">
                <div fxFlex="100" class="ml-1 mb-1">
                    <p class="m-0"><b>Steps</b></p>
                </div>
                <div fxFlex="100" class="mb-1" fxLayout="row wrap">
                    <div fxFlex="4"></div>
                    <div fxFlex="47.5"><b>Step</b></div>
                    <div fxFlex="46"><b>Expected result</b></div>
                </div>
                <div fxFlex="100" fxLayout="row wrap" *ngFor="let step of testCaseDetails.testCaseSteps;let i = index"
                    class="ml-1 mb-1">
                    <div fxFlex.gt-sm="2" class="ml-1">
                        <b>{{i + 1}}</b>
                    </div>
                    <div fxFlex.gt-sm="48">
                        {{step.stepText}}
                    </div>
                    <div fxFlex.gt-sm="48">
                        {{step.stepExpectedResult}}
                    </div>
                    <mat-divider></mat-divider>
                </div>
            </div>
            <div *ngIf="showText">
                <div fxLayout="row wrap" class="mt-1">
                    <div fx-Flex="100" class="ml-1" fxFlex.gt-sm="100" fxLayout="column wrap">
                        <p class="m-0"><b>Steps</b></p>
                        <p class="m-0">{{testCaseDetails.steps}}</p>
                    </div>
                </div>
                <div fxLayout="row wrap" class="mt-1">
                    <div fx-Flex="100" class="ml-1" fxFlex.gt-sm="100" fxLayout="column wrap">
                        <p class="m-0"><b>Expected Result</b></p>
                        <p>{{testCaseDetails.expectedResult}}</p>
                    </div>
                </div>
            </div>
            <div *ngIf="showExploratory">
                <div fxLayout="row wrap" class="mt-1">
                    <div fx-Flex="100" class="ml-1" fxFlex.gt-sm="100" fxLayout="column wrap">
                        <p class="m-0"><b>Mission</b></p>
                        <p>{{testCaseDetails.mission}}</p>
                    </div>
                </div>
                <div fxLayout="row wrap" class="mt-1">
                    <div fx-Flex="100" class="ml-1" fxFlex.gt-sm="100" fxLayout="column wrap">
                        <p class="m-0"><b>Goals</b></p>
                        <p>{{testCaseDetails.goals}}</p>
                    </div>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</div>