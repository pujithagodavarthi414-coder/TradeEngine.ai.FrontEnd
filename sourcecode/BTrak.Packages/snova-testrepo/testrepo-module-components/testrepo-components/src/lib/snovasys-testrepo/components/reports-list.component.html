<div class="p-0">
    <div class="p-0 m-0">
        <div fxLayout="row" fxLayoutGap="0" class="mb-05 mt-05 ml-05 mr-05">
            <div fxFlex class="custom-searchbar">
                <input type="text" name="search" class="full-width search_goal"
                    placeholder="{{'ASSETS.SEARCH' | translate}}" [(ngModel)]='searchText'
                    style="padding: 0 0 0 5px !important;">
                <div class="close_icon mr-4 mt-n2" style="right: 40px !important;">
                    <span *ngIf="!searchText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <mat-icon *ngIf="searchText" class="icon-button mr-08" aria-hidden="false" (click)="closeSearch()">
                        close
                    </mat-icon>
                </div>
            </div>
            <div fxFlex="35px" fxLayoutAlign="end center" hasBackdrop
                *ngIf="(canAccess_entityType_feature_AddOrUpdateTestReport)">
                <a class="add-test-case"
                    matTooltip="{{'TESTMANAGEMENT.ADDREPORT' | translate | softLabelsPipe : softLabels}}"
                    [satPopoverAnchorFor]="addReport" #addReportsPopover="satPopoverAnchor"
                    (click)="openReportsDialog(addReportsPopover)" style="z-index: 1;">
                    <fa-icon class="mr-05 add-section-square mat-color-accent" icon="plus-square"></fa-icon>
                </a>
            </div>
            <div fxFlex="30px" fxLayoutAlign="end center" [satPopoverAnchorFor]="datePopover" hasBackdrop
                (click)="datePopover.toggle()">
                <div class="mr-05" fxFlex>
                    <span class="pull-right date-filter">
                        <fa-icon matTooltip="{{'TESTMANAGEMENT.FILTER' | translate}}" icon="filter"
                            class="mat-color-accent filter-operation">
                        </fa-icon>
                    </span>
                </div>
                <sat-popover #datePopover verticalAlign="below" hasBackdrop horizontalAlign="start">
                    <mat-card class="filter-data">
                        <a [ngClass]="{ 'active': (dateFrom && dateTo) }">
                            {{'TESTMANAGEMENT.CREATEDDATE' | translate}}:
                        </a>
                        <br>
                        <div class="mr-1 mt-02">
                            <mat-form-field class="mr-05">
                                <mat-label> {{'TESTMANAGEMENT.DATEFROM' | translate}}</mat-label>
                                <input matInput [matDatepicker]="picker1" autocomplete="off" [max]="maxDate"
                                    (click)="picker1.open()" readonly class="date-picker" [(ngModel)]="dateFrom"
                                    (dateChange)="changeDeadline(dateFrom,dateTo)">
                                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                            </mat-form-field>
                            <mat-form-field class="mr-05">
                                <mat-label> {{'TESTMANAGEMENT.TODATE' | translate}}</mat-label>
                                <input matInput [matDatepicker]="picker2" autocomplete="off" [min]="dateFrom"
                                    [max]="maxDate" (click)="picker2.open()" readonly class="date-picker"
                                    [(ngModel)]="dateTo">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="close_icon date_search mt-1-05">
                            <mat-icon *ngIf="dateFrom || dateTo" class="icon-button" aria-hidden="false"
                                (click)="closeDateFilter()" style="cursor:pointer">close</mat-icon>
                        </div>
                    </mat-card>
                </sat-popover>
            </div>
        </div>
        <div class="p-0 reports-items-list" id="style-1">
            <span *ngIf="!(anyOperationInProgress$ | async)">
                <mat-list-item
                    *ngFor="let report of (reportsList$ | async | testrailName: searchText: 'testreport' | dateFilter : dateFrom : dateTo)">
                    <report-item-summary class="full-width" (deleteId)="getDeletedReportId($event)" [report]="report"
                        (click)="handleClickOnReportItem(report)"
                        [reportSelected]="report.testRailReportId === selectedReportId" [reportId]="selectedReportId">
                    </report-item-summary>
                </mat-list-item>
                <mat-card
                    *ngIf="(reportsList$ | async | testrailName: searchText: 'testreport' | dateFilter : dateFrom : dateTo).length === 0"
                    class="p-0 test-display" fxFlex="100" fxFlex.gt-sm="100">
                    <div fxLayout="row" fxFlex="100">
                        <div fxFlex="100" fxFlex.gt-sm="5" class="p-05">
                            <fa-icon icon="info-circle"></fa-icon>
                        </div>
                        <div fxFlex="100" fxFlex.gt-sm="95" class="p-05 ml-1">
                            <p class="m-0">
                                {{'TESTMANAGEMENT.NOSEARCHRESULTSFOUND' | translate | softLabelsPipe : softLabels}}</p>
                        </div>
                    </div>
                </mat-card>
            </span>
            <span *ngIf="(anyOperationInProgress$ | async)">
                <mat-list-item>
                    <reports-list-loading class="full-width"></reports-list-loading>
                </mat-list-item>
            </span>
        </div>
    </div>
</div>

<sat-popover backdropClass="backdrop-color" #addReport verticalAlign="below" hasBackdrop [interactiveClose]="false"
    horizontalAlign="end">
    <mat-card class="filter-data p-0">
        <mat-card-title class="text-center">
            <div class="card-title-text mat-bg-primary p-05">
                {{'TESTMANAGEMENT.ADDREPORT' | translate | softLabelsPipe : softLabels}}
            </div>
        </mat-card-title>
        <add-report *ngIf="loadAddReport" (closeReport)="closeReportDialog()" [hideMileStones]="hideMileStones">
        </add-report>
    </mat-card>
</sat-popover>