<div fxLayout="column">
<div fxLayout="row wrap" class="">
    <div fxFlex="100" fxLayout="row wrap" fxLayout.xs="column">
        <div fxFlex="100" class="ml-1" fxFlex.gt-xs="20" fxLayout="column wrap">
            <p class="m-0"><b>{{'TESTMANAGEMENT.TYPE' | translate}}</b></p>
            <p>{{testCaseDetail.typeName}}</p>
        </div>
        <div fxFlex="100" class="ml-1" fxFlex.gt-xs="20" fxLayout="column wrap">
            <p class="m-0"><b>{{'TESTMANAGEMENT.PRIORITY' | translate}}</b></p>
            <p>{{testCaseDetail.priorityType}}</p>
        </div>
        <div fxFlex="100" class="ml-1" fxFlex.gt-xs="20" fxLayout="column wrap">
            <p class="m-0"><b>{{'TESTMANAGEMENT.ESTIMATE' | translate}}</b></p>
            <p
                *ngIf="!(testCaseDetail.estimate == null) && !(testCaseDetail.estimate == '') && !(testCaseDetail.estimate == 0)">
                {{testCaseDetail.estimate | estimationTime}}
            </p>
            <p *ngIf="testCaseDetail.estimate == null || testCaseDetail.estimate == ''">None</p>
        </div>
        <div fxFlex="100" class="ml-1" fxFlex.gt-xs="20" fxLayout="column wrap">
            <p class="m-0"><b>{{'TESTMANAGEMENT.AUTOMATIONTYPE' | translate}}</b></p>
            <p class="mb-0">{{testCaseDetail.automationType}}</p>
        </div>
    </div>
</div>
<div fxLayout="row wrap">
    <mat-divider class="mat-divider-position ml-05 mr-05 mat-divider mt-05 mb-05" role="separator"
        aria-orientation="horizontal">
    </mat-divider>
    <div fx-Flex="100" class="ml-1" fxFlex.gt-xs="100" fxLayout="column wrap">
        <p class="m-0"><b>{{'TESTMANAGEMENT.REFERENCES' | translate}}</b></p>
        <ng-container *ngIf="!(testCaseDetail.references == null) && !(testCaseDetail.references == '')">
            <div *ngFor="let references of testCaseDetail.referencesList" class="pl-1">
                <a (click)="navigateToReferencePage(references)"
                    class="test-trail-references-hover word-break">{{references}}</a>
            </div>
        </ng-container>
    </div>
</div>
<div fxLayout="row wrap" *ngIf="(showSteps || showText)">
    <mat-divider class="mat-divider-position ml-05 mr-05 mat-divider mt-05 mb-05" role="separator"
        aria-orientation="horizontal">
    </mat-divider>
    <div fx-Flex="100" class="ml-1" fxFlex.gt-xs="100" fxLayout="column wrap">
        <p class="m-0"><b>{{'TESTMANAGEMENT.PRECONDITIONS' | translate}}</b></p>
        <p class="m-0 word-break display-pre-line ml-05 p-05" *ngIf="!(testCaseDetail.precondition == null) 
        && !(testCaseDetail.precondition == '')">{{testCaseDetail.precondition}}</p>
    </div>
</div>
<div *ngIf="preFilePath.length > 0 && (showSteps || showText)"
    class="mt-05 mb-05 ml-2 userStory-name min-width-overflow" fxFlex="100" fxLayout="column">
    <span *ngFor="let img of preFilePath;let i = index" fxLayout="row">
        <fa-icon icon="circle" class="fa-xs mr-05 mt-05" fxFlex="12px"></fa-icon>
        <a target="_blank" [href]="sanitizeUrl(img)" fxFlex="calc(100% - 20px)"
            class="add-test-case allgoals_txt userStory-name-control" [matTooltip]="img | fileNamePipe"
            matTooltipShowDelay="300">{{img | fileNamePipe}}</a>
    </span>
</div>
<div fxLayout="row wrap" *ngIf="showSteps">
    <mat-divider class="mat-divider-position ml-05 mr-05 mat-divider mt-05 mb-05" role="separator"
        aria-orientation="horizontal">
    </mat-divider>
    <div fxFlex="100" class="ml-1 mb-1">
        <p class="m-0"><b>{{'TESTMANAGEMENT.STEPS' | translate}}</b></p>
    </div>
    <mat-card *ngIf="testCaseDetail.testCaseSteps == null || testCaseDetail.testCaseSteps.length == 0"
        class="p-0 test-display ml-1" fxFlex="100" fxFlex.gt-xs="100">
        <div fxLayout="row" fxFlex="100">
            <div fxFlex="100" fxFlex.gt-xs="5" class="p-05">
                <fa-icon icon="info-circle"></fa-icon>
            </div>
            <div fxFlex="100" fxFlex.gt-xs="95" class="p-05 ml-1">
                <p class="m-0">{{'TESTMANAGEMENT.NOSTEPSFOUND' | translate}}</p>
            </div>
        </div>
    </mat-card>
    <div fxFlex="100" class="mb-1 ml-05 test-suite-steps p-03" fxLayout="row wrap"
        *ngIf="!(testCaseDetail.testCaseSteps == null) && testCaseDetail.testCaseSteps.length > 0" fxHide
        fxHide.gt-xs="false">
        <div fxFlex="100" fxFlex.gt-xs="7" fxLayout="column wrap"></div>
        <div fxFlex="100" fxFlex.gt-xs="39" fxLayout="column wrap">
            <b>{{'TESTMANAGEMENT.STEP' | translate}}</b></div>
        <div fxFlex="100" fxFlex.gt-xs="35" fxLayout="column wrap">
            <b>{{'TESTMANAGEMENT.EXPECTEDRESULT' | translate}}</b></div>
        <div class="ml-05" fxFlex="100" fxFlex.gt-xs="14" fxLayout="column wrap">
            <b>{{'TESTMANAGEMENT.STATUS' | translate}}</b></div>
    </div>
    <div fxFlex="100" fxLayout="row wrap" fxLayout.xs="column"
        *ngFor="let step of testCaseDetail.testCaseSteps;let i = index" class="mb-1 ml-05">
        <div fxFlex="100" fxFlex.gt-xs="5" class="mr-05" fxHide fxHide.gt-xs="false">
            <span class="badge-item test-case-step-count count-padding">{{i + 1}}</span>
        </div>
        <div fxFlex="100" fxFlex.gt-xs="36" fxLayout="column" class="word-break display-pre-line pr-03" fxHide
            fxHide.gt-xs="false">
            <div fxFlex class="mb-05" *ngIf="step.stepText">
                {{step.stepText}}
            </div>
            <div class="userStory-name min-width-overflow" fxFlex fxLayout="column"
                *ngIf="step.stepTextFilePath != null && step.stepTextFilePath.trim().length > 0">
                <span *ngFor="let img of getStepTextImagesArray(i);let ind = index" fxLayout="row">
                    <fa-icon icon="circle" class="fa-xs mr-05 mt-05" fxFlex="12px"></fa-icon>
                    <a target="_blank" [href]="sanitizeUrl(img)" fxFlex="calc(100% - 22px)"
                        class="add-test-case allgoals_txt userStory-name-control" [matTooltip]="img | fileNamePipe"
                        matTooltipShowDelay="300">{{img | fileNamePipe}}</a>
                </span>
            </div>
        </div>
        <div class="mt-05" fxFlex="100" fxLayout="column wrap" fxShow fxShow.gt-xs="false">
            <b>{{'TESTMANAGEMENT.STEP' | translate}}</b>
        </div>
        <div fxFlex="100" class="word-break display-pre-line mr-05" fxLayout="column wrap" fxShow fxShow.gt-xs="false">
            <span>
                <span class="badge-item test-case-step-count count-padding mr-1">{{i + 1}} </span>
                <span> {{step.stepText}}</span>
            </span>
        </div>
        <div fxFlex class="mt-05 word-break display-pre-line userStory-name min-width-overflow" fxShow
            fxShow.gt-xs="false" *ngIf="step.stepTextFilePath != null && step.stepTextFilePath.trim().length > 0"
            fxLayout="column">
            {{'TESTMANAGEMENT.STEPTEXTIMAGES' | translate}}:
            <span fxLayout="row" *ngFor="let img of getStepTextImagesArray(i);let ind = index">
                <fa-icon icon="circle" class="fa-xs mr-05 mt-05" fxFlex="12px"></fa-icon>
                <a target="_blank" [href]="sanitizeUrl(img)" fxFlex="calc(100% - 20px)"
                    class="add-test-case allgoals_txt userStory-name-control" [matTooltip]="img | fileNamePipe"
                    matTooltipShowDelay="300">{{img | fileNamePipe}}</a>
            </span>
        </div>
        <div class="mt-05" fxFlex="100" fxLayout="column wrap" fxShow fxShow.gt-xs="false">
            <b>{{'TESTMANAGEMENT.EXPECTEDRESULT' | translate}}</b>
        </div>
        <div fxFlex="100" fxFlex.gt-xs="35" class="word-break display-pre-line ml-1" fxLayout="column" fxHide
            fxHide.gt-xs="false">
            <div fxFlex class="mb-05" *ngIf="step.stepExpectedResult">
                {{step.stepExpectedResult}}
            </div>
            <div fxFlex class="userStory-name min-width-overflow"
                *ngIf="step.stepExpectedResultFilePath != null && step.stepExpectedResultFilePath.trim().length > 0"
                fxLayout="column">
                <span *ngFor="let img of getStepResultImagesArray(i);let ind = index" fxLayout="row">
                    <fa-icon icon="circle" class="fa-xs mr-05 mt-05" fxFlex="12px"></fa-icon>
                    <a target="_blank" [href]="sanitizeUrl(img)" fxFlex="calc(100% - 20px)"
                        class="add-test-case allgoals_txt userStory-name-control" [matTooltip]="img | fileNamePipe"
                        matTooltipShowDelay="300">{{img | fileNamePipe}}</a>
                </span>
            </div>
        </div>
        <div class="mt-05" fxFlex="100" fxFlex.gt-xs="35" fxLayout="column wrap" fxShow fxShow.gt-xs="false">
            <span>{{step.stepExpectedResult}}</span>
        </div>
        <div fxFlex class="mt-05 word-break display-pre-line userStory-name min-width-overflow" fxShow
            fxShow.gt-xs="false"
            *ngIf="step.stepExpectedResultFilePath != null && step.stepExpectedResultFilePath.trim().length > 0"
            fxLayout="column">
            {{'TESTMANAGEMENT.STEPEXPECTEDRESULTIMAGES' | translate}}:
            <span fxLayout="row" *ngFor="let img of getStepResultImagesArray(i);let ind = index">
                <fa-icon icon="circle" class="fa-xs mr-05 mt-05" fxFlex="12px"></fa-icon>
                <a target="_blank" [href]="sanitizeUrl(img)" fxFlex="calc(100% - 20px)"
                    class="add-test-case allgoals_txt userStory-name-control" [matTooltip]="img | fileNamePipe"
                    matTooltipShowDelay="300">{{img | fileNamePipe}}</a>
            </span>
        </div>
        <div class="mt-05" fxFlex="100" fxFlex.gt-xs="18" fxLayout="column wrap" fxShow fxShow.gt-xs="false">
            <b>{{'TESTMANAGEMENT.STATUS' | translate}}</b>
        </div>
        <mat-chip fxFlex="12" class="allgoals_process text-center ml-05 mat-chip-color-text" mat-sm-chip
            [style.backgroundColor]="step.stepStatusColor">
            {{ step.stepStatusName }}
        </mat-chip>
    </div>
</div>
<div *ngIf="showText">
    <div fxLayout="row wrap">
        <mat-divider class="mat-divider-position ml-05 mr-05 mat-divider mt-05 mb-05" role="separator"
            aria-orientation="horizontal">
        </mat-divider>
        <div fx-Flex="100" class="ml-1" fxFlex.gt-xs="100" fxLayout="column wrap">
            <p class="m-0"><b>{{'TESTMANAGEMENT.STEPS' | translate}}</b></p>
            <p class="m-0 word-break display-pre-line ml-05 p-05" *ngIf="testCaseDetail.steps">{{testCaseDetail.steps}}
            </p>
        </div>
    </div>
    <div *ngIf="stepMostFilePath.length > 0" class="mt-05 mb-05 ml-2 userStory-name min-width-overflow" fxFlex="100"
        fxLayout="column">
        <span fxLayout="row" *ngFor="let img of stepMostFilePath;let i = index">
            <fa-icon icon="circle" class="fa-xs mr-05 mt-05" fxFlex="12px"></fa-icon>
            <a target="_blank" [href]="sanitizeUrl(img)" fxFlex="calc(100% - 20px)"
                class="add-test-case allgoals_txt userStory-name-control" [matTooltip]="img | fileNamePipe"
                matTooltipShowDelay="300">{{img | fileNamePipe}}</a>
        </span>
    </div>
    <div fxLayout="row wrap">
        <mat-divider class="mat-divider-position ml-05 mr-05 mat-divider mt-05 mb-05" role="separator"
            aria-orientation="horizontal">
        </mat-divider>
        <div fx-Flex="100" class="ml-1" fxFlex.gt-xs="100" fxLayout="column wrap">
            <p class="m-0"><b>{{'TESTMANAGEMENT.EXPECTEDRESULT' | translate}}</b></p>
            <p class="m-0 word-break display-pre-line ml-05 p-05" *ngIf="testCaseDetail.expectedResult">
                {{testCaseDetail.expectedResult}}</p>
        </div>
    </div>
    <div *ngIf="expectedMostFilePath.length > 0" class="mt-05 mb-05 ml-2 userStory-name min-width-overflow" fxFlex="100"
        fxLayout="column">
        <span fxLayout="row" *ngFor="let img of expectedMostFilePath;let i = index">
            <fa-icon icon="circle" class="fa-xs mr-05 mt-05" fxFlex="12px"></fa-icon>
            <a target="_blank" [href]="sanitizeUrl(img)" fxFlex="calc(100% - 20px)"
                class="add-test-case allgoals_txt userStory-name-control" [matTooltip]="img | fileNamePipe"
                matTooltipShowDelay="300">{{img | fileNamePipe}}</a>
        </span>
    </div>
</div>
<div *ngIf="showExploratory">
    <div fxLayout="row wrap">
        <mat-divider class="mat-divider-position ml-05 mr-05 mat-divider mt-05 mb-05" role="separator"
            aria-orientation="horizontal">
        </mat-divider>
        <div fx-Flex="100" class="ml-1" fxFlex.gt-xs="100" fxLayout="column wrap">
            <p class="m-0"><b>{{'TESTMANAGEMENT.MISSION' | translate}}</b></p>
            <p class="m-0 word-break display-pre-line ml-05 p-05" *ngIf="testCaseDetail.mission">
                {{testCaseDetail.mission}}</p>
        </div>
        <div *ngIf="testCaseMissionFilePath.length > 0" class="mt-05 mb-05 ml-2 userStory-name min-width-overflow"
            fxFlex="100" fxLayout="column">
            <span fxLayout="row" *ngFor="let img of testCaseMissionFilePath;let i = index">
                <fa-icon icon="circle" class="fa-xs mr-05 mt-05" fxFlex="12px"></fa-icon>
                <a target="_blank" [href]="sanitizeUrl(img)" fxFlex="calc(100% - 20px)"
                    class="add-test-case allgoals_txt userStory-name-control" [matTooltip]="img | fileNamePipe"
                    matTooltipShowDelay="300">{{img | fileNamePipe}}</a>
            </span>
        </div>
    </div>
    <div fxLayout="row wrap">
        <mat-divider class="mat-divider-position ml-05 mr-05 mat-divider mt-05 mb-05" role="separator"
            aria-orientation="horizontal">
        </mat-divider>
        <div fx-Flex="100" class="ml-1" fxFlex.gt-xs="100" fxLayout="column wrap">
            <p class="m-0"><b>{{'TESTMANAGEMENT.GOALS' | translate | softLabelsPipe : softLabels}}</b></p>
            <p class="m-0 word-break display-pre-line ml-05 p-05" *ngIf="testCaseDetail.goals">{{testCaseDetail.goals}}
            </p>
        </div>
        <div *ngIf="testCaseGoalFilePath.length > 0" class="mt-05 mb-05 ml-2 userStory-name min-width-overflow"
            fxFlex="100" fxLayout="column">
            <span fxLayout="row" *ngFor="let img of testCaseGoalFilePath;let i = index">
                <fa-icon icon="circle" class="fa-xs mr-05 mt-05" fxFlex="12px"></fa-icon>
                <a target="_blank" [href]="sanitizeUrl(img)" fxFlex="calc(100% - 20px)"
                    class="add-test-case allgoals_txt userStory-name-control" [matTooltip]="img | fileNamePipe"
                    matTooltipShowDelay="300">{{img | fileNamePipe}}</a>
            </span>
        </div>
    </div>
</div>
<div fxLayout="row wrap" *ngIf="testCaseFilePath.length > 0">
    <mat-divider class="mat-divider-position ml-05 mr-05 mat-divider mt-05 mb-05" role="separator"
        aria-orientation="horizontal">
    </mat-divider>
    <div fx-Flex="100" class="ml-1" fxFlex.gt-xs="100" fxLayout="column wrap">
        <p class="m-0"><b>{{'TESTMANAGEMENT.TESTCASEFILES' | translate}}</b></p>
    </div>
</div>
<div class="mt-05 mb-05 ml-2 userStory-name min-width-overflow" fxFlex="100" fxLayout="column">
    <span class="hide-content-overflow" fxLayout="row" *ngFor="let img of testCaseFilePath;let i = index">
        <fa-icon icon="circle" class="fa-xs mr-05 mt-05" fxFlex="12px"></fa-icon>
        <a target="_blank" [href]="sanitizeUrl(img)" fxFlex="calc(100% - 20px)"
            class="add-test-case allgoals_txt userStory-name-control" [matTooltip]="img | fileNamePipe"
            matTooltipShowDelay="300">{{img | fileNamePipe}}</a>
    </span>
</div>
</div>