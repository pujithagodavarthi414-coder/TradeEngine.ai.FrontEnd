<div class="p-0">
  <mat-progress-bar color="primary" mode="indeterminate" *ngIf="(anyOperationInProgress$ | async)">
  </mat-progress-bar>
  <div class="ml-05 mt-n2 mr-05">
    <mat-form-field class="full-width custom-select-matform primary-text testrun-section-features">
      <mat-select [(ngModel)]="sectionFilter" (selectionChange)="onChangeSectionFilter($event.value)">
        <mat-option value="1">{{'TESTMANAGEMENT.SELECTEDGROUPONLY' | translate}}</mat-option>
        <mat-option value="2">{{'TESTMANAGEMENT.SELECTEDGROUPANDSUBGROUPS' | translate}}</mat-option>
      </mat-select>
    </mat-form-field>
    <a *ngIf="isSectionsListPresent && !expandAll" class="pull-right add-test-case mt-20p"
      matTooltip="{{'TESTMANAGEMENT.EXPANDSECTIONS' | translate}}" (click)="expandAll = !expandAll">
      <fa-icon class="mr-05 add-section-square mat-color-accent" icon="caret-square-right"></fa-icon>
    </a>
    <a *ngIf="isSectionsListPresent && expandAll" class="pull-right add-test-case mt-20p mat-color-accent"
      matTooltip="{{'TESTMANAGEMENT.COLLAPSESECTIONS' | translate}}" (click)="expandAll = !expandAll">
      <fa-icon class="mr-05 add-section-square mat-color-accent" icon="caret-square-down"></fa-icon>
    </a>
    <div class="search_goalinput" style="margin-top: -15px;" *ngIf="isSectionsListPresent">
      <div fxLayoutAlign="end center" fxLayoutAlign.xs="start center" class="full-width">
        <mat-form-field class="full-width">
          <input class="search_goal" matInput placeholder="{{'TESTMANAGEMENT.SEARCHBYENTER' | translate}}"
            [(ngModel)]="searchText" (keydown)="checkSearchText($event,searchText)">
        </mat-form-field>
      </div>
      <span class="close_icon testrail-search-close" fxLayoutAlign="end center" fxLayoutAlign.xs="start center"
        style="top:24px !important;">
        <span *ngIf="!searchText"></span>
        <mat-icon *ngIf="searchText" class="icon-button mr-05" aria-hidden="false" (click)="closeSearch()"
          style="cursor:pointer">
          close</mat-icon>
      </span>
    </div>
  </div>
  <div class="p-0 m-0 test-runs-sections-list" id="style-1"
    [ngStyle]="{ 'height': isSectionsListPresent ? 'calc(100vh - 198px)' : 'calc(100vh - 152px)' }">
    <div class="p-0" *ngIf="loadRunSections">
      <div *ngIf="!(anyOperationInProgress$ | async)">
        <mat-card *ngIf="isSectionsPresent" class="p-0 test-display" fxFlex="100" fxFlex.gt-sm="100">
          <div fxLayout="row" fxFlex="100">
            <div fxFlex="100" fxFlex.gt-xs="5" class="m-1">
              <fa-icon icon="info-circle"></fa-icon>
            </div>
            <div fxFlex="100" fxFlex.gt-xs="95" class="p-1">
              <p class="m-0">{{'TESTMANAGEMENT.THEREWERENOSECTIONSRELATED' | translate | softLabelsPipe : softLabels}}
              </p>
            </div>
          </div>
        </mat-card>
        <div *ngIf="isSectionsListPresent">
          <div *ngIf="!isSearching">
            <div *ngFor="let section of testRunSectionList.sections">
              <testrun-sections-view (selectedSectionData)="getSelectedSectionData($event)" [section]="section"
                [sectionSelected]="sectionSelected" [sectionCollapse]="expandAll" [filterCases]="filterCases">
              </testrun-sections-view>
            </div>
          </div>
          <div *ngIf="isSearching">
            <div *ngFor="let section of sectionsList.sections">
              <testrun-sections-view (selectedSectionData)="getSelectedSectionData($event)" [section]="section"
                [sectionSelected]="sectionSelected" [sectionCollapse]="expandAll" [filterCases]="filterCases">
              </testrun-sections-view>
            </div>
            <mat-card *ngIf="sectionsList.sections == null || sectionsList.sections.length == 0"
              class="p-0 test-display" fxFlex="100" fxFlex.gt-sm="100">
              <div fxLayout="row" fxFlex="100">
                <div fxFlex="100" fxFlex.gt-xs="5" class="p-05">
                  <fa-icon icon="info-circle"></fa-icon>
                </div>
                <div fxFlex="100" fxFlex.gt-xs="95" class="p-05 ml-1">
                  <p class="m-0">
                    {{'TESTMANAGEMENT.NOSEARCHRESULTSFOUND' | translate | softLabelsPipe : softLabels}}
                  </p>
                </div>
              </div>
            </mat-card>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>