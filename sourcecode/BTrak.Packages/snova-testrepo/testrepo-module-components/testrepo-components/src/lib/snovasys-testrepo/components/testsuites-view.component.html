<div class="testsuite-tab" fxLayout="row wrap" fxLayout.lt-sm="column"
    *ngIf="(testSuitesCount$ | async) > 0 || fromCustomApp" (window:resize)="onResize()">
    <div fxFlex="30px" fxHide.xs>
        <div class='custom-label veritcal-label'>
            <div class='custom-label-content' (click)="isTestSuite = !isTestSuite">
                {{'TESTMANAGEMENT.SCENARIOS' | translate | softLabelsPipe : softLabels}} <span>
                    <fa-icon class="ml-02 rotate-icon" icon="thumbtack" [ngClass]="{'rotate-icon-down': isTestSuite}">
                    </fa-icon>
                </span></div>
            <div class='custom-label-content' (click)="isTestSuiteSection = !isTestSuiteSection">
                {{'TESTMANAGEMENT.TESTSECTION' | translate}} <span>
                    <fa-icon class="ml-02 rotate-icon" icon="thumbtack"
                        [ngClass]="{'rotate-icon-down': isTestSuiteSection}"> </fa-icon>
                </span></div>
        </div>
    </div>
    <div fxFlex="16" fxFlex.sm="48" fxFlex.xs="100" fxFlex.md="45" fxFlex.lg="17" [hidden]="isTestSuite"
        class="testrail-custom">
        <mat-card class="custom-box mb-0 mt-0 p-0">
            <testsuites-list (testSuiteDeleted)="getDeletedId($event)" [testSuiteIdApp]="Ids"
                [fromCustomApp]="fromCustomApp" (testSuiteDescription)="getTestSuiteDescription($event)"
                (testSuiteId)="getTestSuiteId($event)">
            </testsuites-list>
        </mat-card>
    </div>
    <div fxFlex="16" fxFlex.sm="46.5" fxFlex.xs="100" fxFlex.md="50" fxFlex.lg="16" [hidden]="isTestSuiteSection"
        class="namesection-custom">
        <mat-card class="custom-box mb-0 p-0 mt-0">
            <testsuites-sections-list [loadSectionsOnSuiteDelete]="isSectionsSubsectionsLoaded"
                (loadedSections)="changeSectionsStatus($event)" (selectedSectionData)="getSelectedSectionData($event)"
                (selectedEditSectionData)="getSelectedEditSectionData($event)"
                (hierarchicalCases)="getHierarchicalCases($event)" [selectedTestSuiteId]="testSuitesId"
                [sectionSelected]="sectionSelected"></testsuites-sections-list>
        </mat-card>
    </div>
    <div fxFlex fxFlex.lt-sm="100">
        <as-split direction="horizontal" unit="percent" gutterSize="5">
            <as-split-area size="*" minSize="45">
                <mat-card class="custom-box mb-0 mt-03 p-0">
                    <testsuite-section-cases-view (casePreviewDetails)="getCasePreviewDetails($event)"
                        [loadSectionsOnSuiteDelete]="isSectionsSubsectionsLoaded" [loadSections]="isSectionsLoaded"
                        [selectedSectionData]="sectionData" [sectionTemporaryData]="sectionTemporaryData"
                        [editableSectionData]="editSectionData" [selectedTestSuiteDescription]="testSuiteDescription"
                        [selectedTestSuiteId]="testSuitesId" [isHierarchical]="isHierarchical"
                        [selectedCase]="selectedCaseFromPreview" [fromCustomApp]="fromCustomApp">
                    </testsuite-section-cases-view>
                </mat-card>
            </as-split-area>
            <as-split-area size="37" minSize="36" maxSize="54"
                *ngIf="(showCasePreview || showCaseEditPreview) && (screenWidth > 1279)">
                <div fxFlex="100" *ngIf="showCasePreview">
                    <testsuite-cases-operation [testCaseDetails]="showCasePreview" [isHierarchical]="isHierarchical"
                        (closePreview)="closePreviewDialog()"
                        (caseDataPreviewDetails)="getCaseDataPreviewDetails($event)">
                    </testsuite-cases-operation>
                </div>
                <div fxFlex="100" *ngIf="showCaseEditPreview">
                    <testcase-edit [testCaseDetails]="showCaseEditPreview" (closePreview)="closePreviewDialog()">
                    </testcase-edit>
                </div>
            </as-split-area>
        </as-split>
    </div>
    <div fxFlex="100" *ngIf="showCasePreview && !(screenWidth > 1279)">
        <testsuite-cases-operation [testCaseDetails]="showCasePreview" [isHierarchical]="isHierarchical"
            (closePreview)="closePreviewDialog()" (caseDataPreviewDetails)="getCaseDataPreviewDetails($event)">
        </testsuite-cases-operation>
    </div>
    <div fxFlex="100" *ngIf="showCaseEditPreview && !(screenWidth > 1279)">
        <testcase-edit [testCaseDetails]="showCaseEditPreview" (closePreview)="closePreviewDialog()"></testcase-edit>
    </div>
</div>

<app-common-message-box *ngIf="!(projectRelatedDataLoading$ | async) && (testSuitesCount$ | async) == 0
            && (canAccess_entityType_feature_AddOrUpdateScenario) && !fromCustomApp"
    textToDisplay="{{'TESTMANAGEMENT.YOUDONTHAVEANYTESTSUITESINTHEPROJECT' | translate | softLabelsPipe :softLabels}}">
    <ng-template ng-message-tmp>
        <button mat-button mat-raised-button class="mr-05 text-center mt-1" color="primary"
            *ngIf="canAccess_entityType_feature_AddOrUpdateScenario" [satPopoverAnchorFor]="addTestSuite"
            #addSuitePopover="satPopoverAnchor" (click)="openSuiteDialog(addSuitePopover)">
            <fa-icon class="mr-05" icon="plus"></fa-icon>
            {{'TESTMANAGEMENT.ADDTESTSUITE' | translate | softLabelsPipe :softLabels}}
        </button>
    </ng-template>
</app-common-message-box>

<app-common-message-box *ngIf="!(projectRelatedDataLoading$ | async) && (testSuitesCount$ | async) == 0
            && !(canAccess_entityType_feature_AddOrUpdateScenario)"
    textToDisplay="{{'TESTMANAGEMENT.NOYOUDONTHAVEANYTESTSUITESINTHEPROJECT' | translate | softLabelsPipe :softLabels}}">
</app-common-message-box>

<!-- <div class="floating-right-fab-button" *ngIf="canAccess_entityType_feature_AddOrUpdateScenario">
    <div class="handle">
        <button mat-fab color="accent"
            matTooltip="{{'TESTMANAGEMENT.ADDTESTSUITE' | translate | softLabelsPipe :softLabels}}"
            [satPopoverAnchorFor]="addTestSuite" #addTestSuitePopover="satPopoverAnchor"
            (click)="openTestSuiteDialog(addTestSuitePopover)">
            <mat-icon>add</mat-icon>
        </button>
    </div>
</div> -->

<sat-popover backdropClass="backdrop-color" #addTestSuite verticalAlign="below" hasBackdrop [interactiveClose]="false"
    horizontalAlign="end">
    <mat-card class="filter-data p-0">
        <mat-card-title class="text-center">
            <div class="card-title-text mat-bg-primary p-05">
                {{'TESTMANAGEMENT.ADDTESTSUITE' | translate | softLabelsPipe :softLabels}}
            </div>
        </mat-card-title>
        <app-testrail-testsuite-edit *ngIf="loadAddTestSuite" (closeTestSuite)="closeTestSuiteDialog()">
        </app-testrail-testsuite-edit>
    </mat-card>
</sat-popover>