<div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="1%" class="mt-05 ml-05">
  <h5>{{'CLIENTS.ESTIMATESANDPROPOSALSFORSOFTWAREDEVELOPMENT' | translate}} </h5>
  <h5>
    <fa-icon class="filter cursor" icon="plus-circle" (click)="addEstimate()"></fa-icon>
  </h5>
</div>
<mat-card class="default" class="p-0  bliing_custom-card">
  <mat-card-title class="full-width">
    <div fxLayout="row " fxLayoutGap="0" fxLayoutGap.xs="10px">
      <div fxFlex="2" fxFlex.xs="4" fxLayoutAlign="start center">
        <button type="submit" mat-icon-button class="pull-right" (click)="isOpen = !isOpen"
          matTooltip=" {{'HRMANAGAMENT.ADVANCESEARCH' | translate}}">
          <fa-icon icon="filter" class="filter mat-color-accent">
          </fa-icon>
        </button>
      </div>
      <div class="filter-section" [hidden]="isOpen" fxFlex fxLayout="row" fxLayoutAlign="start center"
        fxLayoutGap="10px">
        <div>
          <button mat-icon-button matTooltip="{{'RESET' | translate}}" (click)="resetAllFilters()">
            <fa-icon class="filter mat-color-accent" icon="undo"></fa-icon>
          </button>
        </div>
        <div>
          {{'CLIENTS.ALLESTIMATESANDPROPOSALS' | translate}}
        </div>
        <div [ngClass]="{ 'active': searchIsActive }" [satPopoverAnchorFor]="statusPopover"
        (click)="statusPopover.toggle()" class="mt-05">
        <a>
          <mat-icon>arrow_drop_down</mat-icon>{{'STATUS' | translate}}
        </a>
        <sat-popover #statusPopover verticalAlign="below" hasBackdrop horizontalAlign="start">
          <mat-card class="filter-data">
            <div class="ml-05 mr-05 search_goalinput">
              <mat-form-field>
                <mat-label>
                  {{ 'WORKFLOWMANAGEMENT.SELECTSTATUS' | translate }}
                </mat-label>
                <mat-select [(ngModel)]="selectedProject" (ngModelChange)="changeFilterType()">
                  <mat-option *ngFor="let status of statusList">
                    {{status.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </mat-card>
        </sat-popover>
      </div>
        <div [ngClass]="{ 'active': searchIsActive }" [satPopoverAnchorFor]="branchPopover"
          (click)="branchPopover.toggle()" class="mt-05">
          <a>
            <mat-icon>arrow_drop_down</mat-icon>{{'SEARCH' | translate}}
          </a>
          <sat-popover #branchPopover verticalAlign="below" hasBackdrop horizontalAlign="start">
            <mat-card class="filter-data">
              <div class="ml-05 mr-05 search_goalinput">
                <mat-form-field fxLayoutAlign="end center">
                  <input class="search_goal" matInput placeholder="{{'SEARCH' | translate}}" [(ngModel)]="searchText"
                    (input)="searchRecords()">
                </mat-form-field>
                <span class="close_icon">
                  <span *ngIf="!searchText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <mat-icon *ngIf="searchText" class="icon-button" aria-hidden="false" (click)="closeSearch()"
                    style="cursor:pointer">
                    close</mat-icon>
                </span>
              </div>
            </mat-card>
          </sat-popover>
        </div>

        <div [ngClass]="{ 'active': searchIsActive }" [satPopoverAnchorFor]="datePopover"
        (click)="datePopover.toggle()" class="mt-05">
        <a>
          <mat-icon>arrow_drop_down</mat-icon>{{'ADVANCEDSEARCH.DATE' | translate}}
        </a>
        <sat-popover #datePopover verticalAlign="below" hasBackdrop horizontalAlign="start">
          <mat-card class="filter-data">
              <mat-form-field>
                  <input matInput [matDatepicker]="picker" placeholder="Choose a date">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
          </mat-card>
        </sat-popover>
      </div>

      </div>
    </div>
  </mat-card-title>
  <ngx-datatable #mydatatable class="btrak" [columnMode]="'force'" [headerHeight]="35" [footerHeight]="35"
    [rowHeight]="35" [limit]="5" [rows]="estimatesList" [loadingIndicator]="AnyOperationProgress"
     [scrollbarH]="scrollbarH">
    <ngx-datatable-column name="{{ 'CLIENTS.ORGANIZATION/CLIENT' | translate }}" [flexGrow]="1" prop="organization"
      [sortable]="true">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{row?.organization}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="{{ 'CLIENTS.ESTIMATE/PROJECTTITLE' | translate }}" [flexGrow]="1" prop="createdOn">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{ row?.estimate }}
      </ng-template>
    </ngx-datatable-column>

    <ngx-datatable-column name="{{ 'CLIENTS.AMOUNTUSD' | translate }}" [flexGrow]="1" prop="amount">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{ row?.amount}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="{{ 'CLIENTS.SENTON' | translate }}" [flexGrow]="1" prop="sentOn">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{ row?.sentOn}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="{{ 'CLIENTS.SENTBYROLE' | translate }}" [flexGrow]="1" prop="amount">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{ row?.sentByRole}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="{{ 'STATUS' | translate }}" [flexGrow]="1" prop="status">
        <ng-template let-row="row" ngx-datatable-cell-template class="text-center">
            <div class="custom-table-cell-color" [ngStyle]="{ 'background' : row?.color }">

              {{ row?.status}}
            </div>
          </ng-template>
      
    </ngx-datatable-column>
    <ngx-datatable-column name="{{ 'ACTIONS' | translate }}" [flexGrow]="1" prop="STATUS">
      <ng-template let-row="row" ngx-datatable-cell-template>
        <div fxFlex="row" fxLayoutGap="5px" fxLayoutAlign="center center">
          <fa-icon class="filter cursor" icon="print"></fa-icon>
          <fa-icon class="filter cursor" icon="pen" (click)="editEstimate()"></fa-icon>
          <fa-icon class="filter cursor" icon="trash"></fa-icon>
        </div>
      </ng-template>
    </ngx-datatable-column>
  </ngx-datatable>
</mat-card>