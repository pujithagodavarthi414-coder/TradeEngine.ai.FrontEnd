<div class="p-1 invoice-preview-height" id="style-1">
    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="anyOperationIsInprogress">
    </mat-progress-bar>
    <div *ngIf="!anyOperationIsInprogress">
        <div *ngFor="let invoice of invoiceHistory">
            <div fxLayout="row wrap" fxLayoutGap="10px">
                <div mat-card-avatar fxFlex="5" fxFlex.gt-lg="3" fxFlex.xs="13">
                    <app-avatar matTooltip="{{ invoice.performedByUserName }}"
                        [name]="invoice.performedByUserName | removeSpecialCharacters"
                        [src]="invoice.performedByUserProfileImage | fetchSizedAndCachedImage: '20':''" [isRound]="true"
                        size="20">
                    </app-avatar>
                </div>
                <div fxFlex fxLayout="column" fxLayoutGap="5px">
                    <div fxLayout="row">
                        <div fxFlex="50" fxFlex.gt-lg="20" fxFlex.lg="30" fxFlex.md="45">
                            <b>{{invoice.performedByUserName}}</b>
                        </div>
                        <div fxFlex>
                            <span class="pull-right"
                                matTooltip="{{invoice.createdDateTime | utcToLocalTime| date:'dd-MM-yyyy, h:mm a'}}">{{invoice.createdDateTime | utcToLocalTime | timeago : 'live'}}</span>
                        </div>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceAdded'">
                        <span>
                            {{ 'BILLINGMANAGEMENT.INVOICEWITHNUMBER' | translate }} <b>{{invoice.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.WASCREATED' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceAmountAdded'">
                        <span>
                            {{ 'CLIENTS.PAID' | translate }}
                            <b>{{convertValue(invoice?.newValue) | number}}</b>
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceClient'">
                        <span>
                            {{ 'BILLINGMANAGEMENT.CLIENTCHANGEDFROM' | translate }} <b>{{invoice?.oldValue}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{invoice?.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceTitle'">
                        <span *ngIf="invoice.oldValue == null || invoice.oldValue.trim() == ''">
                            {{ 'BILLINGMANAGEMENT.TITLECHANGEDTO' | translate }} <b>{{invoice.newValue}}</b>
                        </span>
                        <span
                            *ngIf="invoice.oldValue != null && invoice.oldValue.trim() != '' && invoice.newValue != null && invoice.newValue.trim() != ''">
                            {{ 'BILLINGMANAGEMENT.TITLECHANGEDFROM' | translate }} <b>{{invoice.oldValue}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{invoice.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                        </span>
                        <span
                            *ngIf="(invoice.oldValue != null && invoice.oldValue.trim() != '') && (invoice.newValue == null || invoice.newValue.trim() == '')">
                            {{ 'BILLINGMANAGEMENT.TITLEREMOVED' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceNumber'">
                        <span>
                            {{ 'BILLINGMANAGEMENT.NUMBERCHANGEDFROM' | translate }} <b>{{invoice?.oldValue}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{invoice?.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoicePONumber'">
                        <span *ngIf="invoice.oldValue == null || invoice.oldValue.trim() == ''">
                            {{ 'BILLINGMANAGEMENT.PONUMBERCHANGEDTO' | translate }} <b>{{invoice.newValue}}</b>
                        </span>
                        <span
                            *ngIf="invoice.oldValue != null && invoice.oldValue.trim() != '' && invoice.newValue != null && invoice.newValue.trim() != ''">
                            {{ 'BILLINGMANAGEMENT.PONUMBERCHANGEDFROM' | translate }} <b>{{invoice.oldValue}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{invoice.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                        </span>
                        <span
                            *ngIf="(invoice.oldValue != null && invoice.oldValue.trim() != '') && (invoice.newValue == null || invoice.newValue.trim() == '')">
                            {{ 'BILLINGMANAGEMENT.PONUMBERREMOVED' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceDueDate'">
                        <span *ngIf="invoice.oldValue == null || invoice.oldValue.trim() == ''">
                            {{ 'BILLINGMANAGEMENT.DUEDATECHANGEDTO' | translate }}
                            <b>{{invoice?.newValue}}</b>
                        </span>
                        <span
                            *ngIf="invoice.oldValue != null && invoice.oldValue.trim() != '' && invoice.newValue != null && invoice.newValue.trim() != ''">
                            {{ 'BILLINGMANAGEMENT.DUEDATECHANGEDFROM' | translate }}
                            <b>{{invoice?.oldValue}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }}
                            <b>{{invoice?.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                        </span>
                        <span
                            *ngIf="(invoice.oldValue != null && invoice.oldValue.trim() != '') && (invoice.newValue == null || invoice.newValue.trim() == '')">
                            {{ 'BILLINGMANAGEMENT.DUEDATEREMOVED' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceIssueDate'">
                        <span>
                            {{ 'BILLINGMANAGEMENT.ISSUEDATECHANGEDFROM' | translate }}
                            <b>{{invoice?.oldValue}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }}
                            <b>{{invoice?.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceCurrency'">
                        <span>
                            {{ 'BILLINGMANAGEMENT.CURRENCYCHANGEDFROM' | translate }} <b>{{invoice?.oldValue}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{invoice?.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceTerms'">
                        <span *ngIf="invoice.oldValue == null || invoice.oldValue.trim() == ''">
                            {{ 'BILLINGMANAGEMENT.TERMSCHANGEDTO' | translate }} <b>{{invoice?.newValue}}</b>
                        </span>
                        <span
                            *ngIf="invoice.oldValue != null && invoice.oldValue.trim() != '' && invoice.newValue != null && invoice.newValue.trim() != ''">
                            {{ 'BILLINGMANAGEMENT.TERMSCHANGEDFROM' | translate }} <b>{{invoice?.oldValue}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{invoice?.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                        </span>
                        <span
                            *ngIf="(invoice.oldValue != null && invoice.oldValue.trim() != '') && (invoice.newValue == null || invoice.newValue.trim() == '')">
                            {{ 'BILLINGMANAGEMENT.TERMSREMOVED' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceNotes'">
                        <span *ngIf="invoice.oldValue == null || invoice.oldValue.trim() == ''">
                            {{ 'BILLINGMANAGEMENT.NOTESCHANGEDTO' | translate }} <b>{{invoice?.newValue}}</b>
                        </span>
                        <span
                            *ngIf="invoice.oldValue != null && invoice.oldValue.trim() != '' && invoice.newValue != null && invoice.newValue.trim() != ''">
                            {{ 'BILLINGMANAGEMENT.NOTESCHANGEDFROM' | translate }} <b>{{invoice?.oldValue}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{invoice?.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                        </span>
                        <span
                            *ngIf="(invoice.oldValue != null && invoice.oldValue.trim() != '') && (invoice.newValue == null || invoice.newValue.trim() == '')">
                            {{ 'BILLINGMANAGEMENT.NOTESREMOVED' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceDiscount'">
                        <span>
                            {{ 'BILLINGMANAGEMENT.DISCOUNTCHANGEDFROM' | translate }}
                            <b>{{convertValue(invoice?.oldValue)}}</b> {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }}
                            <b>{{convertValue(invoice?.newValue)}}</b> {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceTaskAdded'">
                        <span>
                            <b>{{invoice?.newValue}}</b> {{ 'BILLINGMANAGEMENT.TASKWASCREATED' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceTaskRemoved'">
                        <span>
                            <b>{{invoice?.newValue}}</b> {{ 'BILLINGMANAGEMENT.TASKREMOVED' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceTaskName'">
                        <span>
                            <b>{{invoice?.oldValue}}</b> {{ 'BILLINGMANAGEMENT.TASKCHANGEDTO' | translate }}
                            <b>{{invoice?.newValue}}</b>
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceTaskDescription'">
                        <span *ngIf="invoice.oldValue == null || invoice.oldValue.trim() == ''">
                            {{ 'BILLINGMANAGEMENT.DESCRIPTIONCHANGEDTO' | translate }} <b>{{invoice?.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.INTHETASK' | translate }} <b>{{invoice?.taskName}}
                                {{ 'BILLINGMANAGEMENT.SMALLTASK' | translate }}</b>
                        </span>
                        <span
                            *ngIf="invoice.oldValue != null && invoice.oldValue.trim() != '' && invoice.newValue != null && invoice.newValue.trim() != ''">
                            {{ 'BILLINGMANAGEMENT.DESCRIPTIONCHANGEDFROM' | translate }} <b>{{invoice?.oldValue}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{invoice?.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.INTHETASK' | translate }} <b>{{invoice?.taskName}}
                                {{ 'BILLINGMANAGEMENT.SMALLTASK' | translate }}</b>
                        </span>
                        <span
                            *ngIf="(invoice.oldValue != null && invoice.oldValue.trim() != '') && (invoice.newValue == null || invoice.newValue.trim() == '')">
                            {{ 'BILLINGMANAGEMENT.DESCRIPTIONREMOVED' | translate }}
                            {{ 'BILLINGMANAGEMENT.INTHETASK' | translate }} <b>{{invoice?.taskName}}
                                {{ 'BILLINGMANAGEMENT.SMALLTASKREMOVED' | translate }}</b>
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceTaskRate'">
                        <span>
                            {{ 'BILLINGMANAGEMENT.RATECHANGEDFROM' | translate }}
                            <b>{{convertValue(invoice?.oldValue) | number}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }}
                            <b>{{convertValue(invoice?.newValue) | number}}</b>
                            {{ 'BILLINGMANAGEMENT.INTHETASK' | translate }} <b>{{invoice?.taskName}}
                                {{ 'BILLINGMANAGEMENT.SMALLTASK' | translate }}</b>
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceTaskHours'">
                        <span>
                            {{ 'BILLINGMANAGEMENT.HOURSCHANGEDFROM' | translate }}
                            <b>{{convertValue(invoice?.oldValue) | number}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }}
                            <b>{{convertValue(invoice?.newValue) | number}}</b>
                            {{ 'BILLINGMANAGEMENT.INTHETASK' | translate }} <b>{{invoice?.taskName}}
                                {{ 'BILLINGMANAGEMENT.SMALLTASK' | translate }}</b>
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceItemAdded'">
                        <span>
                            <b>{{invoice?.newValue}}</b> {{ 'BILLINGMANAGEMENT.ITEMWASCREATED' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceItemRemoved'">
                        <span>
                            <b>{{invoice?.newValue}}</b> {{ 'BILLINGMANAGEMENT.ITEMREMOVED' | translate }}
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceItemName'">
                        <span>
                            <b>{{invoice?.oldValue}}</b> {{ 'BILLINGMANAGEMENT.ITEMCHANGEDTO' | translate }}
                            <b>{{invoice?.newValue}}</b>
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceItemDescription'">
                        <span *ngIf="invoice.oldValue == null || invoice.oldValue.trim() == ''">
                            {{ 'BILLINGMANAGEMENT.DESCRIPTIONCHANGEDTO' | translate }} <b>{{invoice?.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.INTHETASK' | translate }} <b>{{invoice?.itemName}}
                                {{ 'BILLINGMANAGEMENT.SMALLITEM' | translate }}</b>
                        </span>
                        <span
                            *ngIf="invoice.oldValue != null && invoice.oldValue.trim() != '' && invoice.newValue != null && invoice.newValue.trim() != ''">
                            {{ 'BILLINGMANAGEMENT.DESCRIPTIONCHANGEDFROM' | translate }} <b>{{invoice?.oldValue}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{invoice?.newValue}}</b>
                            {{ 'BILLINGMANAGEMENT.INTHETASK' | translate }} <b>{{invoice?.itemName}}
                                {{ 'BILLINGMANAGEMENT.SMALLITEM' | translate }}</b>
                        </span>
                        <span
                            *ngIf="(invoice.oldValue != null && invoice.oldValue.trim() != '') && (invoice.newValue == null || invoice.newValue.trim() == '')">
                            {{ 'BILLINGMANAGEMENT.DESCRIPTIONREMOVED' | translate }}
                            {{ 'BILLINGMANAGEMENT.INTHETASK' | translate }} <b>{{invoice?.itemName}}
                                {{ 'BILLINGMANAGEMENT.SMALLITEMREMOVED' | translate }}</b>
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceItemPrice'">
                        <span>
                            {{ 'BILLINGMANAGEMENT.PRICECHANGEDFROM' | translate }}
                            <b>{{convertValue(invoice?.oldValue) | number}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }}
                            <b>{{convertValue(invoice?.newValue) | number}}</b>
                            {{ 'BILLINGMANAGEMENT.INTHETASK' | translate }} <b>{{invoice?.itemName}}
                                {{ 'BILLINGMANAGEMENT.SMALLITEM' | translate }}</b>
                        </span>
                    </div>
                    <div class="mb-05" fxLayout="row" *ngIf="invoice.description == 'InvoiceItemQuantity'">
                        <span>
                            {{ 'BILLINGMANAGEMENT.QUANTITYCHANGEDFROM' | translate }}
                            <b>{{convertValue(invoice?.oldValue) | number}}</b>
                            {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }}
                            <b>{{convertValue(invoice?.newValue) | number}}</b>
                            {{ 'BILLINGMANAGEMENT.INTHETASK' | translate }}
                            <b>{{invoice?.itemName}} {{ 'BILLINGMANAGEMENT.SMALLITEM' | translate }}</b>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>