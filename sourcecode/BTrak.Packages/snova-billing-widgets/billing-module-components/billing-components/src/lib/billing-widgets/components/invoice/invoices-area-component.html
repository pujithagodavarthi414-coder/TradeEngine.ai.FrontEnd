<div *ngIf="( canAccess_feature_ViewInvoice)" fxLayout="column">
    <div fxFlex="40px" class="msg-class">
        <button mat-icon-button matTooltip="Message" class="mat-icon-button" [satPopoverAnchorFor]="openMessagePopover"
            #openMessagePopUp="satPopoverAnchor" (click)="openMessage(openMessagePopUp);clearForm()">
            <mat-icon>message</mat-icon>
        </button>
    </div>
    <mat-tab-group class="projectStatus-tabs project-tabs-container" [selectedIndex]="selectedTab"
        (selectedTabChange)="selectedMatTab($event)">
        <mat-tab label="invoices" *ngIf="(canAccess_feature_ViewInvoice)">
            <ng-template mat-tab-label>
                <span class="activity-material material-icons icon mat-color-accent mr-05"> request_quote</span>
                <span class="tracker-tab-icon mr-05">{{ 'APP.Invoices' | translate }}</span>

            </ng-template>
            <ng-template matTabContent>
                <div style="height: fit-content;">
                    <invoices></invoices>
                </div>
            </ng-template>
        </mat-tab>
        <mat-tab label="invoice-settings" *ngIf="canAccess_feature_ManageInvoiceSettings">
            <ng-template mat-tab-label>
                <span class="activity-material material-icons icon mat-color-accent mr-05">settings</span>
                <span class="tracker-tab-icon mr-05">{{ 'ADMIN.INVOICESETTINGS' | translate }}</span>

            </ng-template>
            <ng-template matTabContent>
                <div style="height: fit-content;">
                    <app-dynamic-widget-component [selectedWorkspaceId]="selectedWorkspaceIdForInvoiceSettings"
                        *ngIf="selectedWorkspaceIdForInvoiceSettings">
                    </app-dynamic-widget-component>
                </div>
            </ng-template>
        </mat-tab>
        <mat-tab label="advanced-invoices" *ngIf="canAccess_feature_ManageAdvancedInvoices">
            <ng-template mat-tab-label>
                <span class="activity-material material-icons icon mat-color-accent mr-05">settings</span>
                <span class="tracker-tab-icon mr-05">{{ 'ADMIN.ADVANCEDINVOICES' | translate }}</span>

            </ng-template>
            <ng-template matTabContent>
                <div style="height: fit-content;">
                    <app-dynamic-widget-component [selectedWorkspaceId]="selectedWorkspaceIdForAdvancedInvoiceSettings"
                        *ngIf="selectedWorkspaceIdForAdvancedInvoiceSettings">
                    </app-dynamic-widget-component>
                </div>
            </ng-template>
        </mat-tab>
    </mat-tab-group>
</div>
<app-common-message-box *ngIf="!(canAccess_feature_ViewInvoice)"
    textToDisplay="{{ 'DONTHAVEANYPERMISSIONS' | translate }}">
</app-common-message-box>
<sat-popover backdropClass="backdrop-color" #openMessagePopover [autoFocus]="false" hasBackdrop [restoreFocus]="false"
    [interactiveClose]="false" scrollStrategy="reposition" verticalAlign="below" horizontalAlign="start">
    <mat-card class="p-0">
        <mat-card-title class="text-center mat-bg-primary">
            <div class="card-title-text mb-1">Send Message</div>
        </mat-card-title>
        <mat-card-content>
            <form [formGroup]="messageForm" #formDirective="ngForm" novalidate
                (submit)="messageForm.valid">
                <div class="mobile-view-popover" id="style-1">
                    <mat-form-field class="full-width">
                        <input matInput formControlName="mobileNo" placeholder="Enter mobile number with country code"
                            required>
                        <mat-error
                            *ngIf="messageForm.get('mobileNo').hasError('required') && messageForm.get('mobileNo').touched">
                            Mobile number is required
                        </mat-error>
                    </mat-form-field>
                </div>
            </form>
            <div class="text-center">
                <button class="mr-1" mat-button mat-raised-button color="primary" (click)="sendMessage()"
                    [disabled]="isAnyOperationIsInprogress">
                    <mat-icon>send</mat-icon> Send
                </button>
                <button mat-button mat-raised-button (click)="closeMessagePopUp();">
                    <fa-icon class="mr-05" icon="times"></fa-icon> {{ 'CANCEL' | translate }}
                </button>
            </div>
        </mat-card-content>
    </mat-card>
</sat-popover>