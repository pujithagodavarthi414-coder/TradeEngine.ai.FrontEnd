<app-common-message-box *ngIf="!(canAccess_feature_EmployeeWorkingDays)"
  textToDisplay="{{'EMPLOYEEWORKINGDAYS.PERMISSION' | translate}}">
</app-common-message-box>
<div class="p-0 m-0 hr-dashboard full-height" *ngIf="(canAccess_feature_EmployeeWorkingDays)">
  <mat-card class="default" class="m-0 p-0">
    <mat-card-title class="full-width data-table-header drag-handler">
      <div fxLayout="row wrap" fxLayoutGap="0">
        <div fxFlex fxLayoutAlign="start center" class="card-title-text p-05 full-width">
          <span fxFlex="100" class="hide-content-overflow">
            {{'EMPLOYEEWORKINGDAYS.EMPLOYEEWORKINGDAYS' | translate | softLabelsPipe : softLabels | titlecase}}</span>
        </div>
        <div fxFlex.gt-xs="180px" fxFlex.xs="100px" class="search_goalinput" fxLayoutAlign="end center"
          fxLayoutAlign.xs="center center">
          <!-- <mat-form-field ngClass.xs="full-width">
            <input class="search_goal" matInput placeholder="{{'SEARCH' | translate}}" [(ngModel)]="searchText"
              (input)="searchRecords()">
          </mat-form-field>
          <span class="close_icon">
            <span *ngIf="!searchText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
            <mat-icon *ngIf="searchText" class="icon-button" aria-hidden="false" (click)="closeSearch()"
              style="cursor:pointer">
              close</mat-icon>
          </span> -->

          <mat-form-field class="custom-searchbar" ngClass.xs="full-width">
            <div class="m-0 p-0" fxLayout="row">
              <div fxFlex class="m-0 p-0">
                <input matInput [(ngModel)]="searchText" placeholder="{{'SEARCH' | translate}}" (input)="searchRecords()" />
                <span class="filters-close assets-list-search mr-05 mt-02">
                  <mat-icon *ngIf="searchText" class="icon-button" aria-hidden="false" (click)="closeSearch()"
                    style="cursor:pointer">close</mat-icon>
                </span>
              </div>
            </div>
          </mat-form-field>

        </div>
        <div fxFlex="40px" fxFlex.xs="40px" fxLayoutAlign="end center" class="ml-02">
          <button mat-icon-button (click)="resetAllFilters()">
            <fa-icon matTooltip="{{'RESET' | translate}}" class="filter mat-color-accent" icon="undo"></fa-icon>
          </button>
        </div>
        <div fxFlex="40px" fxFlex.xs="40px" fxLayoutAlign="end center" class="ml-02">
          <button type="submit" mat-icon-button class="pull-right" (click)="filterClick()"
            [matMenuTriggerFor]="filterMenu">
            <fa-icon icon="user-cog" matTooltip="{{'WIDGETS.CONFIGUREAPPSETTINGS' | translate}}"
              class="filter mat-color-accent">
            </fa-icon>
          </button>
        </div>
        <mat-menu #filterMenu="matMenu" xPosition="before" class="custom-matpanel">
          <mat-card class="filter-data" (click)="$event.stopPropagation()">
            <div fxLayoutAlign="center start">
              <fa-icon (click)="getPreviousSelectedDate()" style="cursor:pointer" icon="chevron-left"></fa-icon>
              <b>{{date | date: " MMM-yyyy "}}</b>
              <fa-icon (click)="getCurrentSelectedDate()" style="cursor:pointer" icon="chevron-right"></fa-icon>
            </div>
            <mat-form-field class="full-width">
              <mat-select placeholder="Select department" [(ngModel)]="departmentId"
                (selectionChange)="selectedDepartmentId($event.value)">
                <mat-option value="0">{{'TESTMANAGEMENT.SELECT' | translate}}</mat-option>
                <mat-option *ngFor="let department of selectDepartments" [value]="department.departmentId">
                  {{department.departmentName}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="full-width">
              <mat-select placeholder="Select designation" [(ngModel)]="designationId"
                (selectionChange)="selectedDesignationId($event.value)">
                <mat-option value="0">{{'TESTMANAGEMENT.SELECT' | translate}}</mat-option>
                <mat-option *ngFor="let designation of selectDesignations" [value]="designation.designationId">
                  {{designation.designationName}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="full-width" *ngIf="lineManager?.length > 0">
              <mat-select placeholder="{{'LOGTIMEREPORT.SELECTLINEMANAGER'|translate}}" [(ngModel)]="teamLeadId"
                (selectionChange)="selectedLineManagerId($event.value)">
                <mat-option value="0">{{'ADVANCEDSEARCH.ALL' | translate}}</mat-option>
                <mat-option [value]="person.userId" *ngFor="let person of lineManager">
                  <app-avatar class="employee_img" *ngIf="!person.profileImage"
                    [name]="person.userName | removeSpecialCharacters" [isRound]="true" size="30"></app-avatar>
                  <img class="employee_img" *ngIf="person.profileImage"
                    src="{{person.profileImage}}">{{person.userName}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="full-width" *ngIf="entities?.length > 1">
              <mat-select placeholder="{{ 'WIDGETS.SELECTBRANCH' | translate }}" [(ngModel)]="selectedEntity"
                (selectionChange)="entityValues($event.value)">
                <mat-option *ngFor="let entity of entities" [value]="entity.id">
                  {{entity.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </mat-card>
        </mat-menu>
      </div>
      <mat-divider></mat-divider>
    </mat-card-title>
  </mat-card>
  <div>
    <mat-card-content class="p-0 m-0">
      <div class="activity-data">
        <kendo-grid [data]="gridData" [scrollable]="true" [pageSize]="state.take" [skip]="state.skip"
          [sort]="state.sort" [filter]="state.filter" [sortable]="true" [pageable]="true"
          (dataStateChange)="dataStateChange($event)">
          <kendo-grid-column field="employeeId" width="150"
            title="{{'EMPLOYEEWORKINGDAYS.EMPLOYEEID' | translate | softLabelsPipe : softLabels}}"></kendo-grid-column>
          <kendo-grid-column field="fullName" width="150"
            title="{{'EMPLOYEEWORKINGDAYS.EMPLOYEENAME' | translate | softLabelsPipe : softLabels}}">
          </kendo-grid-column>
          <kendo-grid-column field="workedDays" width="150"
            title="{{'EMPLOYEEWORKINGDAYS.NOOFWORKEDDAYS' | translate | softLabelsPipe : softLabels}}">
          </kendo-grid-column>
          <kendo-grid-column field="absents" width="150" title="{{'EMPLOYEEWORKINGDAYS.ABSENTS' | translate}}"></kendo-grid-column>
          <kendo-grid-column field="lateDays" width="150" title="{{'EMPLOYEEWORKINGDAYS.LATEDAYS' | translate}}">
          </kendo-grid-column>
          <kendo-grid-column field="weekOffDays" width="150" title="{{'EMPLOYEEWORKINGDAYS.WEEKOFFDAYS' | translate}}">
          </kendo-grid-column>
          <kendo-grid-column field="holidays" width="150" title="{{'EMPLOYEEWORKINGDAYS.HOLIDAYS' | translate}}">
          </kendo-grid-column>
          <kendo-grid-column field="workingDays" width="150" title="{{'EMPLOYEEWORKINGDAYS.WORKINGDAYS' | translate}}">
          </kendo-grid-column>
        </kendo-grid>
        <div *ngIf="anyOperationInProgress" class="k-i-loading"></div>
      </div>
    </mat-card-content>
  </div>