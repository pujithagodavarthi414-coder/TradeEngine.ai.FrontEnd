<div fxLayout= "row-reverse">
<div class="custom-dialog">
    <div class="custom-close" mat-dialog-close [satPopoverAnchorFor]="closeVideoCallPopover" (click)="closeDialog()">
        <fa-icon icon="times" class="project-dialog"></fa-icon>
    </div>
</div>
<div fxFlex="row wrap" class="userStory-dialog">
    <div fxFlex>
        <div class="p-0">
            <h4 *ngIf="!isInprogress">{{ 'CRM.CANNOTCONNECT' | translate }} {{roomName}} , {{ 'CRM.COMPLETED' | translate }}</h4>
            <h4 *ngIf="!isRoomConnected && isInprogress">{{ 'CRM.CONNECTINGTO' | translate }} {{roomName}}...</h4>
            <div *ngIf="isRoomConnected && isInprogress">
                <div id="remote-media-div">

                </div>
                <!-- <div fxLayout="row"> -->
                    <div id="localmedia" fxFlex="100">
                    </div>
                    <div fxLayout="row" fxLayoutGap="10px" style="position: absolute; bottom: 60px; left: 192px;width: 65px;">
                        <div fxFlex="17px" class="ml-08" style="cursor: pointer;"
                            matTooltip="Disable microphone" *ngIf="isMicrophone" (click)="muteAudio()">
                            <fa-icon icon="microphone" class="mat-color-accent"></fa-icon> 
                        </div>
                        <div fxFlex="17px" class="ml-08" style="cursor: pointer;"
                            matTooltip="Enable microphone" *ngIf="!isMicrophone" (click)="unmuteAudio()">
                            <fa-icon icon="microphone-slash" class="mat-color-accent"></fa-icon>
                        </div>
                        <div fxFlex="20px" class="ml-05" style="cursor: pointer;"
                            matTooltip="Disable video" *ngIf="isVideo" (click)="muteVideo()">
                            <fa-icon icon="video" class="mat-color-accent"></fa-icon> 
                        </div>
                        <div fxFlex="20px" class="ml-05" style="cursor: pointer;"
                            matTooltip="Enable video" *ngIf="!isVideo" (click)="unmuteVideo()">
                            <fa-icon icon="video-slash" class="mat-color-accent"></fa-icon>
                        </div>
                    </div>
                <!-- </div> -->
                <div style="position: absolute; bottom: 60px; right: 192px;">
                    <button mat-raised-button color="warn" class="mr-1" *ngIf="!isHost" (click)="confirmClose()">
                        <fa-icon class="mr-05" icon="user-times"></fa-icon> {{ 'CRM.LEAVEROOM' | translate }}
                    </button>
                    <button mat-raised-button color="warn" class="mr-1" *ngIf="isHost" (click)="endRoomAndDisconnect()"
                        [disabled]="savingInProgress">
                        <fa-icon class="mr-05" icon="user-times"></fa-icon> {{ 'CRM.ENDROOM' | translate }}
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<sat-popover backdropClass="backdrop-color" #closeVideoCallPopover verticalAlign="center" hasBackdrop
    horizontalAlign="center" [interactiveClose]="false">
    <mat-card class="filter-data p-0">
        <mat-card-title>
          <div class="card-title-text mat-bg-primary p-05 mb-1">
            <fa-icon class="mr-05" icon="user-times"></fa-icon> <b> {{ 'CRM.DISCONNECT' | translate }}</b>
          </div>
        </mat-card-title>
        <a class="detail_close mt-02" color="warn" (click)="cancelClose()">
          <fa-icon icon="times"></fa-icon>
        </a>
        <mat-card-content class="p-05">
            <div class="card-content mobile-view-popover" style="margin-right: -7px !important;" id="style-1">
                <div class="ml-05 mr-05" fxLayout="row" fxLayout.xs="column" fxLayoutGap="10px" fxLayoutGap.xs="0px">
                    <div fxFlex="100">
                        {{ 'CRM.DISCONNECTSTMT' | translate }}
                        <!-- Closing this will disconnect you from the video call. Are you sure do you want to disconnect? -->
                    </div>
                </div>
            </div>
            <div class="text-center mt-05" style="padding-left: 11px; padding-right: 11px; padding-bottom: 13px;">
                <button mat-raised-button color="warn" class="mr-1" (click)="confirmClose()">
                    <fa-icon class="mr-05" icon="user-times"></fa-icon> {{ 'CRM.DISCONNECT' | translate }}
                </button>
                <button mat-raised-button (click)="cancelClose()">
                    <fa-icon icon="times" class="mr-05"></fa-icon>{{ 'CANCEL' | translate }}
                </button>
            </div>
        </mat-card-content>
    </mat-card>
  </sat-popover>

