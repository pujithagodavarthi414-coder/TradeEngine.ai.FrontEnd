<div class="roster-edit-form">
  <form novalidate [formGroup]="editForm" class="k-form-inline" id="eventForm">
    <div class="k-form-field">
      <span class="text-left">{{'ROSTER.DEPARTMENTNAME' | translate}}</span>
      <kendo-dropdownlist #department [valuePrimitive]="true" [defaultItem]="defaultDepartmentItem" formControlName="departmentId"
        [data]="filteredDepartmentList" [filterable]="true" (filterChange)="handleDepartmentFilter($event)"
        textField="departmentName" (selectionChange)="departmentChange($event, editForm)" valueField="departmentId">
      </kendo-dropdownlist>
    </div>
    <div class="k-form-field">
      <span class="text-left">{{'ROSTER.SHIFTNAME' | translate}}</span>
      <kendo-dropdownlist #shift [valuePrimitive]="true" [defaultItem]="defaultShiftItem" formControlName="shiftId"
        [data]="filteredShiftTimeList" [filterable]="true" (filterChange)="handleShiftFilter($event)"
        (selectionChange)="shiftChange($event, editForm)" textField="shift" valueField="shiftTimingId">
      </kendo-dropdownlist>
    </div>
    <div class="k-form-field">
      <span class="text-left">{{'ROSTER.EMPLOYEE' | translate}}</span>
      <kendo-multiselect #employeeList width="200" [valuePrimitive]="true" formControlName="employeeId"
        [data]="filteredEmployeeList" [filterable]="true" (open)="onOpen($event)" textField="fullName"
        valueField="employeeId">
      </kendo-multiselect>
    </div>
    <div class="k-form-field k-datetime-picker-wrapper">
      <!-- <div fxLayout="row wrap" class="mt-05" fxLayoutGap.lt-md="3px" fxLayoutGap.md="8px" fxLayoutGap.gt-md="15px">
        <span class="mt-1">Start</span>

        <div fxFlex fxFlex.gt-sm="40" fxFlex.xs="49">
          <mat-form-field class="full-width">
            <input matInput formControlName="start" [matDatepicker]="picker2" (click)="picker2.open()"
              autocomplete="off" readonly>
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
          </mat-form-field>
        </div>
        <div fxFlex fxFlex.gt-sm="40" fxFlex.xs="49">
          <mat-form-field class="master-timepicker">
            <input matInput formControlName="start" aria-label="24hr format" [ngxTimepicker]="fromTime" [format]="24"
              readonly />
            <ngx-material-timepicker #fromTime [cancelBtnTmpl]="cancelBtn" [confirmBtnTmpl]="confirmBtn">
            </ngx-material-timepicker>
          </mat-form-field>
        </div>

      </div> -->
      <span>Start</span>
      <kendo-datepicker formControlName="start" (valueChange)="onChangeFrom($event)" [format]="dateFormat.pattern"
        [formatPlaceholder]="formatPlaceholder">
      </kendo-datepicker>
      <kendo-timepicker formControlName="start">
      </kendo-timepicker>
    </div>
    <div class="k-form-field k-datetime-picker-wrapper">
      <!-- <div fxLayout="row wrap" class="mt-05" fxLayoutGap.lt-md="3px" fxLayoutGap.md="8px" fxLayoutGap.gt-md="15px">
        <span class="mt-1">End</span>
        <div fxFlex fxFlex.gt-sm="40" fxFlex.xs="49">
          <mat-form-field class="full-width">
            <input matInput formControlName="end" [matDatepicker]="picker1" (click)="picker1.open()" autocomplete="off"
              readonly>
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
          </mat-form-field>
        </div>
        <div fxFlex fxFlex.gt-sm="40" fxFlex.xs="49">
          <mat-form-field class="master-timepicker">
            <input matInput formControlName="end" aria-label="24hr format" [ngxTimepicker]="toTime" [format]="24"
              readonly />
            <ngx-material-timepicker #toTime [cancelBtnTmpl]="cancelBtn" [confirmBtnTmpl]="confirmBtn">
            </ngx-material-timepicker>
          </mat-form-field>
        </div>
      </div>
      <ng-template #cancelBtn>
        <p class="feedtimesheet-datepicker-button" style="margin-right: 10px;">
          {{'ROSTER.CANCEL' | translate}}</p>
      </ng-template>
      <ng-template #confirmBtn>
        <p class="feedtimesheet-datepicker-button">{{'ROSTER.OK' | translate}}</p>
      </ng-template> -->
      <span>End</span>
      <kendo-datepicker formControlName="end" (valueChange)="onChangeTo($event)" [format]="dateFormat.pattern"
        [formatPlaceholder]="formatPlaceholder">
      </kendo-datepicker>
      <kendo-timepicker formControlName="end">
      </kendo-timepicker>
    </div>

    <!-- <div>
      <kendo-recurrence-editor *ngIf="isEditingSeries" formControlName='RecurrenceRule'>
      </kendo-recurrence-editor>
    </div> -->
    <div class="text-right mb-5">
      <button type="button" mat-button mat-raised-button class="mr-1 pull-right" (click)="onCancel($event)">
        <fa-icon class="mr-05" icon="times"></fa-icon>
        {{'ROSTER.CANCEL' | translate}}
      </button>
      <button type="button" mat-button mat-raised-button class="mr-1 pull-right" (click)="onSave($event)"
        [disabled]="!(editForm.controls.employeeId && editForm.controls.employeeId.value) || (isSubmit | async)" color="accent">
        <fa-icon icon="save" class="mr-05"></fa-icon>{{'ROSTER.SAVE' | translate}}
      </button>
    </div>
  </form>
</div>
