<div id="ov-1">
<mat-progress-bar color="primary" mode="indeterminate" *ngIf="!employeeDetails"> </mat-progress-bar>
<mat-card class="custom-box p-0" *ngIf="employeeDetails">
  <div class="">
    <mat-card-title class="data-table-header overview-header p-05" fxLayout="row wrap">
      <h5 class="m-0 p-03" fxFlex>{{'HRMANAGAMENT.EMPLOYEEDETAILS' | translate | softLabelsPipe : softLabels | titlecase}}</h5>
      <div fxLayoutAlign="end center" fxFlex="50" *ngIf="isPermission && canAccess_feature_ResetPassword">
        <button mat-icon-button matTooltip="{{'HRMANAGAMENT.CHANGEPASSWORD' | translate}}"
          #updatePasswordPopover="satPopoverAnchor" [satPopoverAnchorFor]="updatePasswordPopup"
          (click)="updatePassword(updatePasswordPopover)"
          [disabled]="(loading || (changePasswordOperationInProgress$ | async))">
          <mat-progress-bar color="primary" mode="indeterminate"
            *ngIf="(loading || (changePasswordOperationInProgress$ | async))">
          </mat-progress-bar>
          <fa-icon icon="key" class="mat-color-accent" id="ov-2">
          </fa-icon>
        </button>
      </div>
    </mat-card-title>
  </div>
  <mat-card-content class="p-03">
    <div class="p-05" fxLayout="row wrap" fxLayout.xs="column" fxLayout.md="column" fxLayoutGap.xs="0px">
      <div fxFlex="32" fxFlex.lt-md="100">
        <div fxLayout="row wrap">
          <div fxFlex="38" fxLayout="row">
            <div fxFlex>
              <label><b>{{'HRMANAGAMENT.FULLNAME' | translate}}</b></label>
            </div>
            <div fxFlex="10px" fxLayoutAlign="center start">- </div>
          </div>
          <div fxFlex="54" class="hide-content-overflow ml-1">
            <label matTooltip="{{employeeDetails.firstName}} {{employeeDetails.surName}}"
              *ngIf="employeeDetails.firstName">{{employeeDetails.firstName}} {{employeeDetails.surName}}</label>
          </div>
        </div>
      </div>
      <div fxFlex="48" fxFlex.lt-md="100">
        <div fxLayout="row wrap">
          <div fxFlex="25" fxFlex.lt-lg="38" fxLayout="row">
            <div fxFlex>
              <label><b>{{'HRMANAGAMENT.EMAIL' | translate}}</b></label>
            </div>
            <div fxFlex="10px" fxLayoutAlign="center start">- </div>
          </div>
          <div fxFlex="54" class="ml-1">
            <label *ngIf="employeeDetails.email">{{employeeDetails.email}}</label>
          </div>
        </div>
      </div>
    </div>
    <mat-divider></mat-divider>
    <div class="full-width p-05" fxLayout="row wrap">
      <div fxFlex="32" fxFlex.lt-lg="100">
        <div fxLayout="row wrap">
          <div fxFlex="38" fxLayout="row">
            <div fxFlex>
              <label><b>{{'HRMANAGAMENT.DESIGNATION' | translate}}</b></label>
            </div>
            <div fxFlex="10px" fxLayoutAlign="center start">- </div>
          </div>
          <div fxFlex="54" class="ml-1">
            <label *ngIf="employeeDetails.designationName">{{employeeDetails.designationName}}</label>
          </div>
        </div>
      </div>
      <div fxFlex="32" fxFlex.lt-lg="100">
        <div fxLayout="row wrap">
          <div fxFlex="38" fxLayout="row">
            <div fxFlex>
              <label><b>{{'HRMANAGAMENT.BRANCH' | translate}}</b></label>
            </div>
            <div fxFlex="10px" fxLayoutAlign="center start">- </div>
          </div>
          <div fxFlex="54" class="ml-1">
            <label *ngIf="employeeDetails.branchName">{{employeeDetails.branchName}}</label>
          </div>
        </div>
      </div>
      <div fxFlex="32" fxFlex.lt-lg="100">
        <div fxLayout="row wrap">
          <div fxFlex="38" fxLayout="row">
            <div fxFlex>
              <label><b>{{'HRMANAGAMENT.EMPLOYEEMOBILENUMBER' | translate | softLabelsPipe : softLabels}}</b></label>
            </div>
            <div fxFlex="10px" fxLayoutAlign="center start">- </div>
          </div>
          <div fxFlex="54" class="ml-1">
            <label *ngIf="employeeDetails.mobileNo">{{employeeDetails.mobileNo}}</label>
          </div>
        </div>
      </div>
    </div>
    <mat-divider fxLayoutAlign="space-around"></mat-divider>
    <div class="p-05">
      <label class="m-0"><b>{{'HRMANAGAMENT.EDUCATIONDETAILS' | translate}}</b></label>
      <mat-list class="compact-list p-0">
        <div fxLayout="column" fxLayoutGap="5px" fxLayoutAlign="space-around" class="p-0 ">
          <span *ngIf="!educationDetailsList">{{'HRMANAGAMENT.NOEDCUCATIONDATATODISPLAY' | translate}}</span>
          <ng-container *ngIf="educationDetailsList">
            <div fxLayout="row" *ngFor="let educationDetails of educationDetailsList">
              <div fxFlex="30px" class="mt-05">
                <span><i class="fa fa-graduation-cap custom-icon-size" aria-hidden="true"></i></span>
              </div>
              <div fxFlex="calc(100% - 50px)" class="asset-content-hide">
                <label class="mt-05">
                  {{educationDetails.Institute}},
                  &nbsp;{{educationDetails.EducationLevel}},&nbsp;{{educationDetails.MajorSpecialization}},&nbsp;{{'HRMANAGAMENT.FROM' | translate}}-{{educationDetails.StartDate |date:'dd-MMM-yyyy'}}&nbsp;&nbsp;{{'HRMANAGAMENT.TO' | translate}}-{{educationDetails.EndDate |date:'dd-MMM-yyyy'}}
                </label>
              </div>
            </div>
          </ng-container>
        </div>
        <mat-divider fxLayoutAlign="space-around"></mat-divider>
      </mat-list>
    </div>
    <div class="p-05">
      <label class="m-0"><b>{{'HRMANAGAMENT.EXPERIENCE' | translate}}</b></label>
      <mat-list class="compact-list p-0">
        <div fxLayout="column" fxLayoutGap="5px" fxLayoutAlign="space-around" class="p-0 ">
          <span *ngIf="!workExperienceDetailsList">{{'HRMANAGAMENT.NOEXPERIENCEDATATODISPLAY' | translate}}</span>
          <ng-container *ngIf="workExperienceDetailsList">
            <div fxLayout="row" *ngFor="let workExperienceDetails of workExperienceDetailsList">
              <div fxFlex="30px" class="mt-05">
                <span><i class="fa fa-briefcase custom-icon-size" aria-hidden="true"></i></span>
              </div>
              <div fxFlex="calc(100% - 50px)" fxLayout="column">
                <label class="m-0">
                  <b>{{workExperienceDetails.Company}}</b>
                </label>
                <label>
                  {{workExperienceDetails.DesignationName}},&nbsp;{{'HRMANAGAMENT.FROM' | translate}}:{{workExperienceDetails.FromDate | date:'dd-MMM-yyyy'}}&nbsp;&nbsp;{{'HRMANAGAMENT.TO' | translate}}:
                  {{workExperienceDetails.ToDate | date:'dd-MMM-yyyy'}}
                </label>
              </div>
            </div>
          </ng-container>
        </div>
      </mat-list>
    </div>
    <mat-divider fxLayoutAlign="space-around"></mat-divider>
    <div class="p-05">
      <label class="m-0"><b>{{'HRMANAGAMENT.REPORTING' | translate}}</b></label>
      <mat-list class="compact-list p-0">
        <div fxLayout="column" fxLayoutGap="5px" fxLayoutAlign="space-around" class="p-0 ">
          <span *ngIf="!reportToEmployeeName">{{'HRMANAGAMENT.NOREPORTINGDATATODISPLAY' | translate}}</span>
          <ng-container *ngIf="reportToEmployeeName">
            <div fxLayout="row" class="mt-05" *ngFor="let reportToEmployeeName of reportToEmployeeName">
              <div fxFlex="30px">
                <span><i class="fa fa-users custom-icon-size" aria-hidden="true"></i></span>
              </div>
              <div fxFlex="calc(100% - 50px)" fxLayout="column">
                <label class="mat-small m-0">
                  <b>{{reportToEmployeeName.ReportingEmployeeFullName}}</b>
                </label>
              </div>
            </div>
          </ng-container>
        </div>
      </mat-list>
    </div>
    <mat-divider fxLayoutAlign="space-around"></mat-divider>
    <div class="p-05">
      <label class="m-0"><b>{{'HRMANAGAMENT.SKILLS' | translate}}</b></label>
      <mat-chip-list aria-label="Fish selection" class="p-0">
        <span *ngIf="!skills" class="ml-02">{{'HRMANAGAMENT.NOSKILLSTODISPLAY' | translate}}</span>
        <mat-chip color="primary" selected class="mt-05 md-05" *ngFor="let skill of skills">{{skill.SkillName}}
        </mat-chip>
      </mat-chip-list>
    </div>
    <mat-divider class="mt-05 mb-05"></mat-divider>
    <div class="p-05">
      <label class="m-0 mt-02"><b>{{'HRMANAGAMENT.LANGUAGES' | translate}}</b></label>
      <mat-chip-list aria-label="Fish selection" class="p-0">
        <span *ngIf="!languages" class="ml-02 mt-02">{{'HRMANAGAMENT.NOLANGUAGESTODISPLAY' | translate}}</span>
        <mat-chip color="primary" selected class="mt-05 md-05" *ngFor="let language of languages">
          {{language.LanguageName}}</mat-chip>
      </mat-chip-list>
    </div>
    <div class="p-05">
      <label class="m-0 mt-02"><b>{{'BADGE.BADGETITLE' | translate}}</b></label>
      <mat-chip-list aria-label="Fish selection" class="p-0">
        <span *ngIf="badges.length == 0" class="ml-02 mt-02">{{'BADGE.NOBADGESTODISPLAY' | translate}}</span>
        <div class="m-1" fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start center" *ngIf="badges.length > 0">
          <div fxFlex="70px" matToolTip="badge.badgeName" class="mr-0" *ngFor="let badge of (badges)">
            <div style="margin: 0px 0px 10px 40px;" *ngIf="badge.badgeCount > 1"><span
                class="badge-number mat-bg-warn">{{badge.badgeCount}}</span></div>
            <app-avatar [name]="badge.badgeName | removeSpecialCharacters"
              [src]="badge.imageUrl | fetchSizedAndCachedImage: '50':''" [isRound]="true" size="50">
            </app-avatar>
          </div>
        </div>
      </mat-chip-list>
    </div>
  </mat-card-content>
</mat-card>
</div>

<sat-popover #updatePasswordPopup [autoFocus]="false" hasBackdrop backdropClass="backdrop-color" [restoreFocus]="false"
  [interactiveClose]="false" scrollStrategy="reposition" verticalAlign="below" horizontalAlign="end">
  <mat-card class="filter-data p-0">
    <mat-card-title class="text-center">
      <div class="card-title-text mat-bg-primary p-05">{{'USERMANAGEMENT.CHANGEPASSWORD' | translate}}
      </div>
    </mat-card-title>
    <form [formGroup]="changePasswordForm" novalidate #passwordFormDirective="ngForm"
      (submit)="changePasswordForm.valid && changePassword()">
      <div class="card-content p-05 mt-05">
        <mat-form-field class="full-width" (click)="$event.stopPropagation();">
          <input matInput formControlName="newPassword" type="password"
            placeholder="{{'USERMANAGEMENT.NEWPASSWORD' | translate}}" required>
          <mat-error>
            <span
              *ngIf="changePasswordForm.get('newPassword').hasError('required') && changePasswordForm.get('newPassword').touched">
              {{'USERMANAGEMENT.PLEASEENTERNEWPASSWORD' | translate}}</span>
            <span
              *ngIf="changePasswordForm.get('newPassword').hasError('pattern') && !(changePasswordForm.get('newPassword').hasError('maxlength'))">
              {{'USERMANAGEMENT.PLEASEENTERVALIDPASSWORD' | translate}}</span>
            <span *ngIf="changePasswordForm.get('newPassword').hasError('maxlength')">
              {{'USERMANAGEMENT.NEWPASSWORDSHOULDNOTEXCEED250CHARACTERS' | translate}}</span>
          </mat-error>
        </mat-form-field>
        <mat-form-field class="full-width mt-1" (click)="$event.stopPropagation();">
          <input matInput formControlName="confirmPassword" type="password" (blur)="passwordConfirmation()"
            placeholder="{{'USERMANAGEMENT.CONFIRMPASSWORD' | translate}}" required>
          <mat-error>
            <span
              *ngIf="changePasswordForm.get('confirmPassword').hasError('required') && changePasswordForm.get('confirmPassword').touched">
              {{'USERMANAGEMENT.PLEASEENTERCONFIRMPASSWORD' | translate}}</span>
            <span *ngIf="changePasswordForm.get('confirmPassword').hasError('maxlength')">
              {{'USERMANAGEMENT.CONFIRMPASSWORDCANNOTEXCEED250CHARACTERS' | translate}}</span>
          </mat-error>
        </mat-form-field>
        <mat-error>
          <span *ngIf="isPassword">{{'USERMANAGEMENT.PASSWORDSSHOULDMATCH' | translate}}</span>
        </mat-error>
      </div>
      <div class="text-center mb-1 mt-05">
        <button type="submit" mat-button mat-raised-button class="mr-05" color="primary"
          [disabled]="(changePasswordOperationInProgress$ | async) || !changePasswordForm.valid || isPassword">
          <mat-progress-bar color="primary" mode="indeterminate" *ngIf="(changePasswordOperationInProgress$ | async)">
          </mat-progress-bar>
          <fa-icon class="mr-05" icon="edit"></fa-icon> {{'USERMANAGEMENT.CHANGE' | translate}}
        </button>
        <button mat-button mat-raised-button (click)="closePopup();false">
          <fa-icon class="mr-05" icon="times"></fa-icon> {{'CANCEL' | translate}}
        </button>
      </div>
    </form>
  </mat-card>
</sat-popover>