<div class="custom-dialog">
    <div class="custom-close" mat-dialog-close (click)="onNoClick()">
        <fa-icon icon="times" class="project-dialog"></fa-icon>
    </div>
</div>

<div class="full-height">
    <mat-card class="p-0 canteen-manage m-0">
        <mat-card-title class="full-width data-table-header drag-handler">
            <div fxLayout="row wrap" fxLayout.xs="column">
                <div class="card-title-text p-05 ml-05" fxFlex="30" fxLayoutAlign="start center">
                    <span fxFlex="100" class="hide-content-overflow" matTooltip="SCO Geneartions">SCO Geneartions</span>
                </div>
                <div fxFlex fxLayout="row" fxLayout.xs="column">
                    <div fxFlex="calc(100% - 220px)" fxLayoutAlign="end center" fxLayoutAlign.xs="start center">
                        <!-- <mat-slide-toggle
                            [matTooltip]="(isArchived == true) ? ('SWITCHTOUNARCHIVE' | translate) : ('SWITCHTOARCHIVE' | translate)"
                            class="mr-1 archive-switch" [(ngModel)]="isArchived" [checked]="isArchived"
                            (change)="getAllGrades()">
                        </mat-slide-toggle> -->
                    </div>
                    <div fxFlex="210px" fxFlex.xs="60px" class="search_goalinput ml-1" fxLayoutAlign="end center"
                        fxLayoutAlign.xs="start center">
                        <div fxLayoutAlign="end center" fxLayoutAlign.xs="start center">
                            <mat-form-field class="full-width">
                                <input class="search_goal" matInput placeholder="{{'HRMANAGAMENT.SEARCH' | translate}}"
                                    [(ngModel)]="searchText" (input)="filterByName($event)">
                            </mat-form-field>
                        </div>
                        <span class="close_icon masterdata-search-close" fxLayoutAlign="end center"
                            fxLayoutAlign.xs="start center">
                            <span *ngIf="!searchText"></span>
                            <mat-icon *ngIf="searchText" class="icon-button mr-05" aria-hidden="false"
                                (click)="closeSearch()" style="cursor:pointer">
                                close</mat-icon>
                        </span>
                        <!-- <button mat-icon-button matTooltip="{{ 'EMPLOYEEGRADE.CREATEEMPLOYEEGRADE' | translate  | softLabelsPipe : softLabels }}"
                            [satPopoverAnchorFor]="upsertGradePopover" #upsertGradePopUp="satPopoverAnchor"
                            (click)="creatGradePopupOpen(upsertGradePopUp);clearForm()" *ngIf="!isArchived">
                            <fa-icon icon="plus" class="filter mat-color-accent">
                            </fa-icon>
                        </button> -->
                        <div fxFlex="36px" *ngIf="isArchived"></div>
                    </div>
                </div>
            </div>
            <mat-divider></mat-divider>
        </mat-card-title>
    </mat-card>
    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isAnyOperationIsInprogress">
    </mat-progress-bar>
    <div class="activity-data no-drag projects-list-grid">
        <kendo-grid [kendoGridBinding]="scoList" [filterable]="false" [pageSize]="state.take" [skip]="state.skip"
            [sort]="state.sort" [sortable]="true" [pageable]="true">
            <kendo-grid-column field="creditsAllocated" title="Credits used">
            </kendo-grid-column>
            <kendo-grid-column field="createdDateTime" title="Created date">
            </kendo-grid-column>
            <kendo-grid-column field="isScoAccepted" title="Satus">
            </kendo-grid-column>
            <kendo-grid-command-column field="action" title="{{'ACTIONS' | translate}}">
                <ng-template kendoGridCellTemplate let-dataItem>
                    <!-- <button class="text-center"
                        title="{{ 'EMPLOYEEGRADE.EDITEMPLOYEEGRADE' | translate | softLabelsPipe : softLabels  }}"
                        mat-icon-button (click)="editGradePopupOpen(dataItem,upsertGradePopUp)">
                        <fa-icon icon="edit" style="cursor: pointer;" class="mat-color-accent"></fa-icon>
                    </button> -->
                    <button class="text-center mr-05" title="Share SCO acceptance email"
                            [satPopoverAnchorFor]="mailSCO" #mailSCOPopover="satPopoverAnchor"
                            (click)="$event.stopPropagation();opemMailPopup(dataItem,mailSCOPopover,rowIndex)"
                            mat-icon-button>
                            <fa-icon icon="share-square" style="cursor: pointer;" class="mat-color-accent"></fa-icon>
                        </button>
                </ng-template>
            </kendo-grid-command-column>
        </kendo-grid>
    </div>
</div>

<sat-popover #mailSCO hasBackdrop backdropClass="backdrop-color" [restoreFocus]="false" verticalAlign="below"
    horizontalAlign="end" [interactiveClose]="false">
    <form [formGroup]="emailForm" novalidate #formDirective="ngForm">
    <mat-card class="p-0">
        <mat-card-title class="text-center mat-bg-primary">
            <div class="card-title-text p-05">Mail SCO Acceptance
            </div>
        </mat-card-title>
        <mat-card-content class="p-05" style="width: 300px;">
            <div fxLayout="row wrap">
                <mat-form-field class="full-width">
                    <mat-select formControlName="to" [compareWith]="compareSelectedToFn"
                        placeholder="{{'BILLINGMANAGEMENT.TO' | translate}}" required multiple
                        (selectionChange)="getSelectedTos()">
                        <mat-select-trigger>
                            {{selectedTos}}
                        </mat-select-trigger>
                        <mat-option [value]="0" #allSelected (click)="toggleAllTosSelected()">
                            Select all
                        </mat-option>
                        <mat-option *ngFor="let user of users" [value]="user.id"
                            (click)="toggleToPerOne($event)">
                            {{user.fullName}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div fxLayout="row wrap" *ngIf="selectedToMobile">
                <b>Mobile numbers:</b> {{selectedToMobile}}
            </div>
            <div class="text-center">
                <button class="mr-1" mat-button mat-raised-button color="primary" (click)="shareEmail()">
                    <fa-icon class="mr-05" icon="check"></fa-icon> {{'BILLINGMANAGEMENT.SEND' | translate}}
                </button>
                <button mat-button mat-raised-button (click)="closeSendEmailPopover()">
                    <fa-icon class="mr-05" icon="times"></fa-icon> {{'TESTMANAGEMENT.CANCEL' | translate}}
                </button>
            </div>
        </mat-card-content>
    </mat-card>
    </form>
</sat-popover>
<!-- Mail dialog -->