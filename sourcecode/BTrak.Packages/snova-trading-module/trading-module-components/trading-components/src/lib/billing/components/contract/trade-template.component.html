<div class="m-1">
    <mat-card-title class="text-center mat-bg-primary">
        <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isClientLoadingInProgress">
        </mat-progress-bar>
        <div class="card-title-text p-05">{{templateName}}
        </div>
    </mat-card-title>
    <mat-card-content class="p-05">
        <form [formGroup]="contractTemplatesForm" #formDirective="ngForm" novalidate>
            <div>
                <mat-form-field class="full-width">
                    <mat-select formControlName="tradeTemplateId" placeholder="Select {{templateName}}" multiple
                        required [compareWith]="compareSelectedContractTemplatesFn">
                        <mat-select-trigger>
                            {{selectedContractTemplateNames}}
                        </mat-select-trigger>
                        <mat-option [value]="0" #templateAllSelected (click)="toggleAllTemplatesSelected()">
                            {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                        </mat-option>
                        <mat-option [value]="contractTemplate.tradeTemplateId"
                            (click)="toggleTemplatePerOne(templateAllSelected.value)"
                            *ngFor="let contractTemplate of contractTemplatesList | tradeTemplateTypeFilterPipe : selectedTemplateTypeIds">
                            {{ contractTemplate.tradeTemplateName }}
                        </mat-option>
                    </mat-select>
                    <mat-error
                        *ngIf="contractTemplatesForm.get('tradeTemplateId').hasError('required') && contractTemplatesForm.get('tradeTemplateId').touched">
                         Please select atleast one template
                    </mat-error>
                </mat-form-field>
                <mat-form-field class="full-width">
                    <input matInput placeholder="{{ 'COMPANYSETTINGS.DESCRIPTION' | translate }}"
                        formControlName="description">
                </mat-form-field>
            </div>
            <div class="mt-1 text-center">
                <button mat-button mat-raised-button type="submit" color="primary" class="mr-1 glossy-button-button"
                    (click)="saveContractTemplates()"
                    [disabled]="!contractTemplatesForm.valid || anyOperationInProgress">
                    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="anyOperationInProgress">
                    </mat-progress-bar>
                    <fa-icon class="mr-05" icon="check"></fa-icon>{{'CANTEEN.SAVE' | translate}}
                </button>
                <button mat-raised-button type="reset" (click)="reset()">
                    <fa-icon icon="times" class="mr-05"></fa-icon>{{'HRMANAGAMENT.CANCEL' | translate}}
                </button>
            </div>
        </form>

    </mat-card-content>
</div>