<mat-tab-group>
  <mat-tab label="supplier" *ngIf="canAccess_feature_AddOrUpdateClient">
    <ng-template mat-tab-label>
      <span *ngIf="formtype == 'addclient'">
        Add New Stakeholder</span>
      <span *ngIf="formtype == 'editclient'">
        Edit Stakeholder</span>
      <span *ngIf="formtype == 'addsecondary'"> {{'CLIENTS.ADDSECONDARYCONTACT' |
        translate}}</span>
      <span *ngIf="formtype == 'updatesecondary'">
        {{'CLIENTS.UPDATESECONDARYCONTACTDETAILS' | translate}}</span>
    </ng-template>
    <ng-template matTabContent>
      <mat-card *ngIf="(canAccess_feature_AddOrUpdateClient)" class="no-flex-dpl mat-card-fx-col"
        style="display: contents !important;">
        <div fxFlex="100">
        </div>
        <button mat-button mat-raised-button (click)="goToClients()" color="primary"
          class="mt-05 ml-05 light-purple-button">
          <fa-icon class="mr-05" icon="arrow-left"></fa-icon>Back
        </button>
        <div fxLayout="row wrap" fxLayout.lt-md="column" class="mt-02 ml-02" style="height: calc(100vh - 149px);"
          id="style-1">
          <div fxFlex="40" fxFlex.md="40" fxFlex.lt-md="100">
            <mat-card class="p-0  mat-card lives-form">
              <form [formGroup]="clientForm" #formDirective="ngForm" novalidate *ngIf="isclientform" fxFlex="100"
                class="mt-1 mr-05 ml-05">
                <div fxLayout="row wrap">
                  <h6 class="mt-05" fxFlex="calc(100% - 220px)">
                    <b><span *ngIf="formtype == 'addclient'">
                        Add New Stakeholder</span></b>
                    <b><span *ngIf="formtype == 'editclient'">
                        Edit Stakeholder</span></b>
                    <b><span *ngIf="formtype == 'addsecondary'"> {{'CLIENTS.ADDSECONDARYCONTACT' |
                        translate}}</span></b>
                    <b><span *ngIf="formtype == 'updatesecondary'">
                        {{'CLIENTS.UPDATESECONDARYCONTACTDETAILS' | translate}}</span></b>
                  </h6>
                  <!-- <button mat-button mat-raised-button (click)="addSecondaryscontact()"
                    color="primary" class="mb-05 glossy-button-button" *ngIf="formtype != 'addsecondary'">
                    <fa-icon class="mr-05" icon="plus"></fa-icon>Add Secondary Contact
                  </button> -->
                </div>

                <mat-divider></mat-divider>
                <fieldset disable="disable" class="mat-card-fx-col">
                  <div class="group-gap mb-lg-auto">
                    <!-- Upload image -->
                    <div>
                      <p class="mt-02" style="text-align: center;">Register User</p>
                    </div>
                    <div class="avatar-upload cursor" (click)="fileInput.click()" style="margin:0 auto;">
                      <div class="avatar-edit" style="margin:0 auto;">
                        <input type='file' id="imageUpload" formControlName="file" accept=".jpeg, .jpg, .png, .gif"
                          #fileInput (change)=clientuploadEventHandler($event.target.files)
                          matTooltipClass="tooltipClass-mat" matTooltip="Upload File" />
                      </div>
                      <div class="avatar-preview" style="margin:0 auto;">
                        <div id="imagePreview" *ngIf="!clientimageUrl" matTooltipClass="tooltipClass-mat"
                          matTooltip="Upload File. Suggested file resolution is 100 X 100"
                          [style.backgroundImage]="'url('+ clientimageUrl +')'">
                        </div>
                        <div id="imagePreview" *ngIf="clientimageUrl" matTooltipClass="tooltipClass-mat"
                          matTooltip="Upload File. Suggested file resolution is 100 X 100">
                          <img class="upload-image" src="{{clientimageUrl}}" />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div fxLayout="row" fxLayoutWrap="wrap" fxLayout.xs="column" fxLayout.sm="column" class="mt-1"
                    id="style-1" style="height: calc(100vh - 473px);">
                    <div fxFlex fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="67" fxFlex.md="100" ngClass.md="p-3">
                      <div fxLayout="row wrap" fxLayoutGap="10px" class="m-0" fxLayoutGap.xs="0px" fxLayout.xs="column">
                        <div fxFlex="49" fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="100" fxFlex.lg="100">
                          <mat-form-field class="full-width">
                            <input matInput formControlName="firstName" autofocus="true"
                              (keypress)="omit_special_char($event)" placeholder="{{'CLIENTS.FIRSTNAME' | translate}}"
                              required>
                            <mat-error>
                              <span
                                *ngIf="clientForm.get('firstName').hasError('required')">{{'CLIENTS.PLEASEENTERFIRSTNAME'
                                |
                                translate}}</span>
                              <span
                                *ngIf="clientForm.get('firstName').hasError('maxlength')">{{'HRMANAGAMENT.FIRSTNAMECANNOTEXCEED50CHARACTERS'
                                | translate}}</span>
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div fxFlex="49" fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="100" fxFlex.lg="100">
                          <mat-form-field class="full-width">
                            <input matInput formControlName="lastName" placeholder="{{'CLIENTS.LASTNAME' | translate}}"
                              (keypress)="omit_special_char($event)" required>
                            <mat-error>
                              <span
                                *ngIf="clientForm.get('lastName').hasError('required') && clientForm.get('lastName').touched">{{'CLIENTS.PLEASEENTERLASTNAME'
                                | translate}}</span>
                              <span
                                *ngIf="clientForm.get('lastName').hasError('maxlength')">{{'HRMANAGAMENT.LASTNAMECANNOTEXCEED50CHARACTERS'
                                | translate}}</span>
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                      <div fxLayout="row" fxLayoutGap="10px" class="m-0" fxLayoutGap.xs="0px" fxLayout.xs="column">
                        <mat-form-field class="full-width" fxFlex="49">
                          <input type="text" matInput formControlName="companyName"
                            (keypress)="keyPressAlphabets($event)" placeholder="{{'CLIENTS.COMPANYNAME' | translate}}"
                            required>
                          <mat-error>
                            <span
                              *ngIf="clientForm.get('companyName').hasError('required') && clientForm.get('companyName').touched">{{'CLIENTS.PLEASEENTERCOMPANYNAME'
                              | translate}}</span>
                            <span
                              *ngIf="clientForm.get('companyName').hasError('maxlength')">{{'CLIENTS.COMPANYNAMESHOULDNOTEXCEED50CHARACTERS'
                              | translate}}</span>
                          </mat-error>
                        </mat-form-field>
                        <mat-form-field class="full-width" fxFlex="49">
                          <mat-select placeholder="Country" [value]="selected" formControlName="countryId" required>
                            <mat-option [value]="country.countryId" *ngFor="let country of countrys"
                              (click)="selectcoutry(country)">
                              {{country.countryName}}
                            </mat-option>
                          </mat-select>
                          <mat-error>
                            <span
                              *ngIf="clientForm.get('countryId').hasError('required') && clientForm.get('countryId').touched">{{'EMPLOYEEIMMIGRATIONDETAILS.PLEASESELECTCOUNTRY'
                              | translate}}</span>
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div fxLayout="row" fxLayoutGap="10px" class="m-0" fxLayoutGap.xs="0px" fxLayout.xs="column">
                        <mat-form-field class="full-width">
                          <mat-select placeholder="Country Code" [value]="selected" formControlName="phoneCountryCode"
                            required>
                            <mat-option [value]="country.countryCode" *ngFor="let country of countrys">
                              {{country.countryCode}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                        <mat-form-field class="full-width">
                          <input type="text" matInput formControlName="mobileNo" mobileNumber maxlength="10"
                            placeholder="{{'CLIENTS.PHONENUMBER' | translate}}" (keypress)="numberOnly($event)">
                          <mat-error>
                            <span
                              *ngIf="clientForm.get('mobileNo').hasError('maxlength')">{{'HRMANAGAMENT.MOBILENUMBERSHOULDNOTEXCEED20NUMBERS'
                              | translate}}</span>
                            <span *ngIf="clientForm.get('mobileNo').hasError('minlength')">Please enter mobile no in
                              10 digits</span>
                          </mat-error>
                        </mat-form-field>
                      </div>

                      <div fxLayout="row" fxLayoutGap="10px" class="m-0" fxLayoutGap.xs="0px" fxLayout.xs="column">
                        <mat-form-field class="full-width">
                          <input matInput formControlName="email" placeholder="{{'CLIENTS.EMAIL' | translate}}"
                            required>
                          <mat-error>
                            <span *ngIf="clientForm.get('email').hasError('required')">{{'HRMANAGAMENT.PLEASEENTEREMAIL'
                              |
                              translate}}</span>
                            <span
                              *ngIf="clientForm.get('email').hasError('email')">{{'CLIENTS.PLEASEENTERCORRECTEMAILFORMAT'
                              | translate}}</span>
                            <span
                              *ngIf="clientForm.get('email').hasError('maxlength')">{{'CLIENTS.EMAILCANNOTEXCEED50CHARACTERS'
                              | translate}}</span>
                          </mat-error>
                        </mat-form-field>
                        <mat-form-field class="full-width">
                          <mat-select formControlName="roleId" placeholder="Participant Role" multiple
                            (selectionChange)="getRoleslistByUserId();getKycDocumentType()" required>
                            <mat-select-trigger>
                              {{selectedRoleNames}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allSelected (click)="toggleAllRolesSelected()">
                              {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                            </mat-option>
                            <mat-option [value]="role.roleId" (click)="toggleRolePerOne(allSelected.value)"
                              *ngFor="let role of rolesList">
                              {{ role.roleName }}
                            </mat-option>
                          </mat-select>
                          <mat-error
                            *ngIf="clientForm.get('roleId').hasError('required') && clientForm.get('roleId').touched">
                            {{'LEAVETYPES.ROLESREQUIREDERROR' | translate}}
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <mat-form-field class="full-width">
                        <mat-select formControlName="kycDocument" placeholder="Know Your Customer" required>
                          <mat-option [value]="kycDocument.clientKycId" *ngFor="let kycDocument of kycDocumentlist">
                            {{ kycDocument.clientKycName }}
                          </mat-option>
                        </mat-select>
                        <mat-error
                          *ngIf="clientForm.get('kycDocument').hasError('required') && clientForm.get('kycDocument').touched">
                          {{'CLIENTS.KYCDOCUMENTREQUIREDERROR' | translate}}
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="text-center mb-1 p-05">
                    <button mat-raised-button type="reset" class="mr-1 dark-blue-shadow"
                      style="color: #0020B8 !important;" (click)="reset()">{{'HRMANAGAMENT.CANCEL' |
                      translate}}
                    </button>
                    <button mat-button mat-raised-button type="submit" color="primary" class="light-purple-button"
                      (click)="kycConfirmation(kycSubmissionPopup)"
                      [disabled]="!clientForm.valid || anyOperationInProgress"
                      [satPopoverAnchorFor]="kycSubmissionConfirmation" #kycSubmissionPopup="satPopoverAnchor">
                      <mat-progress-bar color="primary" mode="indeterminate" *ngIf="anyOperationInProgress">
                      </mat-progress-bar>{{'CANTEEN.SAVE' | translate}}
                    </button>
                  </div>
                </fieldset>
              </form>
              <div *ngIf="isclientview" fxFlex="100" class="mt-1">
                <div fxLayout="row">
                  <div fxFlex="50" class="text-right">
                    <h6><b> {{'CLIENTS.CLIENTDETAILS' | translate | softLabelsPipe : softLabels}}</b></h6>
                  </div>
                  <div fxFlex="50" fxLayoutAlign="end center">
                    <fa-icon icon="edit" class="mr-05 mb-lg-2 cursor mat-color-accent" (click)="editClient()"
                      color="primary">
                    </fa-icon>
                  </div>
                </div>
                <mat-divider></mat-divider>
                <div fxLayout="row" fxLayoutWrap="wrap" fxLayout.xs="column" fxLayout.sm="column" class="mt-1">
                  <div fxFlex="15" fxFlex.lg="18" fxLayoutAlign.xs="center center" fxLayoutAlign.md="center center"
                    fxLayoutAlign.xs="center center" fxFlex.sm="100" fxFlex.md="42" fxFlex.sm="100"
                    fxLayoutAlign.sm="center center" class="mb-1">
                    <div class="group-gap mt-1 mb-sm-auto">
                      <ngx-avatar name="{{selectedClientDetails?.avatarName}}"
                        src="{{selectedClientDetails?.profileImage}}" size="100" [round]="true"></ngx-avatar>
                    </div>
                  </div>
                  <div fxFlex="100" fxFlex.lg="95" fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="58">
                    <div fxLayout="row wrap" fxLayout.lt-md="column" fxLayoutGap.xs="0px" class="mb-05">
                      <div fxFlex="50" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100">
                        <div fxLayout="row wrap">
                          <div fxFlex="45">
                            <span>{{'CLIENTS.FIRSTNAME' | translate}}</span>
                          </div>
                          <div fxFlex="40" class="hide-content-overflow">
                            <span matTooltipClass="tooltipClass-mat"
                              matTooltip="{{selectedClientDetails?.firstName}}">:&nbsp;
                              {{selectedClientDetails?.firstName}}</span>
                          </div>
                        </div>
                      </div>
                      <div fxFlex="50" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100">
                        <div fxLayout="row wrap">
                          <div fxFlex="45">
                            <span>{{'CLIENTS.LASTNAME' | translate}}</span>
                          </div>
                          <div fxFlex="45" class="hide-content-overflow">
                            <span matTooltipClass="tooltipClass-mat"
                              matTooltip="{{selectedClientDetails?. lastName }}">:&nbsp;
                              {{selectedClientDetails?. lastName }}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div fxLayout="row wrap" fxLayout.lt-md="column" fxLayoutGap.xs="0px" class="mb-05">
                      <div fxFlex="50" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100">
                        <div fxLayout="row wrap">
                          <div fxFlex="45">
                            <span>{{'CLIENTS.EMAIL' | translate}}</span>
                          </div>
                          <div fxFlex="45" class="hide-content-overflow">
                            <span matTooltipClass="tooltipClass-mat"
                              matTooltip="{{selectedClientDetails?. email }}">:&nbsp;
                              {{selectedClientDetails?. email }}</span>
                          </div>
                        </div>
                      </div>
                      <div fxFlex="50" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100">
                        <div fxLayout="row wrap">
                          <div fxFlex="45">
                            <span>{{'CLIENTS.PHONENUMBER' | translate}}</span>
                          </div>
                          <div fxFlex="45" class="hide-content-overflow">
                            <span matTooltipClass="tooltipClass-mat"
                              matTooltip="{{selectedClientDetails?. mobileNo }}">:&nbsp;
                              {{selectedClientDetails?. mobileNo }}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div fxLayout="row wrap" fxLayout.lt-md="column" fxLayoutGap.xs="0px" class="mb-05">
                      <div fxFlex="50" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100">
                        <div fxLayout="row wrap">
                          <div fxFlex="45">
                            <span>{{'CLIENTS.COMPANYNAME' | translate}}</span>
                          </div>
                          <div fxFlex="45" class="hide-content-overflow">
                            <span matTooltipClass="tooltipClass-mat"
                              matTooltip="{{selectedClientDetails?. companyName }}">:&nbsp;
                              {{selectedClientDetails?. companyName }}</span>
                          </div>
                        </div>
                      </div>
                      <div fxFlex="50" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100">
                        <div fxLayout="row wrap">
                          <div fxFlex="45">
                            <span>{{'CLIENTS.COMPANYWEBSITE' | translate}}</span>
                          </div>
                          <div fxFlex="45" class="hide-content-overflow">
                            <span matTooltipClass="tooltipClass-mat"
                              matTooltip="{{selectedClientDetails?. companyWebsite }}">:&nbsp;
                              {{selectedClientDetails?. companyWebsite }}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <form [formGroup]="secondaryForm" #formDirective="ngForm" novalidate
                (submit)="secondaryForm.valid && upsertSecondaryContact() " *ngIf="issecondaryform" fxFlex="100"
                class="mt-1">
                <h6 fxLayoutAlign="center center center" class="mt-05">
                  <b><span *ngIf="formtype == 'addclient'">
                      Add New Stakeholder</span></b>
                  <b><span *ngIf="formtype == 'editclient'">
                      {{'CLIENTS.EDITCLIENTDETAILS' | translate | softLabelsPipe : softLabels}}</span></b>
                  <b><span *ngIf="formtype == 'addsecondary'"> {{'CLIENTS.ADDSECONDARYCONTACT' |
                      translate}}</span></b>
                  <b><span *ngIf="formtype == 'updatesecondary'">
                      {{'CLIENTS.UPDATESECONDARYCONTACTDETAILS' | translate}}</span></b>
                </h6>
                <mat-divider></mat-divider>
                <fieldset disable="disable" class="mat-card-fx-col">
                  <div fxLayout="row" fxLayoutWrap="wrap" fxLayout.xs="column" fxLayout.sm="column">
                    <div fxFlex="20" fxLayoutAlign.xs="center center" fxLayoutAlign.md="center center"
                      fxLayoutAlign.xs="center center" fxFlex.lg="30" fxFlex.md="100" fxFlex.sm="100"
                      fxLayoutAlign.sm="center center" class=" mt-2">
                      <div class="group-gap">
                        <!-- Upload image -->
                        <div class="avatar-upload cursor" (click)="fileInput.click()">
                          <div class="avatar-edit">
                            <input type='file' id="imageUpload" formControlName="file" accept="image/*" #fileInput
                              (change)=uploadEventHandler($event.target.files) matTooltipClass="tooltipClass-mat"
                              matTooltip="Upload File" />
                          </div>
                          <div class="avatar-preview">
                            <div id="imagePreview" *ngIf="!imageUrl" [style.backgroundImage]="'url('+ imageUrl +')'"
                              matTooltipClass="tooltipClass-mat"
                              matTooltip="Upload File. Suggested file resolution is 100 X 100">
                            </div>
                            <div id="imagePreview" *ngIf="imageUrl" matTooltipClass="tooltipClass-mat"
                              matTooltip="Upload File. Suggested file resolution is 100 X 100">
                              <img class="upload-image" src="{{imageUrl}}" />
                            </div>
                          </div>
                        </div>
                        <p fxLayoutAlign="start center" class="ml-1 mt-05">{{'CLIENTS.UPLOADIMAGE' | translate}}</p>
                      </div>
                    </div>
                    <div fxFlex="75" fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="100" fxFlex.lg="65"
                      class="mt-05 mat-card-fx-col">
                      <mat-form-field class="full-width">
                        <input matInput formControlName="firstName" placeholder="{{'CLIENTS.FIRSTNAME' | translate}}"
                          required>
                        <mat-error>
                          <span
                            *ngIf="secondaryForm.get('firstName').hasError('required') && secondaryForm.get('firstName').touched">
                            {{'CLIENTS.PLEASEENTERFIRSTNAME' | translate}}</span>
                          <span *ngIf="secondaryForm.get('firstName').hasError('maxlength')">
                            {{'CLIENTS.FIRSTNAMESHOULDNOTEXCEED50CHARACTERS' | translate}}</span>
                        </mat-error>
                      </mat-form-field>
                      <mat-form-field class="full-width">
                        <input matInput formControlName="lastName" placeholder="{{'CLIENTS.LASTNAME' | translate}}"
                          required>
                        <mat-error>
                          <span
                            *ngIf="secondaryForm.get('lastName').hasError('required') && secondaryForm.get('lastName').touched">
                            {{'CLIENTS.PLEASEENTERLASTNAME' | translate}}</span>
                          <span *ngIf="secondaryForm.get('lastName').hasError('maxlength')">
                            {{'CLIENTS.LASTNAMESHOULDNOTEXCEED50CHARACTERS' | translate}}</span>
                        </mat-error>
                      </mat-form-field>
                      <mat-form-field class="full-width">
                        <input matInput formControlName="email" placeholder="{{'CLIENTS.EMAIL' | translate}}" required>
                        <mat-error>
                          <span
                            *ngIf="secondaryForm.get('email').hasError('required') && secondaryForm.get('email').touched">
                            {{'HRMANAGAMENT.PLEASEENTEREMAIL' | translate}}</span>
                          <span
                            *ngIf="secondaryForm.get('email').hasError('pattern') && !secondaryForm.get('email').hasError('maxlength')">
                            {{'HRMANAGAMENT.PLEASEENTERVALIDEMAIL' | translate}} </span>
                          <span *ngIf="secondaryForm.get('email').hasError('maxlength')">
                            {{'HRMANAGAMENT.EMAILSHOULDNOTEXCEED50CHARACTERS' | translate}}</span>
                        </mat-error>
                      </mat-form-field>
                      <mat-form-field class="full-width">
                        <input matInput formControlName="mobileNo" mobileNumber
                          placeholder="{{'CLIENTS.PHONENUMBER' | translate}}" (keypress)="numberOnly($event)">
                        <mat-error>
                          <span
                            *ngIf="secondaryForm.get('mobileNo').hasError('maxlength')">{{'HRMANAGAMENT.MOBILENUMBERSHOULDNOTEXCEED20NUMBERS'
                            | translate}}</span>
                        </mat-error>
                      </mat-form-field>
                      <div fxLayout="row" class="mt-1" fxLayoutGap="10px" style="margin-top: 0px !important;">
                        <div fxFlex="100" fxFlex.lt-md="100">
                          <mat-form-field class="full-width">
                            <mat-select formControlName="roleId"
                              placeholder="{{'LEAVETYPES.SELECTROLESPLACEHOLDER' | translate}}" multiple
                              (selectionChange)="getSecondaryRoleslistByUserId()" required>
                              <mat-select-trigger>
                                {{selectedSecondaryNames}}
                              </mat-select-trigger>
                              <mat-option [value]="0" #allSelected (click)="toggleSecondaryAllRolesSelected()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                              </mat-option>
                              <mat-option [value]="role.roleId" (click)="toggleSecondaryRolePerOne(allSelected.value)"
                                *ngFor="let role of rolesList">
                                {{ role.roleName }}
                              </mat-option>
                            </mat-select>
                            <mat-error
                              *ngIf="secondaryForm.get('roleId').hasError('required') && secondaryForm.get('roleId').touched">
                              {{'LEAVETYPES.ROLESREQUIREDERROR' | translate}}
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                      <div fxFlex="49" fxFlex.xs="100">
                      </div>
                      <!-- </div> -->
                    </div>
                  </div>
                  <div fxLayout="row" fxFlex="100">

                  </div>
                  <div class="text-center mb-1 p-05">
                    <button mat-button mat-raised-button type="submit" color="primary"
                      class="mr-1 glossy-button-button">
                      <mat-progress-bar color="primary" mode="indeterminate" *ngIf="anyOperationInProgress">
                      </mat-progress-bar>
                      <fa-icon class="mr-05" icon="check"></fa-icon>{{'CANTEEN.SAVE' | translate}}
                    </button>
                    <button mat-raised-button type="reset" (click)="resetsecondary()">
                      <fa-icon icon="times" class="mr-05"></fa-icon>{{'HRMANAGAMENT.CANCEL' | translate}}
                    </button>
                  </div>
                </fieldset>
              </form>
            </mat-card>
            <div fxLayout="row wrap" fxLayout.xs="column" id="style-1">
              <mat-card class="p-1 mat-card" *ngFor="let secondaryContactDetail of secondaryContactDetailsList"
                fxFlex="48" fxFlex.lg="47" fxFlex.md="95" fxFlex.sm="100">
                <div fxLayout="row wrap" class="mb-n3 mt-02">
                  <div fxFlex="22" fxFlex.lg="30" fxFlex.md="28" fxFlex.xs="27" class="mr-05 mb-4"
                    fxLayoutAlign="start center">
                    <ngx-avatar name="{{secondaryContactDetail?.avatarName}}"
                      src="{{secondaryContactDetail?.profileImage}}" size="80" [round]="true"></ngx-avatar>
                  </div>
                  <div fxFlex="70" fxFlex.lg="63" fxFlex.md="64" fxFlex.xs="65">
                    <p class="billing_card_fontsize hide-content-overflow" matTooltipClass="tooltipClass-mat"
                      matTooltip="{{ secondaryContactDetail.firstName }}">
                      <fa-icon icon="user" class="mr-05">
                      </fa-icon> {{secondaryContactDetail.firstName}}
                    </p>
                    <p class="billing_card_fontsize  hide-content-overflow" matTooltipClass="tooltipClass-mat"
                      matTooltip="{{secondaryContactDetail.lastName}}">
                      <fa-icon icon="user" class="mr-05">
                      </fa-icon> {{secondaryContactDetail.lastName}}
                    </p>
                    <p class="billing_card_fontsize hide-content-overflow " matTooltipClass="tooltipClass-mat"
                      matTooltip="{{secondaryContactDetail.email}}">
                      <fa-icon icon="envelope-open" class="mr-05">
                      </fa-icon> {{secondaryContactDetail.email}}
                    </p>
                    <p class="billing_card_fontsize hide-content-overflow " matTooltipClass="tooltipClass-mat"
                      matTooltip="{{secondaryContactDetail.mobileNo}}">
                      <fa-icon icon="phone-alt" aria-hidden="true" class="mr-05">
                      </fa-icon> {{secondaryContactDetail.mobileNo}}
                    </p>
                  </div>
                  <div fxFlex="3">
                    <fa-icon icon="edit" class="mr-05 cursor mat-color-accent"
                      (click)="editSecondarycontactDetails(secondaryContactDetail)">
                    </fa-icon>
                    <!-- <fa-icon icon="trash" class="cursor" (click)="deleteSeccontactDetails(secondaryContactDetail)"
            [matMenuTriggerFor]="deletesecMenu"></fa-icon> -->
                    <mat-menu #deletesecMenu="matMenu" class="p-1">
                      <mat-card-title class="text-center">
                        <div class="card-title-text mb-1"> Are you sure to delete Secondary contact details?
                        </div>
                      </mat-card-title>
                      <div class="text-center">
                        <button class="hover_button mr-1 glossy-button-button"
                          (click)="deleteSecondarycontactDetails()"><i class="fa fa-check"></i>
                          Yes</button>
                        <button class="hover_button cancel_button glossy-button-button"><i class="fa fa-times"></i>
                          No</button>
                      </div>
                    </mat-menu>
                  </div>
                </div>
              </mat-card>

              <!-- <mat-card class="p-1 mat-card cursor" fxFlex="48" fxFlex.lg="47" fxFlex.md="95" fxFlex.sm="100"
                fxLayoutAlign="center center" *ngIf="formtype != 'addsecondary'">
                <div (click)="addSecondaryscontact()">
                  <p class="billing_card_fontsize ptb-2">
                    <fa-icon icon="plus" class="mr-05 mat-color-accent">
                    </fa-icon>
                    <b><span> {{ 'CLIENTS.ADDSECONDARYCONTACT' | translate }}</span></b>
                  </p>
                </div>
              </mat-card> -->
            </div>
          </div>

          <div fxFlex="60" fxFlex.md="60" fxFlex.lt-md="100">
            <mat-card *ngIf="isFromEdit ==true || isFromEdit==false">
              <div fxLayout="column">
                <div *ngIf="canAccess_feature_ResendKycMail && selectedClientDetails?.isKycSybmissionMailSent">
                  <button mat-button mat-raised-button type="submit" color="primary"
                    class="mr-1 mt-1 pull-right light-purple-button" [disabled]="reSendKycLoadingForm"
                    (click)="resendKycMail()"
                    *ngIf="selectedClientDetails?.statusName != 'Verified' && selectedClientDetails?.statusName != 'Submitted'">
                    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="reSendKycLoadingForm">
                    </mat-progress-bar>
                    <fa-icon class="mr-05" icon="check"></fa-icon>Resend KYC
                  </button>
                </div>
                <div *ngIf="(refreshForm && selectedClientDetails?.statusName == 'Verified')" class="kyc-form-height"
                  id="style-1" [ngStyle]="{'background-color': formBgColor}">
                  <!-- <fa-icon icon="edit" class="mr-05 mb-lg-2 cursor mat-color-accent btn-right" (click)="showForm()"
                    color="primary"
                    *ngIf="selectedClientDetails?.statusName != 'Verified' && selectedClientDetails?.statusName != 'Submitted'">
                  </fa-icon> -->
                  <app-form-builder-component #formio [form]="formJson" [submissionData]="formData"
                    (submit)="onSubmit($event.data)" (change)="onChange($event)"></app-form-builder-component>

                </div>
                <div *ngIf="refreshForm && selectedClientDetails?.statusName != 'Verified'" class="kyc-form-height"
                  id="style-1" [ngStyle]="{'background-color': formBgColor}">
                  <app-form-builder-component #formio [form]="formJson" [formSubmissionData]="formData"
                    (submit)="onSubmit($event.data)" (change)="onChange($event)"></app-form-builder-component>
                  <button mat-button mat-raised-button type="submit" color="primary"
                    class="mr-1 mt-1 pull-right light-purple-button" (click)="saveform()">
                    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="Progress">
                    </mat-progress-bar>
                    <fa-icon class="mr-05" icon="check"></fa-icon>{{'CANTEEN.SAVE' | translate}}
                  </button>
                  <button mat-button mat-raised-button type="submit" color="primary"
                    class="mr-1 mt-1 pull-right light-purple-button" [disabled]="kycLoadingForm"
                    (click)="updateClient()" *ngIf="selectedClientDetails?.statusName == 'Submitted'">
                    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="kycLoadingForm">
                    </mat-progress-bar>
                    <fa-icon class="mr-05" icon="check"></fa-icon>{{ 'CLIENTSETTINGS.VERIFYKYC' | translate }}
                  </button>
                </div>
              </div>
            </mat-card>

            <div fxLayout="row wrap" fxLayoutAlign="end center" *ngIf="secondaryContactLength?.length > 1">
              <a class="mr-1 cursor" *ngIf="!isShowMore" (click)="showMore()"> {{'BILLINGMANAGEMENT.SHOWMORE' |
                translate}}
              </a>
              <a class="mr-1 cursor" *ngIf="isShowMore" (click)="showMore()"> {{'BILLINGMANAGEMENT.SHOWLESS' |
                translate}}
              </a>
            </div>

          </div>
        </div>
      </mat-card>
    </ng-template>
  </mat-tab>
  <!-- <mat-tab label="supplier"
    *ngIf="formtype == 'editclient' && selectedClientType == 'Buyer' && canAccess_feature_ViewCreditLogs">
    <ng-template mat-tab-label>
      Credit logs
    </ng-template>
    <ng-template matTabContent>
      <app-billing-component-credit-logs [clientId]="selectedClientId"></app-billing-component-credit-logs>
    </ng-template>
  </mat-tab> -->
  <!-- <mat-tab label="supplier"
    *ngIf="selectedClientId !=null &&selectedClientId!=undefined && canAccess_feature_ManageAddresses">
    <ng-template mat-tab-label>
      Addresses
    </ng-template>
    <ng-template matTabContent>
      <div style="height: 45vh;">
        <app-ship-address-list-component [appType]="'shipToAddress'" [clientId]="selectedClientId">
        </app-ship-address-list-component>
      </div>
      <div style="height: 45vh;">
        <app-ship-address-list-component [appType]="'billToAddress'" [clientId]="selectedClientId">
        </app-ship-address-list-component>
      </div>
    </ng-template>
  </mat-tab> -->
  <mat-tab label="supplier"
    *ngIf="selectedClientId !=null &&selectedClientId!=undefined && canAccess_feature_ViewClientKycHistory">
    <ng-template mat-tab-label>
      KYC History
    </ng-template>
    <ng-template matTabContent>
      <app-billing-component-kyc-history [clientId]="selectedClientId"></app-billing-component-kyc-history>
    </ng-template>
  </mat-tab>
</mat-tab-group>
<sat-popover backdropClass="backdrop-color" #kycSubmissionConfirmation hasBackdrop backdropClass="backdrop-color"
  verticalAlign="below" horizontalAlign="end">
  <mat-card class="p-0">
    <mat-card-content>
      <div class="card-content mb-1" style="padding-top: 20px;">
        Do you want to send an email for KYC submission?
      </div>
      <div class="text-center" style="padding-bottom: 16px;">
        <button mat-button mat-raised-button (click)="closeKycPopup();" class="mr-1 dark-blue-shadow"
          style="border-radius: 7px;">
          No, Thanks!
        </button>
        <button mat-button mat-raised-button color="primary" class="dark-blue-button dark-blue-shadow"
          [disabled]="anyOperationInProgress" (click)="upsertKycSubmission();">
          Yes, Please!
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</sat-popover>

<app-common-message-box *ngIf="!(canAccess_feature_AddOrUpdateClient)"
  textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
</app-common-message-box>