<div class="custom-dialog">
    <div class="custom-close" mat-dialog-close (click)="onNoClick()">
        <fa-icon icon="times" class="project-dialog"></fa-icon>
    </div>
</div>
<div mat-dialog-content class="project-dialogContent">
    <mat-card class="p-0">
        <form [formGroup]="templateForm" #formDirective="ngForm" novalidate (submit)="templateForm.valid" *ngIf="!isPreview">
            <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutGap.xs="0" fxLayoutGap="10px">
                <div fxFlex="25" fxFlex.lt-md="100">
                    <mat-form-field class="full-width">
                        <input matInput formControlName="contractTemplateName" required
                            placeholder="Contract template name">
                    </mat-form-field>
                </div>
                <div fxFlex="25" fxFlex.lt-md="100">
                    <mat-form-field class="full-width">
                        <mat-select placeholder="Contarct template type" formControlName="contractTypeId" required
                            (selectionChange)="changeFormView($event.value)">
                            <mat-option *ngFor="let type of templateTypes" [value]="type.contractTypeId">
                                {{type.contractTypeName}}
                            </mat-option>
                        </mat-select>
                        <mat-error
                            *ngIf="templateForm.get('contractTypeId').hasError('required') && templateForm.get('contractTypeId').touched">
                            Please slect contract type</mat-error>
                    </mat-form-field>
                </div>
                <div fxFlex="25" fxFlex.lt-md="100">
                    <mat-form-field class="full-width">
                        <mat-select placeholder="Please select terms and condition"
                            formControlName="termsAndConditionId" required>
                            <mat-option *ngFor="let termsCondition of termsConditions"
                                [value]="termsCondition.templateConfigurationId">
                                {{termsCondition.templateConfigurationName}}
                            </mat-option>
                        </mat-select>
                        <mat-error
                            *ngIf="templateForm.get('termsAndConditionId').hasError('required') && templateForm.get('termsAndConditionId').touched">
                            Please select terms and condition</mat-error>
                    </mat-form-field>
                </div>

                <div fxFlex="20" fxFlex.lt-md="100">
                <mat-form-field class="full-width status-color mb-05" >                 
                        <input formControlName="formBgColor" matInput
                            placeholder="choose color" [(colorPicker)]="color"
                            [cpPosition]="'bottom'" [style.background]="color"
                            (colorPickerClose)="onChangeColor($event)"
                            [value]="color"/>
                </mat-form-field>
                </div>

            </div>
        </form>
        <!-- <div class="performance" id="style-1" *ngIf="isFormView && isPreview">
            <app-form-builder-component [form]="contractTemplateFormJson" (change)="onChange($event)" [readOnly]="isPreview"></app-form-builder-component>
        </div>
        <div class="performance" id="style-1" *ngIf="isFormView && !isPreview">
            <app-form-builder-component [form]="contractTemplateFormJson" (change)="onChange($event)"></app-form-builder-component>
        </div> -->
        <div>
        <div [ngStyle]="{'background-color': formBgColor}">
            <div class="performance" id="style-1" *ngIf="isFormView && isPreview">
                <app-form-builder-component [form]="contractTemplateFormJson" (emitEventChange)="onChange($event)" [preview]="isPreview"></app-form-builder-component>
            </div>
            <div class="performance" id="style-1" *ngIf="isFormView && !isPreview">
                <app-form-builder-component [form]="contractTemplateFormJson" (emitEventChange)="onChange($event)"></app-form-builder-component>
            </div>
        </div>
        
        <button mat-button mat-raised-button *ngIf="!contractTemplateId" class="glossy-button-button m-1 pull-right" color="primary"
            type="button" [disabled]="(isAddInProgress || !templateForm.valid)"
            (click)="upsertContractTemplate()">
            <fa-icon class="mr-05" icon="save"></fa-icon>{{ 'SAVE' | translate }}
        </button>
        <button *ngIf="contractTemplateId && !isPreview" mat-button mat-raised-button class="m-1 pull-right glossy-button-button" color="primary"
            type="button" [disabled]="(isAddInProgress || !templateForm.valid)"
            (click)="upsertContractTemplate()">
            <fa-icon class="mr-05" icon="file"></fa-icon>{{ 'UPDATE' | translate }}
        </button>
        </div>
    </mat-card>
</div>