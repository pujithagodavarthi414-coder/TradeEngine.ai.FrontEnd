<div class="custom-dialog">
    <div class="custom-close" mat-dialog-close (click)="onNoClick()">
        <fa-icon icon="times" class="project-dialog"></fa-icon>
    </div>
</div>
<mat-card class="filter-data p-0">
    <mat-card-title class="text-center">
        <div class="card-title-text mat-bg-primary p-05">
            <span>Documents</span>
        </div>
    </mat-card-title>
    <form [formGroup]="descriptionForm" novalidate #formDirective="ngForm" (submit)="upsertDocumentsDescription()">
        <div class=" text-center mt-2 mb-4 " fxflex="100" fxflex.gt-sm="100">
            <a (click)="getControlsLength()" style="font-size: 15px !important;" class="custom-link ">Upload
                document</a>
        </div>
        <div style="max-height:250px" id="style-1">

            <div formArrayName="descriptions" *ngFor="let item of getDescriptionControls(); let i = index;">
                <mat-card-content class="Step-description mt-1">
                    <div>
                        <div [formGroupName]="i" fxLayout="row" fxLayoutAlign="space-between center">
                            <div fxFlex="20px" class="mr-05">
                                <span class="badge-item test-case-step-count count-padding">{{i + 1}}</span>
                            </div>
                            <mat-form-field class="full-width">
                                <textarea matInput formControlName="description"
                                    placeholder="{{'BLSUPPLIER.BLDESCRIPTION' | translate}}"></textarea>
                            </mat-form-field>
                            <div fxFlex="20px" class="ml-05">
                                <fa-icon  matTooltipClass="tooltipClass-mat" matTooltip="Upload files" icon="image" 
                                    [satPopoverAnchorFor]="testSuiteFileUploadPopover"
                                    #testSuiteFileUploadPopup="satPopoverAnchor"
                                    (click)="openFileUploadPopover(docsData.id,i,testSuiteFileUploadPopup)">
                                </fa-icon>
                            </div>


                            <div fxFlex="40px" fxLayout="column" fxLayoutAlign="space-around center" class="ml-05"
                                fxLayoutGap="8px">
                                <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="10px">
                                    <a class="icon-hover"  matTooltipClass="tooltipClass-mat" matTooltip="{{'TESTMANAGEMENT.ADDFIELD' | translate}}"
                                    
                                        (click)="addItem(i)">
                                        <fa-icon icon="plus" class="mat-color-accent"></fa-icon>
                                    </a>
                                    <a class="icon-hover"  matTooltipClass="tooltipClass-mat" matTooltip="Remove field" 
                                        [satPopoverAnchorFor]="deleteFeaturePopOver"
                                        #deleteDescriptionPopover="satPopoverAnchor" (click)="removeDescription(i,deleteDescriptionPopover)">
                                        <fa-icon icon="minus" class="mat-color-accent"></fa-icon>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </mat-card-content>
            </div>
        </div>
        <div class="text-center mb-1 prl-1">
            <button mat-raised-button class="mr-3 glossy-button-button" color="primary" type="submit" (click)="onNoClick()"
                [disabled]="isInProgress">
                <fa-icon icon="save" class="mr-05"></fa-icon> {{'SAVE' | translate}}
            </button>
            <button mat-raised-button type="reset" (click)="onNoClick()" [disabled]="isInProgress">
                <fa-icon icon="times" class="mr-05"></fa-icon> {{'CANCEL' | translate}}
            </button>
        </div>

    </form>
</mat-card>
<sat-popover #testSuiteFileUploadPopover hasBackdrop [interactiveClose]="false" backdropClass="testrun-popover"
    scrollStrategy="reposition">
    <mat-card class="p-0 mr-0 custom-hrm-dropzone">
        <mat-card-title>
            <div class="card-title-text mat-bg-primary p-05" fxLayout="row">
                <div fxFlex class="text-center">
                    {{'TESTMANAGEMENT.UPLOADFILES' | translate}}
                </div>
                <div fxFlex="20px" fxLayoutAlign="end center">
                    <button class="inline_edit_close_btn btn" (click)="closeTestSuitePopup()">
                        <fa-icon icon="times"></fa-icon>
                    </button>
                </div>
            </div>
        </mat-card-title>
        <div class="mobile-view-popover p-1">
            <app-dropzone [moduleTypeId]="moduleTypeId" [referenceTypeId]="referenceTypeId" [referenceId]="referenceId"
                [selectedParentFolderId]="referenceId" [selectedStoreId]="selectedStoreId"
                [isButtonVisible]="isButtonVisible" [getFilesByReferenceId]="true">
            </app-dropzone>
        </div>
    </mat-card>
</sat-popover>
<!--Delete dialog-->
<sat-popover #deleteFeaturePopOver hasBackdrop backdropClass="backdrop-color" verticalAlign="below"
    horizontalAlign="end">
    <mat-card class="p-0">
        <mat-card-title class="text-center mat-bg-primary">
            <div class="card-title-text p-05">{{'TESTMANAGEMENT.CONFIRMATION' | translate}}</div>
        </mat-card-title>
        <mat-card-content>
            <div class="card-content p-05">
                {{'TESTMANAGEMENT.REALLYDELETETHISSTEPTHISOPERATIONCANNOTBEUNDONE' | translate}}
            </div>
            <div class="text-center">
                <button class="mr-05 glossy-button-button" mat-button mat-raised-button color="primary" (click)="removeItemAtIndex()">
                    <fa-icon class="mr-05" icon="trash"></fa-icon> {{'TESTMANAGEMENT.DELETE' | translate}}
                </button>
                <button mat-button mat-raised-button (click)="closeDeleteDescriptionDialog();">
                    <fa-icon class="mr-05" icon="times"></fa-icon> {{'TESTMANAGEMENT.CANCEL' | translate}}
                </button>
            </div>
        </mat-card-content>
    </mat-card>
</sat-popover>