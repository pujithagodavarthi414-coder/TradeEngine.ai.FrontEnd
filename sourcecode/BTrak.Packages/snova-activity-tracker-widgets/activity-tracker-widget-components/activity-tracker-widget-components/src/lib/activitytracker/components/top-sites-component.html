<div class="full-height">
    <mat-card class="p-0 canteen-manage m-0">
        <mat-card-title class="full-width data-table-header drag-handler" style="color: white;"
            [ngStyle]="{ 'background-color' : isApp ? '#3d5afe' : '#673ab7'}">
            <div fxLayout="row wrap" fxLayout.xs="column">
                <div class="card-title-text p-05 ml-05" fxFlex fxLayoutAlign="start center">
                    <span class="hide-content-overflow" matTooltip="{{ dashboardName | titlecase }}">{{
                        dashboardName | titlecase }}</span>
                </div>
                <div fxFlex="40px" fxFlex.xs="25px" fxLayoutAlign="end center">
                    <button type="submit" mat-icon-button class="pull-right cursor-pointer" (click)="refresh()"
                        matTooltip=" {{'BILLINGDASHBOARD.REFRESH' | translate}}">
                        <fa-icon icon="redo-alt" style="color: white;" class="filter">
                        </fa-icon>
                    </button>
                </div>
            </div>
            <mat-divider></mat-divider>
        </mat-card-title>
    </mat-card>
    <div *ngIf="canAccess_feature_ViewActivityReports" class="no-drag my-appsWeb-height" id="widget-scroll-id"
        scrollStrategy="reposition">
        <mat-progress-bar mode="indeterminate" *ngIf="loading"></mat-progress-bar>
        <div fxFlex fxLayout="row wrap" fxLayoutAlign="start center" style="background-color: #ffffff;">
            <!-- <mat-card *ngIf=" ((activityData.length == 0) && (chartData.length == 0) && (canAccess_feature_ViewActivityReports) && !loading)" class="full-width">
            <div fxLayoutAlign="center center" fxLayout="column" class="no-data">
                {{'NODATATODISPLAY'|translate}}
            </div>
        </mat-card> -->
            <div class="full-width">
                <app-common-message-box
                    *ngIf=" ((activityData.length == 0) && (chartData.length == 0) && (canAccess_feature_ViewActivityReports) && !loading)"
                    textToDisplay="{{'NODATATODISPLAY'|translate}}">
                </app-common-message-box>
            </div>


            <div fxFlex="45" class="pl-05">
                <span *ngFor="let item of activityData">
                    <div class="webApps-box p-02 mb-05" *ngIf="item.applicationTypeName == 'UnProductive'"
                        style="border-color: #FF8993;background-color: #FFE7EC;">
                        <div fxLayout="row">
                            <div fxFlex="40px" class="icon-button top-websites">
                                <app-avatar [name]="item.appUrlName | removeSpecialCharacters"
                                    [src]="item.appUrlImage | fetchSizedAndCachedImage: '40':''" [isRound]="true"
                                    size="30">
                                </app-avatar>
                            </div>
                            <div fxlayout="column" fxFlex class="hide-content-overflow">
                                <div fxLayout="row">
                                    <div fxFlex="100" matTooltip="{{item.appUrlName}}">
                                        <b>{{item.appUrlName}}</b>
                                    </div>
                                </div>
                                <div fxLayout="row" fxLayoutGap="5px" class="pr-05">
                                    <div fxFlex="100">
                                        <span class="mat-small">
                                            {{item.totalTime}}
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div fxFlex fxLayoutAlign="end center" style="color:#FF5D6A" class="pr-05">
                                {{item.applicationTypeName}}
                            </div>
                        </div>
                    </div>
                    <div class="webApps-box p-02 mb-05" *ngIf="item.applicationTypeName == 'Productive'"
                        style="border-color: #5DCBC8 ;background-color: #DDF5F5;">
                        <div fxLayout="row">
                            <div fxFlex="40px" class="icon-button top-websites">
                                <app-avatar [name]="item.appUrlName | removeSpecialCharacters"
                                    [src]="item.appUrlImage | fetchSizedAndCachedImage: '40':''" [isRound]="true"
                                    size="30">
                                </app-avatar>
                            </div>
                            <div fxlayout="column" fxFlex class="hide-content-overflow">
                                <div fxLayout="row">
                                    <div fxFlex="100" matTooltip="{{item.appUrlName}}">
                                        <b>{{item.appUrlName}}</b>
                                    </div>
                                </div>
                                <div fxLayout="row" fxLayoutGap="5px" class="pr-05">
                                    <div fxFlex="100">
                                        <span class="mat-small">
                                            {{item.totalTime}}
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div fxFlex fxLayoutAlign="end center" style="color:#17B5B0" class="pr-05">
                                {{item.applicationTypeName}}
                            </div>
                        </div>
                    </div>
                    <div class="webApps-box p-02 mb-05" *ngIf="item.applicationTypeName == 'Neutral'"
                        style="border-color:#8E9AAA;background-color:#E7E8EF;">
                        <!-- <div fxFlex fxLayout="row wrap">
                            <app-avatar class="webApps-Img" *ngIf="!item.appUrlImage"
                                [name]="item.appUrlName | removeSpecialCharacters" [isRound]="true" size="30">
                            </app-avatar>
                            <img class="webApps-Img" *ngIf="item.appUrlImage" [src]="item.appUrlImage">
                            <span class="mt-02">{{item.appUrlName}}</span>
                            <div> 9h:23m</div>
                            <div fxFlex fxLayoutAlign="end center" style="color:#8E9AAA">
                                {{item.applicationTypeName}}
                            </div>
                        </div> -->

                        <div fxLayout="row">
                            <div fxFlex="40px" class="icon-button top-websites">
                                <app-avatar [name]="item.appUrlName | removeSpecialCharacters"
                                    [src]="item.appUrlImage | fetchSizedAndCachedImage: '40':''" [isRound]="true"
                                    size="30">
                                </app-avatar>
                            </div>
                            <div fxlayout="column" fxFlex class="hide-content-overflow">
                                <div fxLayout="row">
                                    <div fxFlex="100" matTooltip="{{item.appUrlName}}">
                                        <b>{{item.appUrlName}}</b>
                                    </div>
                                </div>
                                <div fxLayout="row" fxLayoutGap="5px" class="pr-05">
                                    <div fxFlex="100">
                                        <span class="mat-small">
                                            {{item.totalTime}}
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div fxFlex fxLayoutAlign="end center" style="color:#8E9AAA" class="pr-05">
                                {{item.applicationTypeName}}
                            </div>
                        </div>
                    </div>
                </span>
            </div>

            <div fxFlex="2">

            </div>
            <div *ngIf="chartData" fxFlex="50" class="webApps-chart pt-1">
                <kendo-chart #chart [style.cursor]="cursor" (seriesHover)="cursor = 'pointer'"
                    (seriesLeave)="cursor = 'default'">
                    <kendo-chart-legend position="right" [visible]="false"></kendo-chart-legend>
                    <kendo-chart-series>
                        <kendo-chart-series-item type=donut [data]="chartData" field="value"
                            appUrlNameField="appUrlName" [holeSize]="65" [color]="pointColor">
                            <!-- <kendo-chart-series-item-labels position="outsideEnd" color="#808080">
                    </kendo-chart-series-item-labels> -->
                        </kendo-chart-series-item>
                    </kendo-chart-series>
                </kendo-chart>
            </div>
        </div>
    </div>

    <!-- <mat-card *ngIf="!(canAccess_feature_ViewActivityReports) && !loading" class="full-width">
    <div fxLayoutAlign="center center" fxLayout="column" class="no-data">
        {{'DONTHAVEANYPERMISSIONS'|translate}}
    </div>
</mat-card> -->

    <app-common-message-box *ngIf="!(canAccess_feature_ViewActivityReports) && !loading"
        textToDisplay="{{'DONTHAVEANYPERMISSIONS'|translate}}">
    </app-common-message-box>
</div>