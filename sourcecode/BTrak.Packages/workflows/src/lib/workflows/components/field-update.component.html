<div class="custom-dialog">
  <div class="custom-close" mat-dialog-close (click)="onNoClick()">
    <fa-icon icon="times" class="project-dialog"></fa-icon>
  </div>
</div>
<mat-card class="filter-data p-0">
  <mat-card-title class="text-center">
    <div class="card-title-text mat-bg-primary p-05">
      Add Field Update</div>

  </mat-card-title>
  <form [formGroup]="fieldForm" novalidate (submit)="fieldForm.valid && upsertFieldUpdate()">
    <div id="style-1" class="goal-create-height p-1">
      <div fxLayout="row wrap" class="p-05 ">
        <div fxFlex="98">
          <div fxFlex fxLayout="row wrap">
            <div fxFlex="30">
              <div class="pt-1">Form Name</div>
            </div>
            <div fxFlex="50" class="pt-1"> <mat-label>{{formname}}</mat-label></div>


            <input matInput formControlName="id" hidden>

            <!-- <mat-form-field class="full-width" fxFlex="50">
                        <input matInput formControlName="formtypeName">
                      </mat-form-field> -->
          </div>
        </div>




        <div fxFlex="98">
          <div fxFlex fxLayout="row wrap">
            <div fxFlex="30">
              <div class="pt-1">Field Update Name *</div>
            </div>
            <mat-form-field class="full-width" fxFlex="50">
              <input matInput formControlName="name">
              <mat-error>
                <span *ngIf="fieldForm.get('name').hasError('required')">
                  Field Update Name is required</span>
              </mat-error>
            </mat-form-field>
          </div>
        </div>


        <div fxFlex="98">
          <div fxFlex fxLayout="row wrap">
            <div fxFlex="30">
              <div class="pt-1">Description *</div>
            </div>
            <mat-form-field class="full-width" fxFlex="50">
              <input matInput formControlName="description">
              <mat-error>
                <span *ngIf="fieldForm.get('description').hasError('required')">
                  Description is required</span>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div fxFlex="98" class="workflowsubheader">
          Edit Field
        </div>
        <div fxFlex="98">
          <div fxFlex fxLayout="row wrap">
            API Keys of both Parent and Child Forms should be same. If the value here is blank than the real time update in the Parent Form key will be updated in Child Form.
          </div>
        </div>
        <div fxFlex="98" class="dvCriteria" style="padding-top: 15px;">
          <div fxLayout="row">Parameters in Standard Format(Name = Value)</div>
          <div formArrayName="inputParamSteps"
            *ngFor="let item of fieldForm.get('inputParamSteps')['controls']; let i = index;">
            <mat-card-content class="Step-description mt-1" fxFlex="98" fxFlex.gt-sm="98">
              <div [formGroupName]="i" style="display: flex">
                <input matInput hidden formControlName="id" />
                <div class="align-center" fxFlex="30px" class="mr-05">
                  <span class="test-case-step-count count-padding">{{i + 1}}.</span>
                </div>

                <div fxFlex="100" fxFlex.gt-xs="22" fxFlex.xs="36" class="mr-05">
                  <mat-form-field class="full-width" fxFlex="100">
                    <mat-select formControlName="fieldName" required>
                      <mat-option [value]="forms.key" *ngFor="let forms of formFieldsDropDown">
                        {{ forms.key }}
                      </mat-option>
                    </mat-select>
                    <mat-error>
                      <span *ngIf="item.get('fieldName').hasError('required')">
                        FieldName is required</span>
                    </mat-error>
                  </mat-form-field>
                </div>
                <div fxFlex="20">
                  <div class="fieldequal">=</div>
                </div>
                <div fxFlex="100" fxFlex.gt-xs="22" fxFlex.xs="36" class="mr-05">
                  <mat-form-field class="full-width" fxFlex="100">
                    <input matInput formControlName="fieldValue">
                  </mat-form-field>
                </div>
                <div fxFlex="40px" fxLayout="column" fxLayoutAlign="space-around center" class="ml-05"
                  fxLayoutGap="8px">
                  <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="10px">
                    <a class="icon-hover" matTooltip="Add" (click)="addItem(i)">
                      <fa-icon icon="plus" class="mat-color-accent"></fa-icon>
                    </a>
                    <a class="icon-hover" matTooltip="Delete" (click)="removeItem(i)" *ngIf="i !=0">
                      <fa-icon icon="minus" class="mat-color-accent"></fa-icon>
                    </a>
                  </div>

                </div>
              </div>
            </mat-card-content>
          </div>
        </div>
        <div fxFlex="98" class="workflowsubheader">
          Sync form
        </div>
        <div fxFlex="98">
          <div fxFlex fxLayout="row wrap">
            <div fxFlex="30">
              <div class="pt-1">Select child form to be synced</div>
            </div>
            <mat-form-field class="full-width" fxFlex="50">
              <mat-select formControlName="syncForm" required>
                <mat-option [value]="forms.id" *ngFor="let forms of formsDropdown">
                  {{ forms.formName }}
                </mat-option>
              </mat-select>
              <mat-error>
                <span *ngIf="fieldForm.get('syncForm').hasError('required')">
                  Sync form is required</span>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-05">

      <button class="pull-right mr-1" mat-raised-button type="submit" color="primary" [disabled]="!fieldForm.valid">
        <fa-icon class="mr-05" icon="check"></fa-icon>
        Save </button>
      <button class="pull-right mr-1" mat-raised-button (click)="cancelFiledUpdate()" [disabled]="!fieldForm.valid "
        type="button">

        Cancel
      </button>
    </div>
  </form>
</mat-card>