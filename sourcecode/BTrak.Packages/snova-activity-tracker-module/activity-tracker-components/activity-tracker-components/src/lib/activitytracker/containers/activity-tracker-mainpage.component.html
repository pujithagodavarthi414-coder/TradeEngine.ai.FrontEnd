<div class="p-02 full-width project-statuslist"
    [ngClass]="[tracking ? 'activity-page-header' : 'activitytracker-page-header']" fxLayout="row wrap">
    <div fxFlex="{{ tracking ? 88: 68}}" fxFlex.lg="{{ tracking ? 84: 67}}" fxFlex.md="{{ tracking ? 78: 65}}"
        fxFlex.sm="{{ tracking ? 71: 100}}" class="pr-05">
        <mat-tab-group class="payroll-mat-tabs" [selectedIndex]="selectedTabIndex"
            (selectedTabChange)="onTabClick($event)">
            <mat-tab label="empty"></mat-tab>
            <mat-tab label="summary"  [disabled]="true" *ngIf="canAccess_feature_ViewActivityDashboard">
                <ng-template mat-tab-label>
                    <a  [routerLink]="['/activitytracker/activitydashboard/summary']">
                    <span
                        matTooltip="{{ 'ACTIVITYTRACKER.SUMMARYTABSHOWSALLTHEDETAILSABOUTACTIVITYTRACKING' | translate}}">
                        <span
                            class="activity-material material-icons icon-button mat-color-accent mr-05">dashboard</span><span
                            class="tracker-tab-icon mr-05 language-icon">{{'TIMESHEETSUBMISSION.SUMMARY' | translate}}</span>
                    </span>
                    </a>
                </ng-template>
            </mat-tab>
            <mat-tab label="timesheet" [disabled]="true" *ngIf="canAccess_feature_ViewTodaysTimesheet">
                <ng-template mat-tab-label>
                    <a  [routerLink]="['/activitytracker/activitydashboard/timesheet']">
                        <span matTooltip="{{ 'ACTIVITYTRACKER.ITWILLDISPLAYALLTHETIMINGSOFTHETRACKEDUSER' | translate}}">
                        <span
                            class="activity-material material-icons icon-button mat-color-accent mr-05">alarm</span><span
                            class="tracker-tab-icon mr-05 language-icon">{{ 'ACTIVITYTRACKER.TIMESHEET' | translate}}</span>
                    </span>
                </a>
                </ng-template>
            </mat-tab>
            <mat-tab label="productivity" [disabled]="true" *ngIf="canAccess_feature_ViewEmployeeActivityTimeUsage">
                <ng-template mat-tab-label>
                    <a  [routerLink]="['/activitytracker/activitydashboard/productivity']">
                    <span matTooltip="{{ 'ACTIVITYTRACKER.ITWILLDISPLAYPRODUCTIVITYDETAILS' | translate}}">
                        <span
                            class="activity-material material-icons icon-button mat-color-accent mr-05">assessment</span><span
                            class="tracker-tab-icon mr-05 language-icon">{{ 'ACTIVITYTRACKER.PRODUCTIVITY' | translate}}</span>
                    </span>
                </a>
                </ng-template>
            </mat-tab>
            <mat-tab label="timeline" [disabled]="true"  *ngIf="canAccess_feature_ViewEmployeeAppTrackerCompleteReport">
                <ng-template mat-tab-label>
                    <a [routerLink]="['/activitytracker/activitydashboard/timeline']">
                    <span
                        matTooltip="{{ 'ACTIVITYTRACKER.ITWILLDISPLAYTIMELINEDETAILSWITHPROGRESSIVEBARS' | translate}}.">
                        <span
                            class="activity-material material-icons icon-button mat-color-accent mr-05">timeline</span><span
                            class="tracker-tab-icon mr-05 language-icon">{{ 'AUDIT.TIMELINE' | translate}}</span>
                    </span>
                </a>
                </ng-template>
            </mat-tab>
            <mat-tab label="screenshots" [disabled]="true" *ngIf="canAccess_feature_ViewActivityScreenshots">
                <ng-template mat-tab-label>
                    <a [routerLink]="['/activitytracker/activitydashboard/screenshots']">
                    <span matTooltip="{{ 'ACTIVITYTRACKER.ITWILLDISPLAYALLTHESCREENSHOTSWHICHARETRACKED' | translate}}">
                        <span
                            class="activity-material material-icons icon-button mat-color-accent mr-05">camera_enhance</span><span
                            class="tracker-tab-icon mr-05 language-icon">{{ 'ACTIVITYTRACKER.SCREENSHOTS' | translate}}</span>
                    </span>
                    </a>
                </ng-template>
            </mat-tab>
            <!-- <mat-tab label="detailedusage" *ngIf="canAccess_feature_ViewEmployeeWebAppUsage">
                <ng-template mat-tab-label>
                    <span matTooltip="{{ 'ACTIVITYTRACKER.ITWILLDISPLAYALLTHEDETAILEDVIEW' | translate}}.">
                        <span
                            class="activity-material material-icons icon-button mat-color-accent mr-05">data_usage</span><span
                            class="tracker-tab-icon mr-05">{{ 'ACTIVITYTRACKER.DETAILEDUSEAGE' | translate}}</span>
                    </span>
                </ng-template>
            </mat-tab> -->
            
            <mat-tab label="myDashboard" [disabled]="true">
                <ng-template mat-tab-label>
                    <a [routerLink]="['/activitytracker/activitydashboard/myDashboard']">
                    <span matTooltip="{{ 'ACTIVITYTRACKER.MYDASHBOARDHELPTEXT' | translate}}">
                        <span
                            class="activity-material material-icons icon-button mat-color-accent mr-05">view_module</span><span
                            class="tracker-tab-icon mr-05 language-icon">{{ 'ACTIVITYTRACKER.MYDASHBOARD' | translate}}</span>
                    </span>
                   </a>
                </ng-template>
            </mat-tab>
            <mat-tab label="teamDashboard" [disabled]="true" *ngIf="teamDashboard">
                <ng-template mat-tab-label>
                    <a [routerLink]="['/activitytracker/activitydashboard/teamDashboard']">
                    <span matTooltip="{{ 'ACTIVITYTRACKER.TEAMDASHBOARDHELPTEXT' | translate}}">
                        <span
                            class="activity-material material-icons icon-button mat-color-accent mr-05">view_module</span><span
                            class="tracker-tab-icon mr-05 language-icon">{{ 'ACTIVITYTRACKER.TEAMDASHBOARD' | translate}}</span>
                    </span>
                   </a>
                </ng-template>
            </mat-tab>
            <mat-tab label="reports" [disabled]="true" *ngIf="canAccess_feature_CanAccessTrackerReports">
                <ng-template mat-tab-label>
                    <a [routerLink]="['/activitytracker/activitydashboard/reports']">
                    <span
                        matTooltip="{{ 'ACTIVITYTRACKER.ITWILLDISPLAYREPORTSREGARDINGEMPLOYEEATTENDENCE' | translate}}">
                        <span
                            class="activity-material material-icons icon-button mat-color-accent mr-05">assignment</span><span
                            class="tracker-tab-icon mr-05 language-icon">{{'MYPROFILE.REPORTS' | translate}}</span>
                    </span>
                   </a>
                </ng-template>
            </mat-tab>
        </mat-tab-group>
    </div>
    <div *ngIf="!tracking && canAccess_feature_ManageActivityConfig" [fxFlex]="isStartEnable ? 26 : 29" fxFlex.sm="90"
        class="mb-05 mat-color-primary" fxLayoutAlign="center center" style="font-size: 17px; font-weight: 500;">
        {{ 'ACTIVITYTRACKER.ACTIVITYTRACKERHEADERENABLE' | translate }} &nbsp;&nbsp;<fa-icon icon="hand-point-right"
            class="mat-color-accent goal-unique-menu" style="font-size: 24px;"></fa-icon>&nbsp;&nbsp;<mat-slide-toggle
            (change)="activityTracking()" [(ngModel)]="tracking">
        </mat-slide-toggle>
    </div>
    <div fxFlex="166px" fxLayoutAlign="end center" *ngIf="selectedTab == 'summary' && isStartEnable && tracking"
        class="pb-07">
        <!-- <button mat-raised-button color="primary" (click)="enableIntro()"
        >{{'HRMANAGAMENT.EXPLAINTHISPAGE' | translate}}</button> -->
    </div>
    <div fxFlex="166px" fxLayoutAlign="end center" *ngIf="(selectedTab != 'summary' || !isStartEnable) && tracking">

    </div>
    <div fxFlex="45px" fxLayoutAlign="end center" *ngIf="!tracking && isStartEnable">
        <button mat-icon-button (click)="enableIntro()" class="project-select mr-n3 mt-n1"
            matTooltip="{{'HRMANAGAMENT.EXPLAINTHISPAGE' | translate}}">
            <fa-icon icon="info-circle" class="mat-color-accent goal-unique-menu"
                style="font-size: 17px; font-weight: 500;"></fa-icon>
        </button>
    </div>
    <div fxFlex="45px" fxLayoutAlign="end center"
        *ngIf="(canAccess_feature_ManageActivityConfig || canAccess_feature_ManageAppsAndUrls || canAccess_feature_ViewUsers || canAccess_feature_ViewEmployeeWebAppUsage)">
        <button mat-icon-button [satPopoverAnchorFor]="threeDotMenuPopover"
            (click)="$event.stopPropagation();threeDotMenuPopover.open()" class="project-select mr-n3 mt-n1"
            matTooltip="{{ 'SETTINGS' | translate}}">
            <fa-icon icon="ellipsis-h" class="mat-color-accent goal-unique-menu"></fa-icon>
        </button>
    </div>
</div>
<div id="style-1" class="full-width"
    [ngClass]="{'tracker-main-page': (['summary','configuration','myDashboard','teamDashboard'].includes(selectedTab))}">

    <div [ngClass]="{'k-i-loading': isLoading}"></div>

    <div *ngIf="selectedTab == 'summary'">
        <!-- <div *ngIf="canAccess_feature_ViewActivityDashboard" class="col-sm-12 p-0">
            <app-fm-component-websites-and-applications [startIntrojs]="startIntrojs"></app-fm-component-websites-and-applications>
        </div>
        <div *ngIf="canAccess_feature_ViewActivityDashboard" class="col-sm-12 p-0">
            <app-fm-component-app-usage-report></app-fm-component-app-usage-report>
        </div> -->
        <div class="col-sm-12 p-0">
            <app-summary-mainpage [startIntrojs]="startIntrojs" [employeeData]="employeesDropDown"
                [branchData]="branchesList" [roleData]="rolesDropDown" (showTeamDashboard)="showTeamDashboard($event)">
            </app-summary-mainpage>
        </div>
        <app-common-message-box *ngIf="!(canAccess_feature_ViewActivityDashboard )"
            textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
        </app-common-message-box>
    </div>
    <div *ngIf="selectedTab == 'timesheet'">
        <app-time-sheet-tracker-component *ngIf="canAccess_feature_ViewTodaysTimesheet">
        </app-time-sheet-tracker-component>
        <app-common-message-box *ngIf="!(canAccess_feature_ViewTodaysTimesheet )"
            textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
        </app-common-message-box>
    </div>
    <div *ngIf="selectedTab == 'screenshots'">
        <app-fm-component-activity-screenshots *ngIf="canAccess_feature_ViewActivityScreenshots">
        </app-fm-component-activity-screenshots>
        <app-common-message-box *ngIf="!(canAccess_feature_ViewActivityScreenshots )"
            textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
        </app-common-message-box>
    </div>
    <div *ngIf="selectedTab == 'productivity'">
        <app-view-activitytracker-component-time-usage *ngIf="canAccess_feature_ViewEmployeeActivityTimeUsage"
            [employeeData]="employeesDropDown" [branchData]="branchesList" [roleData]="rolesDropDown">
        </app-view-activitytracker-component-time-usage>
        <app-common-message-box *ngIf="!(canAccess_feature_ViewEmployeeActivityTimeUsage )"
            textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
        </app-common-message-box>
    </div>
    <div *ngIf="selectedTab == 'detailedusage'">
        <app-view-activitytracker-component-web-app-usage *ngIf="canAccess_feature_ViewEmployeeWebAppUsage"
            [employeeData]="employeesDropDown" [branchData]="branchesList" [roleData]="rolesDropDown">
        </app-view-activitytracker-component-web-app-usage>
        <app-common-message-box *ngIf="!(canAccess_feature_ViewEmployeeWebAppUsage )"
            textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
        </app-common-message-box>
    </div>
    <div *ngIf="selectedTab == 'timeline'">
        <app-view-activitytracker-bryntum-report *ngIf="canAccess_feature_ViewEmployeeAppTrackerCompleteReport"
            [branchData]="branchesList" [departmentData]="departmentList">
        </app-view-activitytracker-bryntum-report>
        <app-common-message-box *ngIf="!(canAccess_feature_ViewEmployeeAppTrackerCompleteReport )"
            textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
        </app-common-message-box>
    </div>
    <div *ngIf="selectedTab == 'reports'">
        <ndc-dynamic [ndcDynamicFactory]="dashboard.component" [ndcDynamicComponent]="dashboard.component"
            *ngIf="selectedWorkspaceId && dashboard && componentLoded && canAccess_feature_CanAccessTrackerReports"
            [ndcDynamicInjector]="injector" [ndcDynamicInputs]="dashboard.inputs" [ndcDynamicOutputs]="outputs">
        </ndc-dynamic>
        <app-common-message-box *ngIf="!(canAccess_feature_CanAccessTrackerReports)"
            textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
        </app-common-message-box>
    </div>

    <div *ngIf="selectedTab == 'configurationHistory'">
        <app-fm-component-activityhistory></app-fm-component-activityhistory>
        <app-common-message-box *ngIf="!(canAccess_feature_ManageActivityConfig )"
            textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
        </app-common-message-box>
    </div>
    <div *ngIf="selectedTab == 'configuration'">
        <app-fm-component-activityapps [tracking]="trackerChange" (trackingDisable)="disabletrack($event)"
            [enableBasicTrackingInput]="enableBasicTracking">
        </app-fm-component-activityapps>
        <app-common-message-box *ngIf="!(canAccess_feature_ViewActivityDashboard )"
            textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
        </app-common-message-box>
    </div>
    <div *ngIf="selectedTab == 'modeconfiguration'">
        <app-fm-component-mode-config></app-fm-component-mode-config>
    </div>
    <div *ngIf="selectedTab == 'productiveapps'">
        <ndc-dynamic *ngIf="(canAccess_feature_ManageAppsAndUrls ) && dynamicComponentLoaded"
            [ndcDynamicFactory]="dynamicComponent" [ndcDynamicComponent]="dynamicComponent"
            [ndcDynamicInjector]="injector" [ndcDynamicInputs]="inputs" [ndcDynamicOutputs]="outputs">
        </ndc-dynamic>
        <app-common-message-box *ngIf="!(canAccess_feature_ManageAppsAndUrls )"
            textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
        </app-common-message-box>
    </div>
    <div *ngIf="selectedTab == 'usermanagement'">
        <ndc-dynamic *ngIf="(canAccess_feature_ViewUsers ) && dynamicComponentLoaded"
            [ndcDynamicFactory]="dynamicComponent" [ndcDynamicComponent]="dynamicComponent"
            [ndcDynamicInjector]="injector" [ndcDynamicInputs]="inputs" [ndcDynamicOutputs]="outputs">
        </ndc-dynamic>
        <app-common-message-box *ngIf="!(canAccess_feature_ViewUsers )"
            textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
        </app-common-message-box>
    </div>
    <div *ngIf="selectedTab == 'myDashboard'">
        <app-tracker-dashboard-component [dashboardName]="'time_tracker_MyDashboard'"></app-tracker-dashboard-component>
    </div>
    <div *ngIf="selectedTab == 'teamDashboard'">
        <app-tracker-dashboard-component [dashboardName]="'activity_tracker_TeamDashboard'">
        </app-tracker-dashboard-component>
    </div>

</div>

<sat-popover backdropClass="backdrop-color" class="goal-options custom-goal-unique-background" #threeDotMenuPopover
    hasBackdrop [interactiveClose]="true" verticalAlign="below" (click)="$event.stopPropagation()"
    horizontalAlign="end">
    <mat-card class="filter-data mat-card-fx-col p-0">
        <div fxFlex fxLayoutAlign="start center" *ngIf="canAccess_feature_ManageActivityConfig">
            <button mat-menu-item (click)="setEnableBasicTracking();onMenuOptionSelect('configuration');">
                <div fxLayoutAlign="row">
                    <div fxFlex="25px">
                        <fa-icon icon="cog"></fa-icon>
                    </div>
                    <div fxFlex class="ml-05">
                        {{'ACTIVITYTRACKER.ACTIVITYTRACKERCONFIGURATION'|translate}}
                    </div>
                </div>
            </button>
        </div>
        <div fxFlex fxLayoutAlign="start center" *ngIf="canAccess_feature_ManageActivityModeConfig">
            <button mat-menu-item (click)="onMenuOptionSelect('modeconfiguration');">
                <div fxLayoutAlign="row">
                    <div fxFlex="25px">
                        <fa-icon icon="cog"></fa-icon>
                    </div>
                    <div fxFlex class="ml-05">
                        {{'ACTIVITYTRACKER.ACTIVITYTRACKERMODECONFIGURATION'|translate}}
                    </div>
                </div>
            </button>
        </div>
        <div fxFlex fxLayoutAlign="start center" *ngIf="canAccess_feature_ManageAppsAndUrls">
            <button mat-menu-item (click)="onMenuOptionSelect('productiveapps');">
                <div fxLayoutAlign="row">
                    <div fxFlex="25px" style="margin:5px 5px 5px -4px;color:grey;">
                        <span class="material-icons" style="font-size:20px">poll</span>
                    </div>
                    <div fxFlex class="ml-05">
                        {{'ACTIVITYTRACKER.PRODUCTIVEAPPS'|translate}}
                    </div>
                </div>
            </button>
        </div>
        <div fxFlex fxLayoutAlign="start center" *ngIf="canAccess_feature_ViewUsers">
            <button mat-menu-item (click)="onMenuOptionSelect('usermanagement');">
                <div fxLayoutAlign="row">
                    <div fxFlex="25px">
                        <fa-icon icon="user"></fa-icon>
                    </div>
                    <div fxFlex class="ml-05">
                        {{'HRMANAGAMENT.USERMANAGEMENT'|translate}}
                    </div>
                </div>
            </button>
        </div>
        <div fxFlex fxLayoutAlign="start center" *ngIf="canAccess_feature_ManageActivityConfig">
            <button mat-menu-item (click)="onMenuOptionSelect('configurationHistory');">
                <div fxLayoutAlign="row">
                    <div fxFlex="25px">
                        <fa-icon icon="history"></fa-icon>
                    </div>
                    <div fxFlex class="ml-05">
                        {{'ACTIVITYTRACKER.ACTIVITYTRACKERCONFIGURATIONHISTORY'|translate}}
                    </div>
                </div>
            </button>
        </div>
        <div fxFlex fxLayoutAlign="start center" *ngIf="canAccess_feature_ViewEmployeeWebAppUsage">
            <button mat-menu-item (click)="onMenuOptionSelect('detailedusage');">
                <div fxLayoutAlign="row">
                    <div fxFlex="25px">
                        <div fxFlex="25px" style="margin:5px 5px 5px -4px;color:grey;">
                            <span class="material-icons" style="font-size:20px">data_usage</span>
                        </div>
                    </div>
                    <div fxFlex class="ml-05">
                        {{'ACTIVITYTRACKER.DETAILEDUSEAGE'|translate}}
                    </div>
                </div>
            </button>
        </div>
    </mat-card>
</sat-popover>