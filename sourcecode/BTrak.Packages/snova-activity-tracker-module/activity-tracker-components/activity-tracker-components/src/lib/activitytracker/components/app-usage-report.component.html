<div *ngIf="(canAccess_feature_ViewApplicationUsageReports) && (canAccess_feature_ViewActivityDashboard)">
    <!-- <div>
        <mat-card class="p-05 ml-0" id="step2-1">
            <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutAlign.xs="center center" fxLayoutGap="10px">
                <div fxFlex="30" fxFlex.md="17" fxFlex.sm="23">
                    <mat-card-title class="mt-05 tracker-helper-icon" fxFlex fxLayout="row wrap">
                        <h5>{{'ACTIVITYTRACKER.PRODUCTIVITYSUMMARY' | translate}}</h5>
                        <fa-icon icon="eye" aria-hidden="true"
                            class="goal-cursor mat-color-accent tracker-helper mt-03 pl-05"
                            matTooltip="{{'ACTIVITYTRACKERHELPERS.PRODUCTIVITYSUMMARYHELPER'|translate}}"></fa-icon>
                    </mat-card-title>
                </div>
            </div>
        </mat-card>
        <mat-card class="default" class="ml-0 p-0" id="step2-2">
            <mat-card-title class="full-width">
                <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="0" fxLayoutGap.xs="10px">
                    <div fxFlex fxLayoutAlign="start center">
                        <button type="submit" mat-icon-button class="pull-right" (click)="filterClick()"
                            matTooltip=" {{'HRMANAGAMENT.ADVANCESEARCH' | translate}}">
                            <fa-icon icon="filter" class="filter mat-color-accent">
                            </fa-icon>
                        </button>
                    </div>
                    <div fxFill>
                        <div class="filter-section" [hidden]="!isOpen">
                            <ul>
                                <li class="p-0">
                                    <button mat-icon-button matTooltip="{{'RESET' | translate}}"
                                        (click)="resetAllFilters()">
                                        <fa-icon class="filter mat-color-accent" icon="undo"></fa-icon>
                                    </button>
                                </li>
                                <li [ngClass]="{ 'active': monthFilterActive }" [satPopoverAnchorFor]="namePopover"
                                    hasBackdrop (click)="namePopover.toggle()" id="step2-li-1">
                                    <a>
                                        <mat-icon>arrow_drop_down</mat-icon>{{'LOGTIMEREPORT.DATE' | translate}}
                                    </a>
                                    <sat-popover #namePopover verticalAlign="below" hasBackdrop horizontalAlign="start">
                                        <mat-card class="filter-data">
                                            <div fxLayout="row wrap" fxLayoutGap="3">
                                                <div fxFlex="49" class="mr-05">
                                                    <mat-form-field color="accent">
                                                        <mat-label>{{ 'PERMISSIONHISTORY.FROMDATE' | translate }}
                                                        </mat-label>
                                                        <input matInput [matDatepicker]="picker2" autocomplete="off"
                                                            (click)="picker2.open()" [min]="minDateOnTrailExpired"
                                                            (dateChange)="dateFromChanged($event)" class="date-picker"
                                                            [max]="maxDate" [(ngModel)]="fromDate" [readonly]="true">
                                                        <mat-datepicker-toggle matSuffix [for]="picker2">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker #picker2></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                                <div fxFlex="45">
                                                    <mat-form-field color="accent">
                                                        <mat-label>{{ 'PERMISSIONHISTORY.TODATE' | translate }}
                                                        </mat-label>
                                                        <input matInput [matDatepicker]="picker3" autocomplete="off"
                                                            [min]="fromDate" (click)="picker3.open()" [max]="maxDate"
                                                            (dateChange)="dateToChanged($event)" class="date-picker"
                                                            [(ngModel)]="toDate" [readonly]="true">
                                                        <mat-datepicker-toggle matSuffix [for]="picker3">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker #picker3></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                        </mat-card>
                                    </sat-popover>
                                </li>
                                <li [ngClass]="{ 'active': selectBranchFilterIsActive }"
                                    [satPopoverAnchorFor]="branchPopover" hasBackdrop (click)="branchPopover.toggle()"
                                    id="step2-li-2">
                                    <a>
                                        <mat-icon>arrow_drop_down</mat-icon>{{'LOGTIMEREPORT.BRANCH' | translate}}
                                    </a>
                                    <sat-popover #branchPopover verticalAlign="below" hasBackdrop
                                        horizontalAlign="start">
                                        <mat-card class="filter-data">
                                            <mat-form-field class="full-width" (click)="$event.stopPropagation();">
                                                <mat-select [(ngModel)]="branchId"
                                                    placeholder="{{'BRANCH.BRANCH' | translate}}" multiple>
                                                    <mat-select-trigger>
                                                        {{selectedBranch}}
                                                    </mat-select-trigger>
                                                    <mat-option #allBranchesSelected
                                                        (click)="toggleAllBranchesSelected()" [value]="0">
                                                        {{ 'PERMISSIONMANAGEMENT.SELECTALL' | translate }}</mat-option>
                                                    <mat-option [value]="branch.branchId"
                                                        (click)="toggleBranchesPerOne()"
                                                        *ngFor="let branch of branchesList">
                                                        {{branch.branchName}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </mat-card>
                                    </sat-popover>
                                </li>
                                <li [ngClass]="{ 'active': selectRoleFilterIsActive }"
                                    [satPopoverAnchorFor]="departmentPopover" hasBackdrop
                                    (click)="departmentPopover.toggle()" id="step2-li-3">
                                    <a>
                                        <mat-icon>arrow_drop_down</mat-icon>{{'USERMANAGEMENT.ROLE' | translate }}
                                    </a>
                                    <sat-popover #departmentPopover verticalAlign="below" hasBackdrop
                                        horizontalAlign="start">
                                        <mat-card class="filter-data">
                                            <mat-form-field class="full-width" (click)="$event.stopPropagation();">
                                                <mat-select [(ngModel)]="roleId"
                                                    placeholder="{{'USERMANAGEMENT.ROLE' | translate}}" multiple>
                                                    <mat-select-trigger>
                                                        {{selectedRole}}
                                                    </mat-select-trigger>
                                                    <mat-option #allRolesSelected (click)="toggleAllRolesSelected()"
                                                        [value]="0">
                                                        {{ 'PERMISSIONMANAGEMENT.SELECTALL' | translate }}</mat-option>
                                                    <mat-option [value]="roles.roleId"
                                                        *ngFor="let roles of rolesDropDown"
                                                        (click)="toggleRolesPerOne()">
                                                        {{roles.roleName}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </mat-card>
                                    </sat-popover>
                                </li>

                                <li [ngClass]="{ 'active': selectUserFilterIsActive }"
                                    [satPopoverAnchorFor]="designationPopover" hasBackdrop
                                    (click)="designationPopover.toggle()" id="step2-li-4">
                                    <a>
                                        <mat-icon>arrow_drop_down</mat-icon> {{'ACTIVITYTRACKER.USER' | translate }}
                                    </a>
                                    <sat-popover #designationPopover verticalAlign="below" hasBackdrop
                                        horizontalAlign="start">
                                        <mat-card class="filter-data">
                                            <mat-form-field class="full-width" (click)="$event.stopPropagation();">
                                                <mat-select (selectionChange)="changeUser($event.value)"
                                                    [(ngModel)]="userId"
                                                    placeholder="{{'ACTIVITYTRACKER.USER' | translate}}">
                                                    <mat-option [value]="employees.teamMemberId"
                                                        *ngFor="let employees of employeesDropDown">
                                                        {{employees.teamMemberName}}<span
                                                            *ngIf="employees.teamMemberId == loggedUser">
                                                            (Myself)</span>
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </mat-card>
                                    </sat-popover>
                                </li>
                                <li [ngClass]="{ 'active': searchIsActive }" [satPopoverAnchorFor]="searchPopover"
                                    (click)="searchPopover.toggle()" id="step2-li-5">
                                    <a>
                                        <mat-icon>arrow_drop_down</mat-icon>{{'SEARCH' | translate}}
                                    </a>
                                    <sat-popover #searchPopover verticalAlign="below" hasBackdrop
                                        horizontalAlign="start">
                                        <mat-card class="filter-data">
                                            <div class="ml-05 mr-05 search_goalinput">
                                                <mat-form-field fxLayoutAlign="end center">
                                                    <input class="search_goal" matInput
                                                        placeholder="{{'SEARCH' | translate}}" [(ngModel)]="searchText"
                                                        (input)="search()">
                                                </mat-form-field>
                                                <span class="close_icon">
                                                    <span
                                                        *ngIf="!searchText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                                    <mat-icon *ngIf="searchText" class="icon-button" aria-hidden="false"
                                                        (click)="closeSearch()" style="cursor:pointer">
                                                        close</mat-icon>
                                                </span>
                                            </div>
                                        </mat-card>
                                    </sat-popover>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <mat-divider></mat-divider>
                <div *ngIf="filterStatus()" fxLayout="row wrap">
                    <mat-chip disableRipple matRipple *ngIf="fromDate" class="ml-05 m03">
                        <div>
                            <b>{{'PERMISSIONHISTORY.FROMDATE' | translate}}:</b>&nbsp;{{fromDate | date:"d MMM, y"}}
                        </div>
                    </mat-chip>
                    <mat-chip disableRipple matRipple *ngIf="toDate" class="ml-05 m03">
                        <div>
                            <b>{{'PERMISSIONHISTORY.TODATE' | translate}}:</b>&nbsp;{{toDate | date:"d MMM, y"}}
                        </div>
                    </mat-chip>
                    <mat-chip disableRipple matRipple *ngIf="selectedBranch" class="ml-05 m03" fxLayout="row">
                        <div>
                            <b>{{'LOGTIMEREPORT.BRANCH' | translate}}:</b>&nbsp;{{selectedBranch}}
                        </div>
                        <div (click)="changeBranch('')" class="cursor-pointer ml-01">
                            <fa-icon icon="times" class="times-on-hover"></fa-icon>
                        </div>
                    </mat-chip>
                    <mat-chip disableRipple matRipple *ngIf="selectedRole" class="ml-05 m03" fxLayout="row">
                        <div>
                            <b>{{'USERMANAGEMENT.ROLE' | translate}}:</b>&nbsp;{{selectedRole}}
                        </div>
                        <div (click)="changeRole('')" class="cursor-pointer ml-01">
                            <fa-icon icon="times" class="times-on-hover"></fa-icon>
                        </div>
                    </mat-chip>
                    <mat-chip disableRipple matRipple *ngIf="selectedUser" class="ml-05 m03" fxLayout="row">
                        <div>
                            <b>{{'ACTIVITYTRACKER.USER' | translate}}:</b>&nbsp;{{selectedUser}}
                        </div>
                        <div (click)="changeUser('')" class="cursor-pointer ml-01">
                            <fa-icon icon="times" class="times-on-hover"></fa-icon>
                        </div>
                    </mat-chip>
                    <mat-chip disableRipple matRipple *ngIf="searchText" class="ml-05 m03" fxLayout="row">
                        <div>
                            <b>{{'SEARCH' | translate}}:</b>&nbsp;{{searchText}}
                        </div>
                        <div (click)="closeSearch()" class="cursor-pointer ml-01">
                            <fa-icon icon="times" class="times-on-hover"></fa-icon>
                        </div>
                    </mat-chip>
                </div>
            </mat-card-title>
        </mat-card>
    </div> -->


    <mat-progress-bar mode="indeterminate" *ngIf="loading"></mat-progress-bar>
    <div fxLayout="row wrap" fxFlex fxLayout.lt-sm = "column" fxLayout.sm = "column">
        <div class="p-03" id="step2-3" fxFlex="33.3" fxFlex.lt-sm = "100" fxFlex.sm = "100">
            <!-- <mat-card-title class="scroller-app">
                <div fxLayout="row" fxLayoutGap.xs="0px" fxLayout.xs="column" class="tracker-helper-icon">
                    <div fxFlex fxLayout="row" class="p-1">{{'ACTIVITYTRACKER.PRODUCTIVEAPPS' | translate }}
                        <fa-icon icon="eye" aria-hidden="true" class="goal-cursor mat-color-accent tracker-helper pl-05"
                            matTooltip="{{'ACTIVITYTRACKERHELPERS.PRODUCTIVEAPPSHELPER'|translate}}"></fa-icon>
                    </div>
                </div>
            </mat-card-title> -->

            <div class="p-0 canteen-manage m-0">
                <div class="full-width data-table-header" style="background-color: #27c26c !important;color: white;">
                    <div fxLayout="row wrap" fxLayout.xs="column">
                        <div fxLayout="row" fxLayoutGap.xs="0px" fxLayout.xs="column" class="tracker-helper-icon">
                            <div fxFlex fxLayout="row" class="p-05">{{'ACTIVITYTRACKER.PRODUCTIVEAPPS' | translate |
                                titlecase }}
                                <fa-icon icon="eye" aria-hidden="true" style="color: white;"
                                    class="goal-cursor tracker-helper pl-05"
                                    matTooltip="{{'ACTIVITYTRACKERHELPERS.PRODUCTIVEAPPSHELPER'|translate}}"></fa-icon>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <mat-progress-bar mode="indeterminate" *ngIf="productiveLoading"></mat-progress-bar>
            <div class="summary-page-box" [ngClass]="totalCountProductive > 25 ? 'apps-height-pagination' : 'apps-height'" id="style-1">
                <div *ngFor="let appUsage of appUsageProductiveReport">
                    <div fxFlex="100" *ngIf="isProductive(appUsage.applicationTypeName , appUsage.applicationName)"
                        style="height: 13%;">

                        <div *ngIf="isProductive(appUsage.applicationTypeName , appUsage.applicationName)"
                            fxLayout="row wrap">
                            <div fxFlex="60" fxLayoutAlign="start center" class="ml-1 mb-05"
                                [satPopoverAnchorFor]="addIsProductivePopover" #addIsProductivePopup="satPopoverAnchor"
                                (click)="editAppUrl(appUsage, addIsProductivePopup)"
                                [ngStyle]="{'cursor': canAccess_feature_ManageAppsAndUrls ? 'pointer' : 'auto' }">

                                <app-avatar class="employee_img" *ngIf="!appUsage.appUrlImage"
                                    [name]="appUsage.applicationName | removeSpecialCharacters" [isRound]="true"
                                    size="30">
                                </app-avatar>
                                <img class="employee_img" *ngIf="appUsage.appUrlImage" [src]="appUsage.appUrlImage">
                                <div class="hide-content-overflow">
                                    <label style="cursor:pointer"
                                        class="assets-name-control hide-content-overflow activity-font-color mb-0 mt-05"
                                        matTooltip="{{appUsage.applicationName}}">{{appUsage.applicationName}}</label>
                                </div>
                            </div>

                            <div fxFlex fxLayoutAlign="end center" class="activity-font-color pr-05">
                                {{appUsage.spentValue | activityTimeFilter}}</div>
                        </div>

                    </div>
                </div>
                <div fxLayoutAlign="center center" fxLayout="row" fxFlex *ngIf="!productiveLenght && !productiveLoading"
                    class="no-data">
                    {{ 'ACTIVITYTRACKER.NODATATODISPLAY' | translate }}
                </div>
            </div>
            <div class="summary-box-pagination" *ngIf="(totalCountProductive > 25)">
                <mat-paginator *ngIf="(totalCountProductive > 25)" [length]="totalCountProductive"
                    [pageSize]="pageSizeProductive" [pageIndex]="pageIndexProductive"
                    [pageSizeOptions]="pageSizeOptionsProductive" (page)="getProductiveAppList($event)" style="display: flex; justify-content: start;">
                </mat-paginator>
            </div>
        </div>
        <div class="p-03" id="step2-4" fxFlex="33.3" fxFlex.lt-sm = "100" fxFlex.sm = "100">
            <!-- <div fxLayout="row" fxLayoutGap.xs="0px" fxLayout.xs="column" class="tracker-helper-icon">
                <div fxFlex fxLayout="row" class="p-1">{{'ACTIVITYTRACKER.UNPRODUCTIVEAPPS' | translate }}
                    <fa-icon icon="eye" aria-hidden="true" class="goal-cursor mat-color-accent tracker-helper pl-05"
                        matTooltip="{{'ACTIVITYTRACKERHELPERS.UNPRODUCTIVEAPPSHELPER'|translate}}"></fa-icon>
                </div>
            </div> -->
            <div class="p-0 canteen-manage m-0">
                <div class="full-width data-table-header" style="background-color: #ffa500 !important;color: white;">
                    <div fxLayout="row wrap" fxLayout.xs="column">
                        <div fxLayout="row" fxLayoutGap.xs="0px" fxLayout.xs="column" class="tracker-helper-icon">
                            <div fxFlex fxLayout="row" class="p-05">{{'ACTIVITYTRACKER.UNPRODUCTIVEAPPS' | translate |
                                titlecase }}
                                <fa-icon icon="eye" aria-hidden="true" style="color: white;"
                                    class="goal-cursor  tracker-helper pl-05"
                                    matTooltip="{{'ACTIVITYTRACKERHELPERS.UNPRODUCTIVEAPPSHELPER'|translate}}">
                                </fa-icon>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <mat-progress-bar mode="indeterminate" *ngIf="unProductiveLoading"></mat-progress-bar>
            <div class="summary-page-box" id="style-1" [ngClass]="totalCountUnProductive > 25 ? 'apps-height-pagination' : 'apps-height'">
                <div *ngFor="let appUsage of appUsageUnProductiveReport">
                    <div fxFlex="100" fxLayout="row"
                        *ngIf="isUnproductive(appUsage.applicationTypeName , appUsage.applicationName)"
                        style="height: 13%;">
                        <div *ngIf="isUnproductive(appUsage.applicationTypeName , appUsage.applicationName)"
                            fxFlex="100" fxLayout="row">
                            <div fxFlex="60" fxLayoutAlign="start center" class="ml-1 mb-05"
                                [satPopoverAnchorFor]="addIsProductivePopover" #addIsProductivePopup="satPopoverAnchor"
                                (click)="editAppUrl(appUsage, addIsProductivePopup)"
                                [ngStyle]="{'cursor': canAccess_feature_ManageAppsAndUrls ? 'pointer' : 'auto' }">

                                <app-avatar class="employee_img" *ngIf="!appUsage.appUrlImage"
                                    [name]="appUsage.applicationName | removeSpecialCharacters" [isRound]="true"
                                    size="30">
                                </app-avatar>
                                <img class="employee_img" *ngIf="appUsage.appUrlImage" [src]="appUsage.appUrlImage">
                                <div class="hide-content-overflow">
                                    <label style="cursor:pointer"
                                        class="assets-name-control hide-content-overflow activity-font-color  mb-0 mt-05"
                                        matTooltip="{{appUsage.applicationName}}">{{appUsage.applicationName}}</label>
                                </div>
                            </div>

                            <div fxFlex fxLayoutAlign="end center" class="activity-font-color pr-05">
                                {{appUsage.spentValue | activityTimeFilter}}</div>
                        </div>
                    </div>
                </div>
                <div fxLayoutAlign="center center" fxLayout="row" fxFlex *ngIf="!unproductiveLenght && !unProductiveLoading"
                    class="no-data">
                    {{ 'ACTIVITYTRACKER.NODATATODISPLAY' | translate }}
                </div>
            </div>
            <div class="summary-box-pagination" *ngIf="(totalCountUnProductive > 25)">
                <mat-paginator *ngIf="(totalCountUnProductive > 25)" [length]="totalCountUnProductive"
                    [pageSize]="pageSizeUnProductive" [pageIndex]="pageIndexUnProductive"
                    [pageSizeOptions]="pageSizeOptionsUnProductive" (page)="getUnProductiveAppList($event)" style="display: flex; justify-content: start;">
                </mat-paginator>
            </div>
        </div>
        <div class="p-03" id="step2-5" fxFlex="33.3" fxFlex.lt-sm = "100" fxFlex.sm = "100">
            <!-- <div fxLayout="row" fxLayoutGap.xs="0px" fxLayout.xs="column" class="tracker-helper-icon">
                <div fxFlex fxLayout="row" class="p-1">{{'ACTIVITYTRACKER.NEUTRALAPPS' | translate }}
                    <fa-icon icon="eye" aria-hidden="true" class="goal-cursor mat-color-accent tracker-helper pl-05"
                        matTooltip="{{'ACTIVITYTRACKERHELPERS.NEUTRALAPPSHELPER'|translate}}"></fa-icon>
                </div>
            </div> -->
            <div class="p-0 canteen-manage m-0">
                <div class="full-width data-table-header" style="background-color: #8E9AAA !important;color: white;">
                    <div fxLayout="row wrap" fxLayout.xs="column">
                        <div fxLayout="row" fxLayoutGap.xs="0px" fxLayout.xs="column" class="tracker-helper-icon">
                            <div fxFlex fxLayout="row" class="p-05">{{'ACTIVITYTRACKER.NEUTRALAPPS' | translate |
                                titlecase }}
                                <fa-icon icon="eye" aria-hidden="true" style="color: white;"
                                    class="goal-cursor tracker-helper pl-05"
                                    matTooltip="{{'ACTIVITYTRACKERHELPERS.NEUTRALAPPSHELPER'|translate}}">
                                </fa-icon>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <mat-progress-bar mode="indeterminate" *ngIf="neutralLoading"></mat-progress-bar>
            <div class="summary-page-box" id="style-1" [ngClass]="totalCount > 25 ? 'apps-height-pagination' : 'apps-height'">
                <div *ngFor="let appUsage of appUsageReport">
                    <div fxFlex="100" *ngIf="isNeutral(appUsage.applicationTypeName , appUsage.applicationName)"
                        style="height: 13%;">
                        <div *ngIf="isNeutral(appUsage.applicationTypeName , appUsage.applicationName)" fxFlex="100"
                            fxLayout="row wrap">
                            <div fxFlex="60" fxLayoutAlign="start center" class="ml-1 mb-05"
                                [ngStyle]="{'cursor': canAccess_feature_ManageAppsAndUrls ? 'auto' : 'auto' }">
                                <app-avatar class="employee_img" *ngIf="!appUsage.appUrlImage"
                                    [name]="appUsage.applicationName | removeSpecialCharacters" [isRound]="true"
                                    size="30">
                                </app-avatar>
                                <img class="employee_img" *ngIf="appUsage.appUrlImage" [src]="appUsage.appUrlImage">
                                <div class="hide-content-overflow">
                                    <label style="cursor:pointer"
                                        class="assets-name-control hide-content-overflow activity-font-color mb-0 mt-05"
                                        matTooltip="{{appUsage.applicationName}}">{{appUsage.applicationName}}</label>
                                </div>
                            </div>
                            <div fxFlex fxLayoutAlign="end center" class="activity-font-color pr-05">
                                {{appUsage.spentValue | activityTimeFilter}}</div>
                        </div>
                    </div>
                </div>
                <div fxLayoutAlign="center center" fxLayout="row" fxFlex *ngIf="!neutralLenght && !neutralLoading"
                    class="no-data">
                    {{ 'ACTIVITYTRACKER.NODATATODISPLAY' | translate }}
                </div>
            </div>
            <div class="summary-box-pagination" *ngIf="(totalCount > 25)">
                <mat-paginator *ngIf="(totalCount > 25)" [length]="totalCount" [pageSize]="pageSize"
                    [pageIndex]="pageIndex" [pageSizeOptions]="pageSizeOptions" (page)="getAppList($event)" style="display: flex; justify-content: start;">
                </mat-paginator>
            </div>
        </div>
    </div>


    <!-- EDIT PRODUCTIVE APP POPUP -->
    <sat-popover #addIsProductivePopover [autoFocus]="false" hasBackdrop backdropClass="backdrop-color"
        [restoreFocus]="false" [interactiveClose]="false" scrollStrategy="reposition" verticalAlign="below"
        horizontalAlign="before">
        <mat-card class="filter-data p-0" fxFlex="320px">
            <mat-card-title class="text-center">
                <div class="card-title-text mat-bg-primary p-05">{{application}}
                </div>
            </mat-card-title>
            <form [formGroup]="addProductiveAppForm" novalidate #productiveFormDirective="ngForm"
                (submit)="addProductiveApp(productiveFormDirective)">

                <div class="card-content p-05 mt-05">

                    <!-- APPLICATION NAME -->
                    <mat-form-field class="full-width" (click)="$event.stopPropagation();">
                        <input matInput formControlName="appUrlName"
                            placeholder="{{'ACTIVITYTRACKER.APPLICATIONNAME' | translate}}" required />
                        <mat-error>
                            <span
                                *ngIf="addProductiveAppForm.get('appUrlName').hasError('required') && addProductiveAppForm.get('appUrlName').touched">
                                {{'ACTIVITYTRACKER.PLEASEENTERAPPLICATIONNAME' | translate}}</span>
                            <span
                                *ngIf="addProductiveAppForm.get('appUrlName').hasError('required') && addProductiveAppForm.get('appUrlName').untouched">
                                {{'ACTIVITYTRACKER.PLEASEENTERAPPLICATIONNAME' | translate}}</span>
                            <span *ngIf="addProductiveAppForm.get('appUrlName').hasError('maxlength')">
                                {{'ACTIVITYTRACKER.APPLICATIONNAMEHASEXCEEDEDTHEMAXIMUMLENTH' | translate}}</span>
                        </mat-error>
                    </mat-form-field>

                    <!-- DROPZONE -->
                    <div class="ml-1" [hidden]="isDropzone" fxFlex>
                        <img class="app-image-preview" src="{{imageUrl}}" />
                        <a class="image_close" (click)="enableDropZone()"
                            style="right: 23px; top: 53px; border-radius: 12px;background-color: #7f7777db !important;">
                            <fa-icon icon="times" style="color: #292929 !important;"></fa-icon>
                        </a>
                    </div>
                    <div [hidden]="!isDropzone">
                        <ngx-dropzone #fileDropzone fxFlex="100" [ngStyle]="{'height':'150px','overflow':'hidden'}"
                            [accept]="'image/png,image/jpeg,image/jpg'" [multiple]="false" (change)="onSelect($event)"
                            [maxFileSize]="5514432">
                            <ngx-dropzone-label>{{'ACTIVITYTRACKER.ADDAPPICON' | translate}}</ngx-dropzone-label>
                            <ngx-dropzone-preview *ngFor="let f of selectedFiles" [file]="f" [removable]="true"
                                (removed)="onRemove(f)">
                                <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
                            </ngx-dropzone-preview>
                        </ngx-dropzone>
                    </div>

                    <div fxLayout="row">
                        <div fxFlex>
                            <mat-form-field class="full-width" (click)="$event.stopPropagation();">
                                <mat-select formControlName="applicationCategoryId"
                                    placeholder="{{ 'ACTIVITYTRACKER.APPLICATIONCATEGORY' | translate }}">
                                    <mat-option value="option" *ngFor="let category of applicationCategories"
                                        [value]="category.applicationCategoryId">
                                        {{ category.applicationCategoryName }}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div fxFlex="40px" *ngIf="canAccess_feature_ManageApplicationCategory"
                            matTooltip="{{'EXPENSEMANAGEMENT.ADDCATEGORY'|translate}}">
                            <mat-icon class="icon-button cursor-pointer mat-bg-primary plus_icon ml-08"
                                aria-hidden="false" (click)="createAppCategory()">
                                add</mat-icon>
                        </div>
                    </div>

                    <!-- PRODUCTIVE ROLES -->
                    <mat-form-field class="full-width" (click)="$event.stopPropagation();">
                        <mat-select formControlName="productiveRoleIds" [required]="productiveRequired"
                            [disabled]="!productiveRequired"
                            placeholder="{{'ACTIVITYTRACKER.PRODUCTIVEROLES' | translate}}" multiple>
                            <mat-option #allSelected (click)="toggleAllRolesProductive()" [value]="0">
                                {{ 'PERMISSIONMANAGEMENT.SELECTALL' | translate }}</mat-option>
                            <mat-option [value]="roles.roleId" *ngFor="let roles of productiveRoles"
                                (click)="toggleRoleProductive()">
                                {{roles.roleName}}
                            </mat-option>
                        </mat-select>
                        <mat-error>
                            <span
                                *ngIf="addProductiveAppForm.get('productiveRoleIds').hasError('required')  && addProductiveAppForm.get('productiveRoleIds').touched">
                                {{'ACTIVITYTRACKER.PLEASESELECTROLE' | translate}}</span>
                            <span
                                *ngIf="addProductiveAppForm.get('productiveRoleIds').hasError('required')  && addProductiveAppForm.get('productiveRoleIds').untouched">
                                {{'ACTIVITYTRACKER.PLEASESELECTROLE' | translate}}</span>
                        </mat-error>
                    </mat-form-field>

                    <!-- UNPRODUCTIVE ROLES -->
                    <mat-form-field class="full-width" (click)="$event.stopPropagation();">
                        <mat-select formControlName="unproductiveRoleIds" [required]="unproductiveRequired"
                            [disabled]="!unproductiveRequired"
                            placeholder="{{'ACTIVITYTRACKER.UNPRODUCTIVEROLES' | translate}}" multiple>
                            <mat-option #unproductiveSelected (click)="toggleAllRolesUnproductive()" [value]="0">
                                {{ 'PERMISSIONMANAGEMENT.SELECTALL' | translate }}</mat-option>
                            <mat-option [value]="roles.roleId" *ngFor="let roles of unProductiveRoles"
                                (click)="toggleRoleUnproductive()">
                                {{roles.roleName}}
                            </mat-option>
                        </mat-select>
                        <mat-error>
                            <span
                                *ngIf="addProductiveAppForm.get('unproductiveRoleIds').hasError('required')  && addProductiveAppForm.get('unproductiveRoleIds').touched">
                                {{'ACTIVITYTRACKER.PLEASESELECTROLE' | translate}}</span>
                            <span
                                *ngIf="addProductiveAppForm.get('unproductiveRoleIds').hasError('required')  && addProductiveAppForm.get('unproductiveRoleIds').untouched">
                                {{'ACTIVITYTRACKER.PLEASESELECTROLE' | translate}}</span>
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="text-center mb-1 mt-05">
                    <button type="submit" [disabled]="!this.addProductiveAppForm.valid" mat-button mat-raised-button
                        class="mr-05" color="primary">
                        <mat-progress-bar color="primary" mode="indeterminate" *ngIf="savingInProgress">
                        </mat-progress-bar>
                        <fa-icon class="mr-05" icon="save"></fa-icon> {{saveOrUpdate}}
                    </button>
                    <button mat-button mat-raised-button (click)="closeProductiveForm(productiveFormDirective)">
                        <fa-icon class="mr-05" icon="times"></fa-icon> {{'CANCEL' | translate}}
                    </button>
                </div>

            </form>
        </mat-card>
    </sat-popover>
    <!-- EDIT PRODUCTIVE APP POPUP -->

</div>
<mat-card class="p-0"
    *ngIf="(!( canAccess_feature_ViewApplicationUsageReports) || !(canAccess_feature_ViewActivityDashboard))">
    <app-common-message-box
        *ngIf="(!( canAccess_feature_ViewApplicationUsageReports) || !(canAccess_feature_ViewActivityDashboard))"
        textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
    </app-common-message-box>
</mat-card>


<ng-template #AppCatogoryDialogComponent let-data>
    <app-category-dailog [data]=[data]></app-category-dailog>
</ng-template>