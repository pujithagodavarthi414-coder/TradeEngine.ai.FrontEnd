<div class="app-admin-wrap" [dir]='layoutConf.dir'>
  <!-- Header for top navigation layout -->
  <!-- ONLY REQUIRED FOR **TOP** NAVIGATION LAYOUT -->
  <app-header-top *ngIf="layoutConf.navigationPos === 'top'" [notificPanel]="sidenav">
  </app-header-top>
  <ngx-ui-loader fgsSize="180" [fgsType]="spinnerType" color="primary"></ngx-ui-loader>
  <!-- Main Container -->
  <mat-sidenav-container [dir]='layoutConf.dir' class="app-admin-container app-side-nav-container mat-drawer-transition"
    [ngClass]="{
    'navigation-top': layoutConf.navigationPos === 'top',
    'sidebar-full': layoutConf.sidebarStyle === 'full',
    'sidebar-compact': layoutConf.sidebarStyle === 'compact' && layoutConf.navigationPos === 'side',
    'sidebar-compact-big': layoutConf.sidebarStyle === 'compact-big' && layoutConf.navigationPos === 'side',
    'layout-intransition': layoutConf.layoutInTransition,
    'sidebar-opened': layoutConf.sidebarStyle !== 'closed' && layoutConf.navigationPos === 'side',
    'sidebar-closed': layoutConf.sidebarStyle === 'closed',
    'fixed-topbar': layoutConf.topbarFixed && layoutConf.navigationPos === 'side'
  }">
    <!-- SIDEBAR -->
    <!-- ONLY REQUIRED FOR **SIDE** NAVIGATION LAYOUT -->
    <!-- <app-sidebar-side *ngIf="layoutConf.navigationPos === 'side'"></app-sidebar-side> -->

    <!-- Top navigation layout (navigation for mobile screen) -->
    <!-- ONLY REQUIRED FOR **TOP** NAVIGATION MOBILE LAYOUT -->
    <app-sidebar-top *ngIf="layoutConf.navigationPos === 'top' && layoutConf.isMobile"></app-sidebar-top>

    <!-- App content -->
    <div class="main-content-wrap" [perfectScrollbar]="scrollConfig" [disabled]="layoutConf.topbarFixed">
      <!-- Header for side navigation layout -->
      <!-- ONLY REQUIRED FOR **SIDE** NAVIGATION LAYOUT -->
      <app-header-side (opened)="Opened($event)" [notificPanel]="sidenav">
      </app-header-side>

      <!-- <div class="mr-1" *ngIf="!dashboardPage">
        <gc-userstory-summary *ngIf="userStory" style="width: -webkit-fill-available;background-color: beige;"
          [userStory]="userStory" [isSubTasksPage]=false [isLoading]="(anyOperationInProgressForAutoLogging$|async)"
          [isUserStoriesPage]=false (updateAutoLog)="LogAction($event)">
        </gc-userstory-summary>
        <div *ngIf="!userStory">
          You are not started any userstory yet! Please start work!!
        </div>
        <div class="ml-05">
          <fa-icon class="caret-size" style="color:#3da8b5" icon="caret-down" [satPopoverAnchorFor]="recentUserStory"
             (click)="recentUserStory.toggle()"></fa-icon>
        </div>
        <sat-popover #recentUserStory hasBackdrop  backdropClass="us-popover"> 
            <mat-card>
          <div *ngFor="let userStory of (userStories$ | async | slice:0:5)" style="min-width: 1000px;" class="view-us">
            <gc-userstory-summary style="width: -webkit-fill-available;background-color: beige;"
              [userStory]="userStory" [isSubTasksPage]=false [isLoading]="(anyOperationInProgressForAutoLogging$|async)"
              [isUserStoriesPage]=true (updateAutoLog)="LogAction($event)" [isShow]="false" (close)="recentUserStory.close()">
            </gc-userstory-summary>
          </div>
        </mat-card>
        </sat-popover>
      </div> -->

      <div class="rightside-content-hold" [perfectScrollbar]="scrollConfig" [disabled]="!layoutConf.topbarFixed"
        [ngClass]="{'blur-on-opened': display}" [ngClass]="{'show-in-dashboard':dashboardPage}">
        <!-- <div fxLayout="row" fxLayoutAlign="center center" class="mr-1" *ngIf="!dashboardPage" [ngStyle]="{'margin-left': '90px'}" 
      [ngStyle]="{'background-color': userStory ? 'beige' : 'none' }" style="margin-right:90px !important">
        <gc-userstory-summary fxFlex="90" *ngIf="userStory" style="width: -webkit-fill-available;background-color: beige;"
          [userStory]="userStory" [isSubTasksPage]=false [isLoading]="(anyOperationInProgressForAutoLogging$|async)"
          [isUserStoriesPage]=false (updateAutoLog)="LogAction($event)">
        </gc-userstory-summary>
        <mat-card *ngIf="!userStory" style="padding: 10px;left: -75px;">
        <span>
          You are not started any {{ userstory | softLabelsPipe : softLabels}} yet! Please start work!!
        </span>
        <span class="ml-05">
          <fa-icon class="caret-size" style="color:#3da8b5" icon="caret-down" [satPopoverAnchorFor]="recentUserStory"
             (click)="recentUserStory.toggle()"></fa-icon>
        </span>
        </mat-card>
         <mat-progress-bar color="primary" mode="indeterminate" *ngIf="anyOperationInProgressForAutoLogging$|async">
        </mat-progress-bar> -->
        <!-- <div fxFlex class="ml-05" *ngIf="userStory">
          <fa-icon class="caret-size" style="color:#3da8b5" icon="caret-down" [satPopoverAnchorFor]="recentUserStory"
             (click)="recentUserStory.toggle()"></fa-icon>
        </div>
        <sat-popover #recentUserStory hasBackdrop  backdropClass="us-popover"> 
            <mat-card>
          <div *ngFor="let userStory of (userStories$ | async | slice:0:5)" style="min-width: 1000px;" class="view-us">
            <gc-userstory-summary style="width: -webkit-fill-available;background-color: beige;"
              [userStory]="userStory" [isSubTasksPage]=false [isLoading]="(anyOperationInProgressForAutoLogging$|async)"
              [isUserStoriesPage]=true (updateAutoLog)="LogAction($event)" [isShow]="false" (close)="recentUserStory.close()">
            </gc-userstory-summary>
          </div>
        </mat-card>
        </sat-popover>
      </div> -->
        <!-- View Loader -->
        <div class="view-loader" *ngIf="isModuleLoading">
          <div class="spinner">
            <div class="double-bounce1 mat-bg-accent"></div>
            <div class="double-bounce2 mat-bg-primary"></div>
          </div>
        </div>
        <!-- View outlet -->
        <div id="btrak-preloader" *ngIf="loading">
          <span class="preloading-text">
            {{ 'LOADINGPLEASEWAIT' | translate }} ({{totalLoadingTime}} {{ 'SECONDS' | translate }})
          </span>
          <div id="btrak-loader" *ngIf="loading">
          </div>
        </div>
        <div *ngIf="!loading">
          <router-outlet></router-outlet>
        </div>
      </div>
    </div>
    <!-- View overlay for mobile navigation -->
    <div class="sidebar-backdrop" [ngClass]="{'visible': layoutConf.sidebarStyle !== 'closed' && layoutConf.isMobile}"
      (click)="closeSidebar()"></div>

    <!-- Notificaation bar -->
    <mat-sidenav #sidenav mode="side" opened class="example-sidenav" [fixedInViewport]="true" [fixedTopGap]="45"
      [fixedBottomGap]="0" class="side-nav-color" id="style-1">
      <app-sidebar></app-sidebar>
    </mat-sidenav>
  </mat-sidenav-container>
</div>