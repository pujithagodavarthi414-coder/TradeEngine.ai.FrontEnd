<div class="full-height" *ngIf="(canAccess_feature_ManageCompanySettings)" class="gridster-noset">
  <mat-card class="p-0 canteen-manage m-0">
    <mat-card-title class="full-width data-table-header drag-handler">
      <div fxLayout="row wrap" fxLayout.xs="column">
        <div class="card-title-text p-05 ml-05" fxFlex="30" fxLayoutAlign="start center">
          <span fxFlex="100" class="hide-content-overflow"
            matTooltip="{{ 'COMPANYSETTINGS.COMPANYSETTINGSTITLE' | translate | titlecase }}">{{
            'COMPANYSETTINGS.COMPANYSETTINGSTITLE' | translate | titlecase }}</span>
        </div>
        <div fxFlex fxLayout="row" fxLayout.xs="column">
          <div fxFlex="calc(100% - 220px)" fxLayoutAlign="end center" fxLayoutAlign.xs="start center">
            <!-- <mat-slide-toggle
              [matTooltip]="(isArchivedTypes === true) ? ('SWITCHTOUNARCHIVE' | translate) : ('SWITCHTOARCHIVE' | translate)"
              class="mr-1 archive-switch" [(ngModel)]="isArchivedTypes" [checked]="isArchivedTypes"
              (change)="getAllCompanySettings()"></mat-slide-toggle> -->
          </div>
          <div fxFlex="210px" fxFlex.xs="60px" class="search_goalinput ml-1" fxLayoutAlign="end center"
            style="right:10px;" fxLayoutAlign.xs="start center">
            <div fxLayoutAlign="end center" fxLayoutAlign.xs="start center">
              <mat-form-field class="full-width">
                <input class="search_goal" matInput placeholder="{{'HRMANAGAMENT.SEARCH' | translate}}"
                  [(ngModel)]="searchText" (input)="filterByName($event)">
              </mat-form-field>
            </div>
            <span class="softlabels-close" fxLayoutAlign="end center" fxLayoutAlign.xs="start center">
              <span *ngIf="!searchText"></span>
              <mat-icon *ngIf="searchText" class="icon-button mr-05" aria-hidden="false" (click)="closeSearch()"
                style="cursor:pointer">
                close</mat-icon>
            </span>
          </div>
        </div>
      </div>
      <mat-divider></mat-divider>
    </mat-card-title>
  </mat-card>

  <div class="activity-data no-drag" id="widget-scroll-id">
    <div class="profile-actions mb-1">
      <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="30px" class="pl-1">

        <!-- MAIN LOGO -->
        <div class="p-1" fxLayout="column" *ngIf="mainLogo && loadLogo">
          <mat-error>
            <div fxLayoutAlign="center center" *ngIf="showExtensionError">
              {{'PLEASEUPLOADALLOWEDEXTENSIONPNGJPG' | translate}}</div>
          </mat-error>
          <div fxLayoutAlign="center center"><label class=''>Main Logo</label></div>
          <div fxLayoutAlign="center center">
            <app-avatar [src]="mainLogo | fetchSizedAndCachedImage: '125':''" [isRound]="true" size="125">
            </app-avatar>
          </div>
          <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center center" fxLayoutGap="6px">
            <button class="mt-1" mat-button mat-raised-button color="primary" [disabled]="isMainLogouploadInprogrss"
              (click)="logouploader.click()">
              <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isMainLogouploadInprogrss">
              </mat-progress-bar>
              {{'HRMANAGAMENT.UPLOAD' | translate}}
            </button>
            <button class="mt-1" mat-button mat-raised-button [disabled]="isMainLogouploadInprogrss"
              (click)="resetLogoToDefault('mainlogo')">
              Reset to default
            </button>
          </div>
          <input hidden #logouploader type="file" mat-button mat-raised-button color="primary"
            matTooltip="{{'HRMANAGAMENT.UPLOADPHOTO' | translate}}" class="mt-1 mb-1" value="upload"
            accept=".jpeg,.jpg,.png,.webp" (change)="uploadEventHandler($event.target.files,'mainlogo')">
          <span fxFlex="8px"></span>
        </div>
        <!-- MINI LOGO -->
        <div class="p-1" fxLayout="column" *ngIf="miniLogo && loadLogo">
          <mat-error>
            <div fxLayoutAlign="center center" *ngIf="showMiniLogoExtensionError">
              {{'PLEASEUPLOADALLOWEDEXTENSIONPNGJPG' | translate}}</div>
          </mat-error>
          <div fxLayoutAlign="center center"><label class=''>Mini Logo</label></div>
          <div fxLayoutAlign="center center">
            <app-avatar [src]="miniLogo | fetchSizedAndCachedImage: '125':''" [isRound]="true" size="125">
            </app-avatar>
          </div>
          <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center center" fxLayoutGap="6px">
            <button class="mt-1" mat-button mat-raised-button color="primary" [disabled]="isMiniLogouploadInprogrss"
              (click)="uploader.click()">
              <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isMiniLogouploadInprogrss">
              </mat-progress-bar>
              {{'HRMANAGAMENT.UPLOAD' | translate}}
            </button>
            <button class="mt-1" mat-button mat-raised-button [disabled]="isMiniLogouploadInprogrss"
              (click)="resetLogoToDefault('minilogo')">
              Reset to default
            </button>
          </div>
          <input hidden #uploader type="file" mat-button mat-raised-button color="primary"
            matTooltip="{{'HRMANAGAMENT.UPLOADPHOTO' | translate}}" class="mt-1 mb-1" value="upload"
            accept=".jpeg,.jpg,.png,.webp" (change)="uploadEventHandler($event.target.files,'minilogo')">
          <span fxFlex="8px"></span>
        </div>

        <!-- payslip logo-->
        <div class="p-1" fxLayout="column" *ngIf="paySlipLogo && loadLogo">
          <mat-error>
            <div fxLayoutAlign="center center" *ngIf="showExtensionError">
              {{'PLEASEUPLOADALLOWEDEXTENSIONPNGJPG' | translate}}</div>
          </mat-error>
          <div fxLayoutAlign="center center"><label class=''>Pay slip Logo</label></div>
          <div fxLayoutAlign="center center">
            <app-avatar [src]="paySlipLogo | fetchSizedAndCachedImage: '125':''" [isRound]="true" size="125">
            </app-avatar>
          </div>
          <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center center" fxLayoutGap="6px">
            <button class="mt-1" mat-button mat-raised-button color="primary" [disabled]="isPaySlipLogoloadInProgress"
              (click)="logouploader.click()">
              <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isPaySlipLogoloadInProgress">
              </mat-progress-bar>
              {{'HRMANAGAMENT.UPLOAD' | translate}}
            </button>
            <button class="mt-1" mat-button mat-raised-button [disabled]="isPaySlipLogoloadInProgress"
              (click)="resetLogoToDefault('paysliplogo')">
              Reset to default
            </button>
          </div>
          <input hidden #logouploader type="file" mat-button mat-raised-button color="primary"
            matTooltip="{{'HRMANAGAMENT.UPLOADPHOTO' | translate}}" class="mt-1 mb-1" value="upload"
            accept=".jpeg,.jpg,.png,.webp" (change)="uploadEventHandler($event.target.files,'paysliplogo')">
          <span fxFlex="8px"></span>
        </div>



        <!-- MAIN LOGO -->
        <div class="p-1 text-center" fxLayout="column" *ngIf="isRemoteSoftware">
          <mat-error>
            <div fxLayoutAlign="center center" *ngIf="showLoanTermsDocumentExtensionError">
              {{'PLEASEUPLOADALLOWEDEXTENSIONDOC' | translate}}</div>
          </mat-error>
          <div fxLayoutAlign="center center"><label class=''>Loan terms document</label></div>
          <a *ngIf="loanTermsDocument != null"
            matTooltip="{{'PAYROLLMONTHLYDETAILS.LOANTERMSDOCUMENTTEXT' | translate}}" href="{{loanTermsDocument}}">Loan
            document</a>
          <span *ngIf="loanTermsDocument == null || loanTermsDocument == ''">{{'NOFILESTODISPLAY' | translate}} </span>
          <div class="uploadloan-document" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center center"
            fxLayoutGap="6px">
            <button class="mt-1" mat-button mat-raised-button color="primary"
              [disabled]="isLoanTermsDocumentUploadInprogress" (click)="loandocuploader.click()">
              <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isLoanTermsDocumentUploadInprogress">
              </mat-progress-bar>
              {{'HRMANAGAMENT.UPLOAD' | translate}}
            </button>
            <button class="mt-1" mat-button mat-raised-button [disabled]="isLoanTermsDocumentUploadInprogress"
              (click)="resetLogoToDefault('LoanTermsDocument')">
              Reset to default
            </button>
          </div>
          <input hidden #loandocuploader type="file" mat-button mat-raised-button color="primary" class="mt-1 mb-1"
            value="Upload loan terms document" accept=".doc,.docx"
            (change)="uploadEventHandler($event.target.files,'LoanTermsDocument')">
          <span fxFlex="8px"></span>
        </div>

        <!-- Stamp Document -->
        <div class="p-1 text-center" fxLayout="column">
          <mat-error>
            <div fxLayoutAlign="center center" *ngIf="showStampDocumentExtensionError">
              {{'PLEASEUPLOADALLOWEDEXTENSIONPNGJPG' | translate}}</div>
          </mat-error>
          <div fxLayoutAlign="center center"><label class=''>Stamp document</label></div>
          <div fxLayoutAlign="center center">
            <app-avatar *ngIf="stampDocument" [src]="stampDocument | fetchSizedAndCachedImage: '125':''"
              [isRound]="true" size="125">
            </app-avatar>
          </div>
          <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center center" fxLayoutGap="6px">
            <button class="mt-1" mat-button mat-raised-button color="primary"
              [disabled]="isStampDocumentUploadInProgress" (click)="stampdocuploader.click()">
              <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isStampDocumentUploadInProgress">
              </mat-progress-bar>
              {{'HRMANAGAMENT.UPLOAD' | translate}}
            </button>
            <button class="mt-1" mat-button mat-raised-button [disabled]="isStampDocumentUploadInProgress"
              (click)="resetLogoToDefault('stampDocument')">
              Reset to default
            </button>
          </div>
          <input hidden #stampdocuploader type="file" mat-button mat-raised-button color="primary" class="mt-1 mb-1"
            value="Upload stamp document" accept=".jpeg,.jpg,.png,.webp"
            (change)="uploadEventHandler($event.target.files,'stampDocument')">
          <span fxFlex="8px"></span>
        </div>

        <!-- TIME SHEET SUBMISSION -->
        <div class="p-1 ml-4" fxLayout="column" class="theme-menu-class">
          <form [formGroup]="timeSheetSubmissionForm" #timeSheetFormDirective="ngForm" novalidate
            (submit)="timeSheetSubmissionForm.valid && UpsertTimeSheetSubmission()">
            <div fxLayoutAlign="center center"><label class=''>{{ 'TIMESHEETSUBMISSION.TIMESHEETSUBMISSION' | translate
                }}</label></div>
            <div class="mt-1">
              <mat-form-field class="full-width">
                <mat-select formControlName="timeSheetFrequencyId"
                  placeholder="{{ 'VIEWTIMESHEET.TIMESHEETSUBMISSION' | translate | softLabelsPipe : softLabels }}"
                  (selectionChange)="getTimeSheetFrequency($event.value)" [(ngModel)]="selectedFrequecny" required>
                  <mat-option *ngFor="let timeSheetFrequency of timeSheetFrequencyList" value="option"
                    [value]="timeSheetFrequency.timeSheetFrequencyId">
                    {{timeSheetFrequency.timeSheetFrequencyName}}</mat-option>
                </mat-select>
                <mat-error
                  *ngIf="timeSheetSubmissionForm.get('timeSheetFrequencyId').hasError('required') && timeSheetSubmissionForm.get('timeSheetFrequencyId').touched">
                  {{ 'FEEDTIMESHEET.SELECTFREQUENCYALERT' | translate }}
                </mat-error>
              </mat-form-field>
            </div>
            <div class="mt-1">
              <mat-form-field class="full-width">
                <input matInput [matDatepicker]="picker" [(ngModel)]="selectedDateValue" (click)="picker.open()"
                  [readonly]="true" placeholder="{{ 'PRODUCTIVITYDASHBOARD.SELECTDATE' | translate }}" [min]="minDate"
                  autocomplete="off" (dateChange)="getDateChange($event)" required formControlName="dateFrom"
                  disabled="true">
                <mat-error
                  *ngIf="timeSheetSubmissionForm.get('dateFrom').hasError('required') && timeSheetSubmissionForm.get('dateFrom').touched">
                  {{ 'FEEDTIMESHEET.SELECTDATEALERT' | translate }}
                </mat-error>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker disabled="false"></mat-datepicker>
              </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center center" fxLayoutGap="6px">
              <button class="mt-1" mat-button mat-raised-button color="primary" type="submit">
                {{'APP.APPLY'| translate}}
              </button>
              <button class="mt-1" mat-button mat-raised-button type="button"
                (click)="resetTimeSheetSubmissionToDefault()">
                {{'PERMISSIONMANAGEMENT.CANCEL' | translate }}
              </button>
            </div>
          </form>
        </div>

        <!-- TIME SHEET INTERVAL -->
        <!-- <div class="p-1 ml-4" fxLayout="column" class="theme-menu-class">
          <form [formGroup]="timeSheetIntervalForm" #timeSheetFormDirective="ngForm" novalidate
            (submit)="timeSheetIntervalForm.valid && UpsertTimeSheetInterval()">
            <div fxLayoutAlign="center center"><label class=''>Timesheet interval</label></div>
            <div class="mt-1">
              <mat-form-field class="full-width">
                <mat-select formControlName="timeSheetFrequencyId"
                  placeholder="{{ 'VIEWTIMESHEET.TIMESHEETSUBMISSION' | translate | softLabelsPipe : softLabels }}"
                  (selectionChange)="getTimeSheetFrequency($event.value)" [(ngModel)]="selectedIntervalFrequency" required>
                  <mat-option *ngFor="let timeSheetFrequency of timeSheetFrequencyList" value="option"
                    [value]="timeSheetFrequency.timeSheetFrequencyId">
                    {{timeSheetFrequency.timeSheetFrequencyName}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center center" fxLayoutGap="6px">
              <button class="mt-1" mat-button mat-raised-button color="primary" type="submit">
                {{'APP.APPLY'| translate}}
              </button>
              <button class="mt-1" mat-button mat-raised-button type="button" (click)="resetTimeSheetSubmissionToDefault()">
                {{'PERMISSIONMANAGEMENT.CANCEL' | translate }}
              </button>
            </div>
          </form>
        </div> -->
      </div>
    </div>

    <!-- THEME -->
    <div class="p-1" fxLayout="column" class="theme-menu-class ml-1 pb-1">
      <div fxLayoutAlign="center center"><label class=''>Theme</label></div>
      <mat-grid-list class="theme-list" cols="5" rowHeight="50px">
        <mat-grid-tile *ngFor="let theme of egretThemes" (click)="changeTheme(theme)"
          [style.background]="theme.baseColor" class="theme-icon-border">
          <div mat-menu-item [title]="theme.name">
            <mat-icon class="active-icon" *ngIf="theme.isActive">check</mat-icon>
          </div>
        </mat-grid-tile>
      </mat-grid-list>
      <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center center" fxLayoutGap="6px">
        <button class="mt-1" mat-button mat-raised-button color="primary" (click)="ApplySelectedTheme()"
          [disabled]="isAnyOperationIsInprogress">
          Apply
        </button>
        <button class="mt-1" mat-button mat-raised-button (click)="resetThemeToDefault()"
          [disabled]="isAnyOperationIsInprogress">
          Cancel
        </button>
      </div>
    </div>

    <!-- SIZE LIMIT/USED MESSAGE  -->
    <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutAlign="center center">
      <span *ngIf="!documentsSettings?.isSizeLimitExceeded && !documentsSettings?.isToRestrictUpload">
        <h4>{{'COMPANYSETTINGS.DOCUMENTSSIZEINFOMESSAGE' | translate}} {{documentsSettings?.sizeAllocated | filesize}}
          {{documentsSettings?.sizeUsed | filesize}} {{'COMPANYSETTINGS.ASOFNOW' | translate}}</h4>
      </span>
      <span *ngIf="documentsSettings?.isSizeLimitExceeded && !documentsSettings?.isToRestrictUpload">
        <h4 class="warning-message">{{'COMPANYSETTINGS.DOCUMENTSIZEWARNINGMESSAGE' | translate}}
          {{documentsSettings?.extendedSize | filesize}}
          ({{'COMPANYSETTINGS.SIZEUSED' | translate}} - {{documentsSettings?.sizeUsed | filesize}})
        </h4>
      </span>
      <span *ngIf="documentsSettings?.isSizeLimitExceeded && documentsSettings?.isToRestrictUpload">
        <h4 class="error-message">{{'COMPANYSETTINGS.DOCUMENTSIZEERRORMESSAGE' | translate}}
          ({{'COMPANYSETTINGS.SIZEUSED' | translate}} - {{documentsSettings?.sizeUsed | filesize}})</h4>
      </span>
    </div>

    <!-- DATA TABLE -->
    <div class="m-0 p-0" *ngIf="!isFromSupportUser">
      <ngx-datatable class="btrak" [scrollbarH]="true" [columnMode]="'force'" [headerHeight]="35" [footerHeight]="35"
        [rowHeight]="35" [limit]="50" [rows]="company" [loadingIndicator]="isAnyOperationIsInprogress"
        [messages]="{emptyMessage:('NODATATODISPLAY' | translate), totalMessage: 'TOTAL' | translate}">
        <ngx-datatable-column minWidth="150" name="{{ 'COMPANYSETTINGS.KEY' | translate | softLabelsPipe :softLabels }}"
          [flexGrow]="1" [sortable]="true" prop="key">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{ row?.key }}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column minWidth="150" name="{{ 'COMPANYSETTINGS.VALUE' | translate }}" [flexGrow]="1"
          [sortable]="true" prop="value">
          <ng-template let-row="row" ngx-datatable-cell-template>
            <label *ngIf="(row?.value != '0' && row?.value != '1') && row.key != 'DocumentsSizeLimit'">{{ row?.value
              }}</label>
            <label *ngIf="(row?.value != '0' && row?.value != '1') && row.key == 'DocumentsSizeLimit'">{{ row?.value |
              filesize}}</label>
            <mat-checkbox [(ngModel)]="isChecked" [disabled]="true" *ngIf="row?.value == '1'"></mat-checkbox>
            <mat-checkbox [(ngModel)]="isNotChecked" [disabled]="true" *ngIf="row?.value == '0'"></mat-checkbox>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column minWidth="150" name="{{ 'COMPANYSETTINGS.DESCRIPTION' | translate }}" [flexGrow]="1"
          [sortable]="true" prop="description">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{ row?.description }}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column minWidth="150" name="{{'ACTIONS'|translate}}" [flexGrow]="1" [sortable]="false">
          <ng-template let-row="row" ngx-datatable-cell-template>
            <button class="text-center" title="{{ 'COMPANYSETTINGS.EDITCOMPANYSETTINGS' | translate }}"
              [satPopoverAnchorFor]="upsertCompanySettingsPopover" #upsertCompanySettingsPopUp="satPopoverAnchor"
              (click)="editCompanySettingPopupOpen(row,upsertCompanySettingsPopUp)" *ngIf="!isArchivedTypes"
              mat-icon-button>
              <fa-icon icon="edit" style="cursor: pointer;" class="mat-color-accent"></fa-icon>
            </button>
          </ng-template>
        </ngx-datatable-column>
      </ngx-datatable>
    </div>

    <!-- MODULES LIST -->
    <div class="m-1" *ngIf="isModulesLoaded">
      <label class=''>Modules list</label>
      <table>
        <tr>
          <th class="p-05">Module name</th>
          <th class="p-05" *ngIf="!isFromSupportUser">Is selected</th>
          <th class="p-05" *ngIf="isFromSupportUser">Is enabled</th>
        </tr>
        <tr *ngFor="let option of modulesList; let i = index">
          <td class="p-05">{{option.moduleName | translate | softLabelsPipe :softLabels}}</td>
          <td class="p-05 text-center" *ngIf="!isFromSupportUser">
            <mat-checkbox name="default-{{ option.key }}" (change)="onChange(option.moduleId, $event)"
              id="checkbox-{{ option.moduleId }}" value="{{ option.moduleId }}" [checked]="option.isActive">
            </mat-checkbox>
          </td>
          <td class="p-05 text-center" *ngIf="isFromSupportUser">
            <mat-checkbox name="default-{{ option.key }}" (change)="onEnabledModuleChange(option.moduleId, $event)"
              id="checkbox-{{ option.moduleId }}" value="{{ option.moduleId }}" [checked]="option.isEnabled">
            </mat-checkbox>
          </td>
        </tr>
      </table>
      <button type="button" mat-button mat-raised-button color="primary" class="mr-1" (click)="upsertCompanyModule()"
        [disabled]="isModulesOperationInprogress">
        <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isModulesOperationInprogress">
        </mat-progress-bar>
        <fa-icon class="mr-05" icon="check"></fa-icon> {{ 'SAVE' | translate }}
      </button>
    </div>
  </div>

  <!--Edit COMPANYSETTINGS dialog-->
  <sat-popover backdropClass="backdrop-color" #upsertCompanySettingsPopover [autoFocus]="false" hasBackdrop
    [restoreFocus]="false" [interactiveClose]="false" scrollStrategy="reposition" verticalAlign="below"
    horizontalAlign="end">
    <mat-card class="p-0 mr-0">
      <mat-card-title class="text-center">
        <div class="card-title-text  mat-bg-primary p-05 mb-1">{{ companysettings | translate }}
        </div>
      </mat-card-title>
      <mat-card-content class="P-05">
        <form [formGroup]="companysettingForm" #formDirective="ngForm" novalidate
          (submit)="companysettingForm.valid && upsertCompanysettings(formDirective)">
          <div>
            <div fxLayout="row" fxLayoutGap="10px" class="p-05">
              <div fxFlex="49">
                <mat-form-field>
                  <input matInput formControlName="key" placeholder="{{ 'COMPANYSETTINGS.KEY' | translate }}" required>
                  <mat-error class="P-06" *ngIf="companysettingForm.get('key').hasError('maxlength')">
                    {{ 'COMPANYSETTINGS.KEYTYPEMAXLENGTHERROR' | translate }}</mat-error>
                  <mat-error class="P-06"
                    *ngIf="companysettingForm.get('key').hasError('required') && companysettingForm.get('key').touched">
                    {{ 'COMPANYSETTINGS.REQUIREDERROR' | translate }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div fxFlex="49"
                *ngIf="localValue != '1' && localValue != '0' && !isForRolesDropdown && !isForLanguageDropdown && !fileSystemDropDown">
                <mat-form-field>
                  <input matInput formControlName="value" placeholder="{{ 'COMPANYSETTINGS.VALUE' | translate }}"
                    required>
                  <mat-error class="P-06" *ngIf="companysettingForm.get('value').hasError('maxlength')">
                    {{ 'COMPANYSETTINGS.VALUEMAXLENGTHERROR' | translate }}</mat-error>
                  <mat-error class="P-06"
                    *ngIf="companysettingForm.get('value').hasError('required') && companysettingForm.get('value').touched">
                    {{ 'COMPANYSETTINGS.REQUIREDERROR' | translate }}
                  </mat-error>
                  <mat-error class="P-06"
                    *ngIf="companysettingForm.get('value').hasError('pattern') && companysettingForm.get('value').touched">
                    {{'COMPANYSETTINGS.REQUIREDPATTERN' | translate}}
                  </mat-error>
                </mat-form-field>
              </div>
              <div fxFlex="49" class="ml-5 mt-1"
                *ngIf="(localValue == '1' || localValue == '0') && !isForRolesDropdown && !isForLanguageDropdown && !fileSystemDropDown">
                <mat-checkbox formControlName="checkedValue">
                  {{'COMPANYSETTINGS.VALUE' | translate }}</mat-checkbox>
              </div>
              <mat-form-field fxFlex="49" class="ml-1" *ngIf="isForRolesDropdown">
                <mat-select formControlName="selectedValue" placeholder="{{ 'USERMANAGEMENT.ROLE' | translate }}"
                  required>
                  <mat-option [value]="roles.roleId" *ngFor="let roles of rolesDropDown">
                    {{ roles.roleName }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field fxFlex="49" class="ml-1" *ngIf="isForLanguageDropdown">
                <mat-select formControlName="selectedLanguage" placeholder="{{ 'USERMANAGEMENT.LANGUAGE' | translate }}"
                  required>
                  <mat-option [value]="language.code" *ngFor="let language of companyLanguages">
                    {{language.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field fxFlex="49" class="ml-1" *ngIf="fileSystemDropDown">
                <mat-select formControlName="selectedFileSystem"
                  placeholder="{{ 'USERMANAGEMENT.FILESYSTEM' | translate }}" required>
                  <mat-option [value]="fileSystem.code" *ngFor="let fileSystem of companyFileSystems">
                    {{fileSystem.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div>
              <div class="p-05">
                <mat-form-field class="full-width">
                  <input matInput formControlName="description"
                    placeholder="{{ 'COMPANYSETTINGS.DESCRIPTION' | translate }}" required>
                  <mat-error class="P-06" *ngIf="companysettingForm.get('description').hasError('maxlength')">
                    {{ 'COMPANYSETTINGS.DESCRIPTIONTYPEMAXLENGTHERROR' | translate }}</mat-error>
                  <mat-error class="P-06"
                    *ngIf="companysettingForm.get('description').hasError('required') && companysettingForm.get('description').touched">
                    {{ 'COMPANYSETTINGS.REQUIREDERROR' | translate }}
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            <mat-error *ngIf="isThereAnError">{{ validationMessage }}</mat-error>
            <div class="mt-1 text-center">
              <button type="submit" mat-button mat-raised-button color="primary" class="mr-1"
                [disabled]="!companysettingForm.valid||isAnyOperationIsInprogress">
                <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isAnyOperationIsInprogress">
                </mat-progress-bar>
                <fa-icon class="mr-05" icon="check"></fa-icon> {{ 'SAVE' | translate }}
              </button>
              <button mat-button mat-raised-button (click)="closeUpsertCompanySettingPopup(formDirective)"
                type="button">
                <fa-icon class="mr-05" icon="times"></fa-icon>
                {{ 'CANCEL' | translate }}
              </button>
            </div>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </sat-popover>
  <!--Edit COMAPN dialog-->

  <!--Delete COMPANYSETTINGS dialog-->
  <sat-popover backdropClass="backdrop-color" #deleteCompanySettingsPopover hasBackdrop backdropClass="backdrop-color"
    verticalAlign="below" horizontalAlign="end">
    <mat-card class="p-0">
      <mat-card-title class="text-center mat-bg-primary">
        <div class="card-title-text mb-1" *ngIf="isCompanySettingArchived">
          {{ 'COMPANYSETTINGS.ARCHIVECOMPANYSETTINGSTITLE' | translate }}</div>
        <div class="card-title-text mb-1" *ngIf="!isCompanySettingArchived">
          {{ 'COMPANYSETTINGS.UNARCHIVECOMPANYSETTINGSTITLE' | translate }}</div>
      </mat-card-title>
      <mat-card-content>
        <div class="card-content mb-1" *ngIf="isCompanySettingArchived">
          {{ 'COMPANYSETTINGS.ARCHIVECOMPANYSETTINGSTEXT' | translate }}
        </div>
        <div class="card-content mb-1" *ngIf="!isCompanySettingArchived">
          {{ 'COMPANYSETTINGS.UNARCHIVECOMPANYSETTINGSTEXT' | translate }}
        </div>
        <mat-error *ngIf="isThereAnError">{{ validationMessage }}</mat-error>
        <div class="text-center">
          <button class="mr-1" *ngIf="isCompanySettingArchived" mat-button mat-raised-button color="primary"
            [disabled]="isAnyOperationIsInprogress" (click)="deleteCompanysettings();">
            <fa-icon class="mr-05" icon="archive"></fa-icon> {{ 'ARCHIVE' | translate }}
          </button>
          <button class="mr-1" *ngIf="!isCompanySettingArchived" mat-button mat-raised-button color="primary"
            [disabled]="isAnyOperationIsInprogress" (click)="deleteCompanysettings();">
            <fa-icon class="mr-05" icon="check"></fa-icon> {{ 'YES' | translate }}
          </button>
          <button mat-button mat-raised-button (click)="closeDeleteCompanySettingDialog();">
            <fa-icon class="mr-05" icon="times"></fa-icon> {{ 'CANCEL' | translate }}
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </sat-popover>
  <!--Delete COMPANYSETTINGS dialog-->
</div>

<app-common-message-box *ngIf="!(canAccess_feature_ManageCompanySettings)"
  textToDisplay="{{ 'PERMISSIONMESSAGE' | translate }}">
</app-common-message-box>