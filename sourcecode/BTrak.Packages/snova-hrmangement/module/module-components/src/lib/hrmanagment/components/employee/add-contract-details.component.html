<mat-card-title class="text-center">
    <div class="card-title-text mat-bg-primary p-05" fxLayout="row">
        <div fxFlex fxLayoutAlign="center">
            <span *ngIf="!employeeContractDetailsId">{{'HRMANAGAMENT.ADDCONTRACTDETAILS' | translate}}</span>
            <span *ngIf="employeeContractDetailsId">{{'HRMANAGAMENT.EDITCONTRACTDETAILS' | translate}}</span>
        </div>
    </div>
</mat-card-title>
<form [formGroup]="employeeContractDetailsForm" novalidate #formDirective="ngForm" class="hr-apps-scroll" id="style-1"
    (submit)="employeeContractDetailsForm.valid && saveEmployeeContractDetails(formDirective)">
    <div class="p-1">
        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="15px" fxLayoutGap.xs="0px">
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <mat-select formControlName="contractTypeId"
                        placeholder="{{'HRMANAGAMENT.CONTRACTTYPE' | translate}}" required>
                        <mat-option value="option" *ngFor="let contractType of contractTypeDetailsList$ | async"
                            [value]="contractType.contractTypeId">
                            {{contractType.contractTypeName}}
                        </mat-option>
                    </mat-select>
                    <mat-error>
                        <span
                            *ngIf="employeeContractDetailsForm.get('contractTypeId').hasError('required') && employeeContractDetailsForm.get('contractTypeId').touched">
                            {{'HRMANAGAMENT.SELECTCONTRACTTYPE' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput formControlName="contractedHours"
                        placeholder="{{'HRMANAGAMENT.CONTRACTEDHOURS' | translate}}" mobileNumber autocomplete="off">
                    <mat-error>
                        <span *ngIf="employeeContractDetailsForm.get('contractedHours').hasError('maxlength')">
                            {{'HRMANAGAMENT.SHOULDNOTEXCEED9CHARACTERS' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="15px" fxLayoutGap.xs="0px">
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput [matDatepicker]="picker" (click)="picker.open()"
                        placeholder="{{'HRMANAGAMENT.STARTDATE' | translate}}" formControlName="startDate"
                        [max]="employeeContractDetailsForm.get('endDate').value" required autocomplete="off">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                    <mat-error>
                        <span
                            *ngIf="!employeeContractDetailsForm.get('startDate').hasError('required') && employeeContractDetailsForm.get('startDate').touched">
                            {{'HRMANAGAMENT.PLEASESELECTSTARTDATE' | translate}}</span>
                        <span
                            *ngIf="employeeContractDetailsForm.get('startDate').hasError('matDatepickerMin')">{{'HRMANAGAMENT.PLEASEENTERDATEGREATERTHAN' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput [matDatepicker]="picker1" (click)="picker1.open()"
                        placeholder="{{'HRMANAGAMENT.ENDDATE' | translate}}" formControlName="endDate"
                        [min]="employeeContractDetailsForm.get('startDate').value" [readonly]="true" autocomplete="off">
                    <mat-datepicker-toggle matSuffix [for]="picker1">
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                    <mat-error>
                        <span
                            *ngIf="employeeContractDetailsForm.get('endDate').hasError('matDatepickerMin')">{{'HRMANAGAMENT.PLEASESELECTVALIDDATE' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="15px" fxLayoutGap.xs="0px">
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput formControlName="holidayOrThisYear"
                        placeholder="{{'HRMANAGAMENT.HOLIDAY/THISYEAR' | translate}}">
                    <mat-error>
                        <span *ngIf="employeeContractDetailsForm.get('holidayOrThisYear').hasError('maxlength')">
                            {{'HRMANAGAMENT.CHARACTERSSHOULDNOTEXCEED500CHARACTERS' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput formControlName="holidayOrFullEntitlement"
                        placeholder="{{'HRMANAGAMENT.HOLIDAY/FULLENTITLEMENT' | translate}}">
                    <mat-error>
                        <span *ngIf="employeeContractDetailsForm.get('holidayOrFullEntitlement').hasError('maxlength')">
                            {{'HRMANAGAMENT.CHARACTERSSHOULDNOTEXCEED500CHARACTERS' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <!-- <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="15px" fxLayoutGap.xs="0px">
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput formControlName="hourlyRate" placeholder="{{'HRMANAGAMENT.HOURLYRATE' | translate}}"
                        mobileNumber autocomplete="off">
                    <mat-error>
                        <span *ngIf="employeeContractDetailsForm.get('hourlyRate').hasError('maxlength')">
                            {{'HRMANAGAMENT.SHOULDNOTEXCEED5CHARACTERS' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <mat-select formControlName="currencyId"
                        placeholder="{{'EMPLOYEEMEMBERSHIP.CURRENCY' | translate}}">
                        <mat-option *ngFor="let currency of currencyList$ | async" [value]="currency.currencyId">
                            {{currency.currencyName}}</mat-option>
                    </mat-select>
                    <mat-error>
                        <span
                            *ngIf="employeeContractDetailsForm.get('currencyId').hasError('required') && employeeContractDetailsForm.get('currencyId').touched">
                            {{'EMPLOYEEMEMBERSHIP.PLEASESELECTCURRENCY' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
        </div> -->
        <div class="custom-hrm-dropzone">
            <app-dropzone [moduleTypeId]="moduleTypeId" [isToUploadFiles]="toUploadFiles"
                [referenceTypeId]="referenceTypeId" [getFilesByReferenceId]="true"
                [referenceId]="employeeContractDetailsId" [selectedParentFolderId]="selectedParentFolderId"
                [selectedStoreId]="selectedStoreId" [isButtonVisible]="false" (isFilesExist)="filesExist($event)"
                (closeFilePopup)="closeFilePopup()">
            </app-dropzone>
        </div>
        <!-- <mat-label>{{'USERSTORY.FILEEXTENSIONS' | translate}} :&nbsp;jpg, jpeg, png, pdf</mat-label> -->

    </div>
    <div class="mb-1 prl-1" fxLayoutAlign="center center">
        <button mat-button mat-raised-button color="primary" class="mr-1"
            [disabled]="!employeeContractDetailsForm.valid || (upsertEmployeeContractDetailsInProgress$ | async) || (anyOperationInProgress$ | async)">
            <mat-progress-bar color="primary" mode="indeterminate"
                *ngIf="upsertEmployeeContractDetailsInProgress$ | async">
            </mat-progress-bar>
            <span *ngIf="!this.employeeContractDetailsId">
                <fa-icon class="mr-05" icon="save"></fa-icon> {{'SAVE' | translate}}
            </span>
            <span *ngIf="this.employeeContractDetailsId">
                <fa-icon class="mr-05" icon="pen"></fa-icon> {{'UPDATE' | translate}}
            </span>
        </button>
        <button mat-button mat-raised-button (click)="closePopover(formDirective);(false)"
            [disabled]="(upsertEmployeeContractDetailsInProgress$ | async) || (anyOperationInProgress$ | async)">
            <fa-icon class="mr-05" icon="times"></fa-icon> {{'CANCEL' | translate}}
        </button>
    </div>
</form>