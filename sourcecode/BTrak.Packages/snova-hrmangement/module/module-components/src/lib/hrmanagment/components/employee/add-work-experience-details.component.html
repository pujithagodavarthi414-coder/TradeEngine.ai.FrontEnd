<mat-card-title class="text-center">
    <div class="card-title-text mat-bg-primary p-05" fxLayout="row">
        <div fxFlex fxLayoutAlign="center">
            <span *ngIf="!employeeWorkExperienceId">{{'HRMANAGAMENT.ADDWORKEXPERIENCEDETAILS' | translate}}</span>
            <span *ngIf="employeeWorkExperienceId">{{'HRMANAGAMENT.EDITWORKEXPERIENCEDETAILS' | translate}}</span>
        </div>
    </div>
</mat-card-title>
<form [formGroup]="employeeWorkExperienceDetailsForm" novalidate #formDirective="ngForm" class="hr-apps-scroll"
    id="style-1" (submit)="employeeWorkExperienceDetailsForm.valid && saveEmployeeWorkExperienceDetails()">
    <div class="p-1 apps-create-height" id="style-1">
        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap.xs="0px" fxLayoutGap="15px">
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput formControlName="company" placeholder="{{'HRMANAGAMENT.COMPANY' | translate}}"
                        required>
                    <mat-error>
                        <span
                            *ngIf="employeeWorkExperienceDetailsForm.get('company').hasError('required') && employeeWorkExperienceDetailsForm.get('company').touched">
                            {{'HRMANAGAMENT.PLEASEENTERCOMPANYNAME' | translate}}</span>
                        <span *ngIf="employeeWorkExperienceDetailsForm.get('company').hasError('maxlength')">
                            {{'HRMANAGAMENT.COMPANYNAMESHOULDNOTEXCEED100CHARACTERS' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <mat-select formControlName="designationId" placeholder="{{'HRMANAGAMENT.DESIGNATION' | translate}}"
                        required>
                        <mat-option value="option" *ngFor="let designation of designationDropDownListData$ | async"
                            [value]="designation.designationId">
                            {{designation.designationName}}
                        </mat-option>
                    </mat-select>
                    <mat-error>
                        <span
                            *ngIf="!employeeWorkExperienceDetailsForm.get('designationId').valid && employeeWorkExperienceDetailsForm.get('designationId').touched">
                            {{'HRMANAGAMENT.PLEASESELECTDESIGNATION' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap.xs="0px" fxLayoutGap="15px">
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput formControlName="fromDate" placeholder="{{'HRMANAGAMENT.FROMDATE' | translate}}"
                        [matDatepicker]="picker" (click)="picker.open()" 
                        [max]="employeeWorkExperienceDetailsForm.get('toDate').value" 
                        [min]="minDate" required autocomplete="off">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                    <mat-error>
                        <span
                            *ngIf="employeeWorkExperienceDetailsForm.get('fromDate').hasError('required') && employeeWorkExperienceDetailsForm.get('fromDate').touched">
                            {{'HRMANAGAMENT.PLEASESELECTFROMDATE' | translate}}</span>
                        <span
                            *ngIf="employeeWorkExperienceDetailsForm.get('fromDate').hasError('matDatepickerMin')">{{'HRMANAGAMENT.PLEASEENTERDATEGREATERTHAN' | translate}}</span>
                        <span
                            *ngIf="employeeWorkExperienceDetailsForm.get('fromDate').hasError('matDatepickerMax')">{{'HRMANAGAMENT.SELECTEDDATESHOULDBELESSTHANTODAYSDATE' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput formControlName="toDate" placeholder="{{'HRMANAGAMENT.TODATE' | translate}}"
                        [matDatepicker]="picker2" (click)="picker2.open()" required
                        [min]="employeeWorkExperienceDetailsForm.get('fromDate').value"  [readonly]="true" autocomplete="off">
                    <mat-datepicker-toggle matSuffix [for]="picker2">
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker2></mat-datepicker>
                    <mat-error>
                        <span
                            *ngIf="employeeWorkExperienceDetailsForm.get('toDate').hasError('required') && employeeWorkExperienceDetailsForm.get('toDate').touched">
                            {{'HRMANAGAMENT.PLEASESELECTTODATE' | translate}}</span>
                        <span
                            *ngIf="employeeWorkExperienceDetailsForm.get('toDate').hasError('matDatepickerMin')">{{'HRMANAGAMENT.PLEASESELCTVALIDTODATE' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div>
            <mat-form-field class="full-width">
                <textarea matInput formControlName="comments"
                    placeholder="{{'HRMANAGAMENT.COMMENT' | translate}}"></textarea>
                <mat-error>
                    <span *ngIf="employeeWorkExperienceDetailsForm.get('comments').hasError('maxlength')">
                        {{'HRMANAGAMENT.COMMENTSHOULDNOTEXCEED800CHARACTERS' | translate}}</span>
                </mat-error>
            </mat-form-field>
        </div>
        <div class="custom-hrm-dropzone">
            <app-dropzone [moduleTypeId]="moduleTypeId" [referenceTypeId]="referenceTypeId"
                [getFilesByReferenceId]="true" [referenceId]="employeeWorkExperienceId"
                [selectedParentFolderId]="selectedParentFolderId" [selectedStoreId]="selectedStoreId"
                [isButtonVisible]="false" (isFilesExist)="filesExist($event)" (closeFilePopup)="closeFilePopup()" [isToUploadFiles] = "isToUploadFiles">
            </app-dropzone>
        </div>
        <!-- <mat-label>{{'USERSTORY.FILEEXTENSIONS' | translate}} :&nbsp;jpg, jpeg, png, pdf</mat-label> -->
    </div>
    <div class="mb-1 prl-1" fxLayoutAlign="center center">
        <button mat-button mat-raised-button color="primary" class="mr-1" type="submit"
            [disabled]="!employeeWorkExperienceDetailsForm.valid || (upsertEmployeeWorkExperienceDetailsInProgress$ | async) || (anyOperationInProgress$ | async)">
            <mat-progress-bar color="primary" mode="indeterminate"
                *ngIf="upsertEmployeeWorkExperienceDetailsInProgress$ | async">
            </mat-progress-bar>
            <span *ngIf="!this.employeeWorkExperienceId">
                <fa-icon class="mr-05" icon="save"></fa-icon> {{'SAVE' | translate }}
            </span>
            <span *ngIf="this.employeeWorkExperienceId">
                <fa-icon class="mr-05" icon="pen"></fa-icon> {{'UPDATE' | translate}}
            </span>
        </button>
        <button mat-button mat-raised-button (click)="closePopover();(false)"
            [disabled]="(upsertEmployeeWorkExperienceDetailsInProgress$ | async) || (anyOperationInProgress$ | async)">
            <fa-icon class="mr-05" icon="times"></fa-icon> {{'CANCEL' | translate}}
        </button>
    </div>
</form>