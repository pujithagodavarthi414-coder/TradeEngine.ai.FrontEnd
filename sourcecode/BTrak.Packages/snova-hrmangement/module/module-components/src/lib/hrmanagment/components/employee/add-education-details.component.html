<mat-card-title class="text-center">
    <div class="card-title-text mat-bg-primary p-05" fxLayout="row">
        <div fxFlex fxLayoutAlign="center">
            <span *ngIf="!employeeEducationDetailsId">{{'EMPLOYEEEDUCATIONDETAILS.ADDEDUCATION' | translate}}</span>
            <span *ngIf="employeeEducationDetailsId">{{'EMPLOYEEEDUCATIONDETAILS.EDITEDUCATION' | translate}}</span>
        </div>
    </div>
</mat-card-title>
<form [formGroup]="employeeEducationDetailsForm" novalidate #formDirective="ngForm" class="hr-apps-scroll" id="style-1"
    (submit)="employeeEducationDetailsForm.valid && saveEmployeeEducationDetails()">
    <div class="p-1 apps-create-height" id="style-1">
        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="10px" fxLayoutGap.xs="0px">
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <mat-select formControlName="educationLevelId"
                        placeholder="{{'EMPLOYEEEDUCATIONDETAILS.SELECTLEVEL' | translate}}"
                        (selectionChange)="searchByLevel($event.value)" required>
                        <mat-option *ngFor="let level of selectEducationLevelsListData$ | async"
                            [value]="level.educationLevelId">
                            {{level.educationLevelName}}
                        </mat-option>
                    </mat-select>
                    <mat-error>
                        <span
                            *ngIf="employeeEducationDetailsForm.get('educationLevelId').hasError('required') && employeeEducationDetailsForm.get('educationLevelId').touched">
                            {{'EMPLOYEEEDUCATIONDETAILS.SELECTLEVEL' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput formControlName="institute"
                        placeholder="{{'EMPLOYEEEDUCATIONDETAILS.INSTITUTE' | translate}}" required>
                    <mat-error>
                        <span *ngIf="employeeEducationDetailsForm.get('institute').hasError('maxlength')">
                            {{'EMPLOYEEEDUCATIONDETAILS.INSTITUTEFORM' | translate}}</span>
                        <span
                            *ngIf="employeeEducationDetailsForm.get('institute').hasError('required') && employeeEducationDetailsForm.get('institute').touched">
                            {{'EMPLOYEEEDUCATIONDETAILS.INSTITUTIONNAMEREQUIRED' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="10px" fxLayoutGap.xs="0px">
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput formControlName="majorSpecialization"
                        placeholder="{{'EMPLOYEEEDUCATIONDETAILS.MAJORSPECIFICATION' | translate}}" required>
                    <mat-error>
                        <span *ngIf="employeeEducationDetailsForm.get('majorSpecialization').hasError('maxlength')">
                            {{'EMPLOYEEEDUCATIONDETAILS.MAJORSPECIFICATIONFORM' | translate}}</span>
                        <span
                            *ngIf="employeeEducationDetailsForm.get('majorSpecialization').hasError('required') && employeeEducationDetailsForm.get('majorSpecialization').touched">
                            {{'EMPLOYEEEDUCATIONDETAILS.MAJORSPECIALIZATIONREQUIRED' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput type="number" formControlName="gpaOrScore"
                        placeholder="{{'EMPLOYEEEDUCATIONDETAILS.GPASCORE' | translate}}" required type="number" min="1"
                        amountOnly autocomplete="off">
                    <mat-error>
                        <span *ngIf="employeeEducationDetailsForm.get('gpaOrScore').hasError('maxlength')">
                            {{'EMPLOYEEEDUCATIONDETAILS.GPASCOREFORM' | translate}}</span>
                        <span
                            *ngIf="employeeEducationDetailsForm.get('gpaOrScore').hasError('min')">{{'EMPLOYEEEDUCATIONDETAILS.VALIDGPA' | translate}}</span>
                    </mat-error>
                    <mat-error>
                        <span
                            *ngIf="employeeEducationDetailsForm.get('gpaOrScore').hasError('required') && employeeEducationDetailsForm.get('gpaOrScore').touched">
                            {{'EMPLOYEEEDUCATIONDETAILS.GPAORSCOREREQUIRED' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="10px" fxLayoutGap.xs="0px">
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput formControlName="startDate" [matDatepicker]="picker1" (click)="picker1.open()"
                        placeholder="{{'EMPLOYEEEDUCATIONDETAILS.STARTDATE' | translate}}"
                        [max]="employeeEducationDetailsForm.get('endDate').value" required autocomplete="off">
                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                    <mat-error>
                        <span
                            *ngIf="employeeEducationDetailsForm.get('startDate').hasError('required') && employeeEducationDetailsForm.get('startDate').touched">
                            {{'EMPLOYEEEDUCATIONDETAILS.STARTDATEREQUIRED' | translate}}</span>
                        <span
                            *ngIf="employeeEducationDetailsForm.get('startDate').hasError('matDatepickerMin')">{{'HRMANAGAMENT.PLEASEENTERDATEGREATERTHAN' | translate}}</span>
                        <span
                            *ngIf="employeeEducationDetailsForm.get('startDate').hasError('matDatepickerMax')">{{'HRMANAGAMENT.SELECTEDDATESHOULDBELESSTHANTODAYSDATE' | translate}}</span>
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="100">
                <mat-form-field class="full-width">
                    <input matInput formControlName="endDate" [matDatepicker]="picker2" (click)="picker2.open()"
                        placeholder="{{'EMPLOYEEEDUCATIONDETAILS.ENDDATE' | translate}}" required
                        [min]="employeeEducationDetailsForm.get('startDate').value" [readonly]="true"
                        autocomplete="off">
                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                    <mat-datepicker #picker2></mat-datepicker>
                    <mat-error>
                        <span
                            *ngIf="employeeEducationDetailsForm.get('endDate').hasError('required') && employeeEducationDetailsForm.get('endDate').touched">
                            {{'EMPLOYEEEDUCATIONDETAILS.ENDDATEREQUIRED' | translate}}</span>
                        <span *ngIf="employeeEducationDetailsForm.get('endDate').hasError('matDatepickerMin')">Please
                            enter valid end date</span>
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div class="custom-hrm-dropzone">
            <app-dropzone [moduleTypeId]="moduleTypeId" [referenceTypeId]="referenceTypeId"
                [getFilesByReferenceId]="true" [referenceId]="employeeEducationDetailsId"
                [selectedParentFolderId]="selectedParentFolderId" [selectedStoreId]="selectedStoreId"
                [isButtonVisible]="false" (isFilesExist)="filesExist($event)" (closeFilePopup)="closeFilePopup()" [isToUploadFiles] = "isToUploadFiles">
            </app-dropzone>
        </div>
        <!-- <mat-label>{{'USERSTORY.FILEEXTENSIONS' | translate}} :&nbsp;jpg, jpeg, png, pdf</mat-label> -->
    </div>
    <div class="mb-1 prl-1" fxLayoutAlign="center center">
        <button mat-button mat-raised-button type="submit" color="primary" class="mr-1"
            [disabled]="!employeeEducationDetailsForm.valid || (upsertEmployeeEducationDetailsInProgress$ | async) || (anyOperationInProgress$ | async)">
            <mat-progress-bar color="primary" mode="indeterminate"
                *ngIf="upsertEmployeeEducationDetailsInProgress$ | async">
            </mat-progress-bar>
            <span *ngIf="!this.employeeEducationDetailsId">
                <fa-icon class="mr-05" icon="save"></fa-icon> {{'SAVE' | translate }}
            </span>
            <span *ngIf="this.employeeEducationDetailsId">
                <fa-icon class="mr-05" icon="pen"></fa-icon> {{'UPDATE' | translate}}
            </span>
        </button>
        <button mat-button mat-raised-button type="button" (click)="closePopover()"
            [disabled]="(upsertEmployeeEducationDetailsInProgress$ | async) || (anyOperationInProgress$ | async)">
            <fa-icon class="mr-05" icon="times"></fa-icon> {{'CANCEL' | translate}}
        </button>
    </div>
</form>