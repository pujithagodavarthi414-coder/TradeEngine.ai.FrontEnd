<div class="payroll-bg">
  <!--GoToBackPage dialog-->
  <sat-popover backdropClass="backdrop-color" #goToBackPagePopover hasBackdrop backdropClass="backdrop-color"
    verticalAlign="below" horizontalAlign="end">
    <mat-card class="p-0">
      <mat-card-content>
        <div class="card-content p-05">
          "Are you sure to leave the page ? You might loss the data."
        </div>
        <div class="text-center">
          <button class="mr-1" mat-button mat-raised-button color="primary" (click)="goToBackPage();"
            [satPopoverAnchorFor]="goToBackPagePopover">
            <fa-icon class="mr-05" icon="check"></fa-icon> {{ 'YES' | translate }}
          </button>
          <button mat-button mat-raised-button (click)="goToBackPagePopover.close();"
            [satPopoverAnchorFor]="goToBackPagePopover">
            <fa-icon class="mr-05" icon="times"></fa-icon> {{ 'CANCEL' | translate }}
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </sat-popover>
  <!--GoToBackPage dialog-->

  <!-- <mat-card class="p-0 mr-0"> -->
  <mat-card-title class="text-center">
    <div class="card-title-text data-table-header p-05 mb-1 custom-box">
      {{ 'PAYROLLTEMPLATE.PAYROLLTEMPLATETITLE' | translate }}
    </div>
  </mat-card-title>
  <mat-card-content class="P-05">
    <form [formGroup]="payRollTemplateForm" #formDirective="ngForm" novalidate
      (submit)="payRollTemplateForm.valid && upsertPayRollTemplate(formDirective)">
      <div>
        <div fxLayout="row wrap" fxLayoutGap="10px" class="p-05 ml-05">
          <div fxFlex="25">
            <mat-form-field class="full-width">
              <input matInput formControlName="payRollName"
                placeholder="{{ 'PAYROLLTEMPLATE.PAYROLLNAME' | translate }}" required>
              <mat-error class="P-06" *ngIf="payRollTemplateForm.get('payRollName').hasError('maxlength')">
                {{ 'PAYROLLTEMPLATE.PAYROLLNAMEMAXLENGTHERROR' | translate }}</mat-error>
              <mat-error class="P-06"
                *ngIf="payRollTemplateForm.get('payRollName').hasError('required') && payRollTemplateForm.get('payRollName').touched">
                {{ 'PAYROLLTEMPLATE.PAYROLLNAMEREQUIREDERROR' | translate }}
              </mat-error>
            </mat-form-field>
          </div>
          <div fxFlex="25">
            <mat-form-field class="full-width">
              <input matInput formControlName="payRollShortName"
                placeholder="{{ 'PAYROLLTEMPLATE.PAYROLLSHORTNAME' | translate }}" required>
              <mat-error class="P-06" *ngIf="payRollTemplateForm.get('payRollShortName').hasError('maxlength')">
                {{ 'PAYROLLTEMPLATE.PAYROLLSHORTNAMEMAXLENGTHERROR' | translate }}</mat-error>
              <mat-error class="P-06"
                *ngIf="payRollTemplateForm.get('payRollShortName').hasError('required') && payRollTemplateForm.get('payRollShortName').touched">
                {{ 'PAYROLLTEMPLATE.PAYROLLSHORTNAMEREQUIREDERROR' | translate }}
              </mat-error>
            </mat-form-field>
          </div>
          <!-- <div fxFlex="18">
            <mat-form-field class="full-width">
              <input matInput [matDatepicker]="picker1" (click)="picker1.open()" formControlName="infinitlyRunDate"
                placeholder="{{'PAYROLLTEMPLATE.INFINITLYRUNDATE' | translate}}" autocomplete="off" [readonly]="true">
              <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
              <mat-datepicker #picker1></mat-datepicker>
            </mat-form-field>
          </div> -->

          <div fxFlex="25">
            <mat-form-field class="full-width">
              <mat-select placeholder="{{'PAYROLLTEMPLATECONFIGURATION.CURRENCY' | translate}}"
                formControlName="currencyId" required>
                <mat-option *ngFor="let currency of currencies" [value]="currency.currencyId">
                  {{ currency.currencyName }}
                </mat-option>
              </mat-select>
              <mat-error class="P-06"
                *ngIf="payRollTemplateForm.get('currencyId').hasError('required') && payRollTemplateForm.get('currencyId').touched">
                {{ 'PAYROLLTEMPLATECONFIGURATION.CURRENCYREQUIREDERROR' | translate }}
              </mat-error>
            </mat-form-field>
          </div>
          <!-- <div fxFlex="10" class="mt-1 ml-05">
            <mat-checkbox formControlName="isRepeatInfinitly">{{'PAYROLLTEMPLATE.ISREPEATINFINITLY' | translate}}
            </mat-checkbox>
          </div>
          <div fxFlex="10" class="mt-1">
            <mat-checkbox formControlName="islastWorkingDay">{{'PAYROLLTEMPLATE.ISLASTWORKINGDAY' | translate}}
            </mat-checkbox>
          </div> -->
        </div>
        <div>
        </div>
        <mat-error *ngIf="isThereAnError">{{ validationMessage }}</mat-error>
        <div class="mt-05 pb-1 text-center">
          <button type="submit" mat-button mat-raised-button color="primary" class="mr-1"
            [disabled]="!payRollTemplateForm.valid||isAnyOperationIsInprogress">
            <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isAnyOperationIsInprogress">
            </mat-progress-bar>
            <fa-icon class="mr-05" icon="check"></fa-icon> {{ 'SAVE' | translate }}
          </button>
          <button mat-button mat-raised-button (click)="goToBackPage()" type="button">
            <fa-icon class="mr-05" icon="times"></fa-icon>
            {{ 'CANCEL' | translate }}
          </button>
        </div>
      </div>
    </form>
    <mat-tab-group class="payroll-mat-tabs" *ngIf="payRollTemplateId != null">
      <!-- <mat-tab label="{{'PAYFREQUENCY.PAYFREQUENCY' | translate}} ">
        <app-payrollfrequency [payrollTemplateId]="payRollTemplateId">
        </app-payrollfrequency>
      </mat-tab> -->
      <mat-tab label="{{'PAYROLLTEMPLATECONFIGURATION.PAYROLLTEMPLATECONFIGURATIONTITLE' | translate}}">
        <app-payrolltemplateconfiguration [payrollTemplateId]="payRollTemplateId">
        </app-payrolltemplateconfiguration>
      </mat-tab>
    </mat-tab-group>
  </mat-card-content>
  <!-- </mat-card>  -->
</div>