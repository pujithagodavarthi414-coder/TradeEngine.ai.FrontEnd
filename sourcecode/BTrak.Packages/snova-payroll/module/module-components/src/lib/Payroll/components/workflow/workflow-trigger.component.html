<div class="full-height">
    <mat-card class="p-0 canteen-manage m-0">
        <mat-card-title class="full-width data-table-header drag-handler">
            <div fxLayout="row wrap" fxLayoutAlign="start center">
                <div class="card-title-text p-05 full-width ml-05" fxFlex fxLayoutAlign="start center">
                    <span fxFlex="100" class="hide-content-overflow">{{ 'GOALS.WORKFLOWTRIGGERS' | translate }}</span>
                </div>
                <div fxFlex="135px" fxLayoutAlign="end center" class="search_goalinput mr-05" fxLayout="row wrap">
                    <mat-form-field class="full-width">
                        <input class="search_goal" matInput placeholder="{{'HRMANAGAMENT.SEARCH' | translate}}"
                            [(ngModel)]="searchText" (input)="filterByName($event)">
                    </mat-form-field>
                    <div fxFlex="20px">
                        <span class="close_icon" fxLayoutAlign="end center" fxLayoutAlign.xs="start center">
                            <span *ngIf="!searchText"></span>
                            <mat-icon *ngIf="searchText" class="icon-button mr-05" aria-hidden="false"
                                (click)="closeSearch()" style="cursor:pointer">
                                close</mat-icon>
                        </span>
                    </div>
                </div>
                <div fxFlex="40px" fxFlex.xs="25px" fxLayoutAlign="end center" class="ml-05">
                    <button mat-icon-button (click)="addWorkflowTrigger()">
                        <fa-icon matTooltip="{{'GOALS.ADDWORKFLOWTRIGGER' | translate}}" class="filter mat-color-accent"
                            icon="plus">
                        </fa-icon>
                    </button>
                </div>
            </div>
            <mat-divider></mat-divider>
        </mat-card-title>
        <!-- <div fxFlex class="p-05" fxLayout="row" *ngIf="searchText">
            <mat-chip disableRipple matRipple class="mr-08" *ngIf="searchText">
                <b>{{'SEARCH' | translate}}:&nbsp;</b>
                {{ searchText }}
                <fa-icon icon="times" class="ml-05 mat-color-accent cursor-pointer" (click)="closeSearch()">
                </fa-icon>
            </mat-chip>
        </div> -->
    </mat-card>

    <div class="activity-data no-drag">
        <ngx-datatable class="btrak" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="50"
            [limit]="100" [rows]="workFlowItems" [loadingIndicator]="isAnyOperationIsInprogress"
            [messages]="{emptyMessage:('NODATATODISPLAY' | translate), totalMessage: 'TOTAL' | translate}">
            <ngx-datatable-column name="{{ 'GOALS.TRIGGERNAME' | translate }}" [flexGrow]="1" prop="triggerName">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    <div class="hide-content-overflow"><span>{{ row?.triggerName }}</span></div>
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="{{ 'GOALS.WORKFLOWNAME' | translate }}" [flexGrow]="1" prop="workflowName">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    <div class="hide-content-overflow">
                        <span matTooltip="{{ row?.workflowName }}" matTooltipClass="tooltip-overflow"
                            matTooltipShowDelay="400">{{ row?.workflowName }}
                        </span>
                    </div>
                </ng-template>
            </ngx-datatable-column>

            <!-- <ngx-datatable-column name="{{ 'GOALS.WORKFLOWXML' | translate }}" [flexGrow]="1" prop="workflowXml">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    <div class="hide-content-overflow">
                        <span>{{ row?.workflowXml }}</span>
                    </div>
                </ng-template>
            </ngx-datatable-column> -->

            <ngx-datatable-column name="{{'ACTIONS'|translate}}" [flexGrow]="1" [sortable]="false">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    <button class="text-center" title="{{ 'GOALS.EDITWORKFLOWTRIGGER' | translate }}"
                        (click)="editWorkflowTrigger(row)" mat-icon-button>
                        <fa-icon icon="edit" style="cursor: pointer;" class="mat-color-accent"></fa-icon>
                    </button>
                    <button class="text-center" title="{{ 'GOALS.DELETEWORKFLOWTRIGGER' | translate }}"
                        [satPopoverAnchorFor]="deleteWorkflowTrigger" #deleteWorkflowTriggerPopover="satPopoverAnchor"
                        (click)="deleteWorkFlowTrigger(row,deleteWorkflowTriggerPopover)" mat-icon-button>
                        <fa-icon icon="trash" style="cursor: pointer;" class="mat-color-accent"></fa-icon>
                    </button>
                </ng-template>
            </ngx-datatable-column>
        </ngx-datatable>
    </div>
</div>

<!--Delete workflow trigger-->
<sat-popover #deleteWorkflowTrigger hasBackdrop backdropClass="backdrop-color" verticalAlign="below"
    horizontalAlign="end">
    <mat-card class="p-0">
        <mat-card-title class="text-center mat-bg-primary">
            <div class="card-title-text p-05">{{'TESTMANAGEMENT.CONFIRMATION' | translate}}</div>
        </mat-card-title>
        <mat-card-content class="p-05">
            <div class="card-content mb-1">
                {{'GOALS.AREYOUSUREDELETETHEWORKFLOWTRIGGER' | translate}}
            </div>
            <div class="text-center">
                <button class="mr-1" mat-button mat-raised-button color="primary"
                    [disabled]="disableDeleteWorkflowTrigger" (click)="removeWorkflowTrigger()">
                    <fa-icon class="mr-05" icon="trash"></fa-icon> {{'TESTMANAGEMENT.DELETE' | translate}}
                </button>
                <button mat-button mat-raised-button (click)="closeDeleteWorkflowTriggerPopup();">
                    <fa-icon class="mr-05" icon="times"></fa-icon> {{'TESTMANAGEMENT.CANCEL' | translate}}
                </button>
            </div>
        </mat-card-content>
    </mat-card>
</sat-popover>
<!--Delete workflow trigger-->