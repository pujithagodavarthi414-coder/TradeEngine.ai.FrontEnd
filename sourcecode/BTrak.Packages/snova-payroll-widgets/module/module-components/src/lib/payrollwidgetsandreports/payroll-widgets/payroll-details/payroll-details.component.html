<div class="full-height">
  <mat-card class="p-0 canteen-manage m-0">
  <mat-card-title class="full-width data-table-header drag-handler">
    <div class="card-title-text p-05 ml-05" fxFlex="30" fxLayoutAlign="start center">
      <span fxFlex="100" class="hide-content-overflow"
        matTooltip="{{ 'EMPLOYEETAXALLOWANCEDETAILS.EMPLOYEEPAYROLEDETAILS' | translate | titlecase | softLabelsPipe : softLabels}}">{{ 'EMPLOYEETAXALLOWANCEDETAILS.EMPLOYEEPAYROLEDETAILS' | translate | titlecase | softLabelsPipe : softLabels }}</span>
    </div>
    <button class="m-1" mat-button mat-raised-button color="primary" [disabled]="isButtonDisable"
      (click)="downloadSalaryCertificate();">
      <fa-icon class="mr-05" icon="download"></fa-icon>
      {{ 'EMPLOYEETAXALLOWANCEDETAILS.DONLOADSALARYCERTIFICATE' | translate }}
    </button>
    <button class="m-1" mat-button mat-raised-button color="primary" (click)="downLoadPaySlipsZipFolder();"
      [disabled]="isZipDownloadInprogress || isButtonDisable">
      <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isZipDownloadInprogress">
      </mat-progress-bar>
      <fa-icon class="mr-05" icon="download"></fa-icon> {{ 'PAYROLLDETAILS.DOWNLOADPAYSLIPS' | translate }}
    </button>
  </mat-card-title>

  <mat-card-content *ngIf="(canAccess_feature_EmployeePayrollDetails)" class="p-0" fxLayout="column">
    <div class="activity-data">
      <ngx-datatable class="btrak" [columnMode]="'force'" [headerHeight]="35" [footerHeight]="50" [rowHeight]="50"
        [scrollbarH]="true" [virtualization]="false" [loadingIndicator]="isAnyOperationIsInprogress" [limit]="5"
        [rows]="employeePayrollDetails">
        <ngx-datatable-column minWidth="150" name="{{ 'PAYROLL.TEMPLATE' | translate }}" [flexGrow]="1">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{ row?.payrollTemplateName }}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column minWidth="150" name="{{ 'PAYROLLDETAILS.PAYROLLSTARTDATE' | translate }}" [flexGrow]="1">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{ row?.payrollStartDate | date: "dd-MMM-yyyy"}}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column minWidth="150" name="{{ 'PAYROLLDETAILS.PAYROLLENDDATE' | translate }}" [flexGrow]="1">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{ row?.payrollEndDate | date: "dd-MMM-yyyy"}}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column minWidth="150" name="{{ 'PAYROLLDETAILS.RUNDATE' | translate }}" [flexGrow]="1">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{ row?.runDate | date: "dd-MMM-yyyy"}}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column minWidth="150" name="{{ 'PAYROLLDETAILS.MODIFIEDACTUALPAIDAMOUNT' | translate }}" [flexGrow]="1">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{ row?.modifiedActualPaidAmount }}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column minWidth="150" name="{{ 'PAYROLLDETAILS.EFFECTIVEWORKINGDAYS' | translate }}" [flexGrow]="1">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{ row?.effectiveWorkingDays }}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column minWidth="150" name="{{ 'EMPLOYEETAXALLOWANCEDETAILS.EMPLOYEEPAYROLEDETAILS' | translate | softLabelsPipe : softLabels}}"
          [flexGrow]="1">
          <ng-template let-row="row" ngx-datatable-cell-template>
            <button mat-raised-button color="primary"
              (click)="downloadPayslip(row?.payrollRunId)">{{ 'PAYROLLDETAILS.DOWNLOAD' | translate }}</button>
          </ng-template>
        </ngx-datatable-column>
      </ngx-datatable>
    </div>
  </mat-card-content>
</mat-card>
</div>

<app-common-message-box *ngIf="!(canAccess_feature_EmployeePayrollDetails)"
  textToDisplay="{{ 'DONTHAVEANYPERMISSIONS' | translate }}">
</app-common-message-box>