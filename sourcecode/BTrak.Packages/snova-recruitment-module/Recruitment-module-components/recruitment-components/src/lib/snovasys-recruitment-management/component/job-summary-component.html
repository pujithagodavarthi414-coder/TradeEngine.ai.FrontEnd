<mat-accordion class="goal-summary goal-expansion-panel">
  <mat-expansion-panel hideToggle="true" [disabled]="true" [expanded]="panelOpenState">
    <mat-expansion-panel-header class="p-05" [collapsedHeight]="'45px'" [expandedHeight]="'45px'"
      class="project-card goal-card goal-summary-card " (contextmenu)="openContextMenu($event)"
      [ngStyle]="{ 'background-color': jobSelected == true ? '#e1f0ff' : '' }"
      [ngClass]="{'selected-goal': jobSelected == true}">
      <div fxFlex="2px" class="userstory-left" [style.backgroundColor]="job.statusColour">
        &nbsp;
      </div>

      <div fxFlex="65" fxFlex.md="66" fxFlex.xs="72" fxFlex.sm="85">
        <p *ngIf="job.id !='00000000-0000-0000-0000-000000000000'" class="mat-body-2 selected-goal-text"
          matTooltip="{{backloagtranslate(job.jobOpeningTitle)}}" matTooltipClass="tooltip-overflow">
          {{ job.jobOpeningTitle }}</p>
      </div>
      
      <div fxLayoutAlign="end center" fxFlex="40px">
        <fa-icon *ngIf="canAccess_feature_AddorEditJobOpening&&!isJobOpeningClosed"
          matTooltip="{{'JOBOPENING.CLOSEJOBOPENING'|translate}}" class="pull-left board-type-icons mat-color-accent"
          icon="times" [satPopoverAnchorFor]="closeJobOpeningPopover"
          (click)="closeJobOpeningPopover.open(); $event.stopPropagation()" style="border-radius: 0px !important;">
        </fa-icon>
      </div>
      <div fxFlex="8" fxFlex.sm="4" class="goals_summary_member ml-02">

        <app-chip [matTooltip]="job.hiringManagerName" class="pull-right avatar-image goal-summary-image"
          [isNameRequired]="false" [name]="job.hiringManagerName | removeSpecialCharacters "
          [src]="job.profileImage | fetchSizedAndCachedImage: '20':''" size="20">
        </app-chip>
      </div>

      <fa-icon *ngIf="!isActiveJob && job.id !='00000000-0000-0000-0000-000000000000'"
        class="rotate-icon ml-02 m-0 p-03" icon="chevron-right" fxLayoutAlign="start center"
        [ngClass]="{'rotate-icon-down': expansionIcon}" (click)="togglePanel();$event.stopPropagation()"
        style="border-radius: 0px !important;"></fa-icon>
      <span>
        <mat-icon class="more_vert card-control" matTooltip="{{ 'MENU' | translate }}" [matMenuTriggerFor]="EditJob"
          (click)="$event.stopPropagation();" [style.left]="contextMenuPosition.x" [style.top]="contextMenuPosition.y">
        </mat-icon>
      </span>
    </mat-expansion-panel-header>
    <div (click)="$event.stopPropagation();" *ngIf="!isActiveJob && job.id !='00000000-0000-0000-0000-000000000000'">
      <div class="text-left p-02" fxLayout="row wrap">
        <span fxFlex>{{ 'JOBOPENING.ONBOARDCOUNT' | translate }}</span>

        <div fxFlex="40" fxLayoutAlign="start center" [style.color]="getColor(job)" style="margin-left: 10px;">
          <b>( {{ job.totaloffered > 0 ? job.totaloffered : 0 }} / {{ job.noOfOpenings > 0 ? job.noOfOpenings : 0}}
            )</b>
        </div>
      </div>

    </div>
    <div fxLayout="row wrap" class="text-left p-02" *ngIf="!isActiveJob && job.jobOpeningUniqueName">
      <span fxFlex>{{ 'GOALS.UNIQUENAME' | translate }}</span>
      <div fxFlex="40" fxLayoutAlign="start center">

        <a (click)="$event.stopPropagation();navigateToJobOpeningPage()" class="userstory-unique unique-numbers-hover"
          style="color: #008cba !important;">
          {{job.jobOpeningUniqueName}}
        </a>
      </div>
    </div>
    <div fxLayout="row wrap" class="text-left p-02" *ngIf="!isActiveJob && job.jobOpeningUniqueName">
      <span fxFlex>{{ 'JOBOPENINGSTATUS.STATUS' | translate }}</span>
      <div fxFlex="40" fxLayoutAlign="start center" style="margin-left: 10px;">
        {{ job.jobOpeningStatus}}
      </div>
    </div>
  </mat-expansion-panel>
</mat-accordion>
<mat-menu class="goal-options" #EditJob = "matMenu" (click)="$event.stopPropagation()">
  <div *ngIf="canAccess_feature_AddorEditJobOpening && !isJobOpeningClosed">
    <button mat-menu-item (click)="editJob(); $event.stopPropagation()">
      <mat-icon>edit</mat-icon> <span>{{ 'JOBOPENING.EDITJOBOPENING' | translate }}</span>
    </button>
  </div>
  <div *ngIf="canAccess_feature_ArchiveJobOpening">
    <button mat-menu-item [satPopoverAnchorFor]="archivePopover"
      (click)="archivePopover.open(); $event.stopPropagation()">
      <mat-icon>archive</mat-icon>
      <span> {{ 'JOBOPENING.ARCHIVEJOB' | translate }} </span>
    </button>
  </div>
  <div>
    <button mat-menu-item class="allgoals_icons" (click)="copyLink(); $event.stopPropagation()">
      <mat-icon>file_copy</mat-icon>{{'USERSTORY.CLICKHERETOCOPYLINK' | translate}}
    </button>
  </div>
  <div>
    <button mat-menu-item class="allgoals_icons" (click)="openInNewTab(); $event.stopPropagation()">
      <mat-icon>web_asset</mat-icon>{{'USERSTORY.CLICKHERETOOPENINNEWTAB' | translate}}
    </button>
  </div>
  <div *ngIf="canCopyPublicUrl() && !isJobOpeningClosed && !isJobOpeningDraft">
    <button mat-menu-item class="allgoals_icons" (click)="copyRegistrationLink(); $event.stopPropagation()">
      <mat-icon>file_copy</mat-icon>{{'JOBOPENING.REGSTRATIONLINK' | translate}}
    </button>
  </div>
  <div *ngIf="canAccess_feature_LinkInterviewProcess">

    <button mat-menu-item class="allgoals_icons" (click)="openInterviewProcess(); $event.stopPropagation();">
      <mat-icon>link</mat-icon><span>{{ 'INTERVIEWPROCESS.TITLE' | translate }}</span>
    </button>
  </div>
  <div *ngIf="canAccess_feature_LinkCandidateToJobOpening && !isJobOpeningClosed && !isJobOpeningDraft">
    <button mat-menu-item class="allgoals_icons" (click)="openLinkCandidate(); $event.stopPropagation();">
      <mat-icon>local_offer</mat-icon><span>{{ 'CANDIDATES.LINKCANDIDATE' | translate }}</span>
    </button>
  </div>
</mat-menu>

<sat-popover #archivePopover verticalAlign="below" backdropClass="backdrop-color" hasBackdrop horizontalAlign="end">
  <mat-card class="filter-data p-0">
    <mat-card-title class="text-center">
      <div class="card-title-text mat-bg-primary p-05">
        <span>
          {{ 'JOBOPENING.ARCHIVEJOB' | translate }}</span>
      </div>
    </mat-card-title>
    <p class="p-05 m-0"> {{ 'JOBOPENING.DESIGNA' | translate }}</p>
    <div class="text-center p-05">
      <button mat-raised-button color="primary" class="mr-05" (click)="addJobDetail(); $event.stopPropagation()"
        [disabled]="isAnyOperationIsInProgress">
        <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isAnyOperationIsInProgress">
        </mat-progress-bar>
        <fa-icon icon="check" class="mr-05"></fa-icon> {{ 'YES' | translate }}
      </button>
      <button mat-raised-button (click)="closeDialog(); (false)" [disabled]="isAnyOperationIsInProgress">
        <fa-icon icon="times" class="mr-05"></fa-icon> {{ 'NO' | translate }}
      </button>
    </div>
  </mat-card>
</sat-popover>
<sat-popover #closeJobOpeningPopover verticalAlign="below" backdropClass="backdrop-color" hasBackdrop
  horizontalAlign="end" [interactiveClose]="false">
  <mat-card class="filter-data p-0">
    <mat-card-title class="text-center">
      <div class="card-title-text p-1 mat-bg-primary">
        {{'JOBOPENING.CLOSEJOBOPENING' | translate}}
      </div>
    </mat-card-title>
    <p class="p-05 m-0">
      {{ 'JOBOPENING.CLOSEJOBOPENINGA' | translate }} </p>
    <div class="text-center p-05">
      <button mat-raised-button color="primary" class="mr-05" (click)="closeJobOpening(); $event.stopPropagation()"
        [disabled]="savingInProgress">
        <mat-progress-bar color="primary" mode="indeterminate" *ngIf="savingInProgress">
        </mat-progress-bar>
        <fa-icon icon="check" class="mr-05"></fa-icon> {{ 'YES' | translate }}
      </button>
      <button mat-raised-button (click)="closeCancelDialog(); (false)" [disabled]="savingInProgress">
        <fa-icon icon="times" class="mr-05"></fa-icon> {{ 'NO' | translate }}
      </button>
    </div>
  </mat-card>
</sat-popover>