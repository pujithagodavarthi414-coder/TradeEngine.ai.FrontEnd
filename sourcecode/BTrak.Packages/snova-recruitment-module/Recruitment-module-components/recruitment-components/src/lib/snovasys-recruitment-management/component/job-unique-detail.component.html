<mat-progress-bar color="primary" mode="indeterminate"
    *ngIf="isAnyOperationIsInprogress && canAccess_feature_Viewjobopening"></mat-progress-bar>
<div *ngIf="!isJobArchived && canAccess_feature_Viewjobopening">
    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isAnyOperationIsInprogress">
    </mat-progress-bar>
    <mat-card class="p-0 unique-detail-height" id="style-1">
        <div fxLayout="row wrap" fxLayout.xs="column">
            <div fxFlex class="mt-05" fxLayoutGap="5px" class="goal-unique-page-height" id="style-1" *ngIf="actvieJob">
                <mat-card-content class="p-0" fxLayout="column">
                    <h6 class="p-05 m-0 unique-details-link ml-05" *ngIf="actvieJob.jobOpeningTitle">
                        <a class="unique-numbers-cursor-text" (click)="$event.stopPropagation();">
                            {{actvieJob?.jobOpeningUniqueName}}
                        </a>
                    </h6>
                    <div fxLayout="row wrap" class="m-0 ml-05" *ngIf="actvieJob.jobOpeningTitle">
                        <div fxFlex class="ml-05 unique-details-text ">
                            <span class="unique-details-heading mt-02">
                                {{ actvieJob?.jobOpeningTitle }}</span>
                            <button mat-icon-button [satPopoverAnchorFor]="editJobMenuPopover"
                                class="pull-right unique-details-heading mr-05" *ngIf="checkPermissionsForMatMenu()"
                                (click)="editJobMenuPopover.open(); $event.stopPropagation(); ">
                                <fa-icon icon="ellipsis-h" class="goal-unique-menu"></fa-icon>
                            </button>
                            <sat-popover backdropClass="backdrop-color"
                                class="goal-options custom-goal-unique-background" #editJobMenuPopover hasBackdrop
                                [interactiveClose]="true" verticalAlign="below" (click)="$event.stopPropagation()"
                                horizontalAlign="end">
                                <mat-card class="filter-data p-0">
                                    <button mat-menu-item [satPopoverAnchorFor]="archivePopover"
                                        *ngIf="canAccess_feature_ArchiveJobOpening"
                                        (click)="archivePopover.open(); $event.stopPropagation()">
                                        <mat-icon>archive</mat-icon>
                                        <span>{{ 'JOBOPENING.ARCHIVEJOB' | translate | softLabelsPipe :
                                            softLabels}}</span>
                                    </button>
                                    <button mat-menu-item (click)="editJobOpening(); $event.stopPropagation()"
                                        *ngIf="canAccess_feature_AddorEditJobOpening && !isJobOpeningClosed">
                                        <mat-icon>edit</mat-icon>
                                        <span>{{ 'JOBOPENING.EDITJOB' | translate | softLabelsPipe : softLabels}}</span>
                                    </button>
                                    <button mat-menu-item [satPopoverAnchorFor]="closeJobOpeningPopover"
                                        (click)="closeJobOpeningPopover.open(); $event.stopPropagation()"
                                        *ngIf="canAccess_feature_AddorEditJobOpening && !isJobOpeningClosed">
                                        <mat-icon>cancel</mat-icon>
                                        <span>{{ 'JOBOPENING.CLOSEJOBOPENING' | translate | softLabelsPipe :
                                            softLabels}}</span>
                                    </button>
                                    <button mat-menu-item (click)="openInterviewProcess(); $event.stopPropagation();"
                                        *ngIf="canAccess_feature_LinkInterviewProcess">
                                        <mat-icon>link</mat-icon><span>{{ 'INTERVIEWPROCESS.TITLE' | translate }}</span>
                                    </button>
                                    <button mat-menu-item (click)="openLinkCandidate(); $event.stopPropagation();"
                                        *ngIf="canAccess_feature_LinkCandidateToJobOpening">
                                        <mat-icon>local_offer</mat-icon><span>{{ 'CANDIDATES.LINKCANDIDATE' | translate
                                            }}</span>
                                    </button>

                                </mat-card>
                            </sat-popover>
                            <sat-popover #archivePopover verticalAlign="below" backdropClass="backdrop-color"
                                hasBackdrop horizontalAlign="end" [interactiveClose]="false">
                                <mat-card class="filter-data p-0">
                                    <mat-card-title class="text-center">
                                        <div class="card-title-text p-1 mat-bg-primary">
                                            {{'JOBOPENING.ARCHIVEJOB' | translate}}
                                        </div>
                                    </mat-card-title>
                                    <p class="p-05 m-0">
                                        {{ 'JOBOPENING.DESIGNA' | translate | softLabelsPipe : softLabels }} </p>
                                    <div class="text-center p-05">
                                        <button mat-raised-button color="primary" class="mr-05"
                                            (click)="archiveJobOpening(); $event.stopPropagation()"
                                            [disabled]="savingInProgress">
                                            <mat-progress-bar color="primary" mode="indeterminate"
                                                *ngIf="savingInProgress">
                                            </mat-progress-bar>
                                            <fa-icon icon="check" class="mr-05"></fa-icon> {{ 'YES' | translate }}
                                        </button>
                                        <button mat-raised-button (click)="closeDialog(); (false)"
                                            [disabled]="savingInProgress">
                                            <fa-icon icon="times" class="mr-05"></fa-icon> {{ 'NO' | translate }}
                                        </button>
                                    </div>
                                </mat-card>
                            </sat-popover>
                            <sat-popover #closeJobOpeningPopover verticalAlign="below" backdropClass="backdrop-color"
                                hasBackdrop horizontalAlign="end" [interactiveClose]="false">
                                <mat-card class="filter-data p-0">
                                    <mat-card-title class="text-center">
                                        <div class="card-title-text p-1 mat-bg-primary">
                                            {{'JOBOPENING.CLOSEJOBOPENING' | translate}}
                                        </div>
                                    </mat-card-title>
                                    <p class="p-05 m-0">
                                        {{ 'JOBOPENING.CLOSEJOBOPENINGA' | translate | softLabelsPipe : softLabels }}
                                    </p>
                                    <div class="text-center p-05">
                                        <button mat-raised-button color="primary" class="mr-05"
                                            (click)="closeJobOpening(); $event.stopPropagation()"
                                            [disabled]="savingInProgress">
                                            <mat-progress-bar color="primary" mode="indeterminate"
                                                *ngIf="savingInProgress">
                                            </mat-progress-bar>
                                            <fa-icon icon="check" class="mr-05"></fa-icon> {{ 'YES' | translate }}
                                        </button>
                                        <button mat-raised-button (click)="closeDialog(); (false)"
                                            [disabled]="savingInProgress">
                                            <fa-icon icon="times" class="mr-05"></fa-icon> {{ 'NO' | translate }}
                                        </button>
                                    </div>
                                </mat-card>
                            </sat-popover>
                        </div>
                    </div>
                    <div fxLayout="row wrap" class="pl-1 m-0" *ngIf="actvieJob">
                        <div *ngIf="actvieJob.hiringManagerName"
                            class="unique-background-color custom-goal-padding mr-1 mt-05 mb-1">
                            <div fxLayout="row wrap">
                                <div fxFlex fxLayoutAlign="start center" class="hide-content-overflow">
                                    <h6 class="goal-unique-font-bold m-0">
                                        {{ 'JOBOPENING.HIRINGMANAGER' | translate | softLabelsPipe : softLabels}}:
                                        &nbsp;</h6>
                                    <app-avatar *ngIf="!actvieJob.profileImage"
                                        [name]="actvieJob.hiringManagerName | removeSpecialCharacters" [isRound]="true"
                                        size="20">
                                    </app-avatar>
                                    <img class="employee_img mt-0" *ngIf="actvieJob.profileImage"
                                        style="width: 20px !important;height: 20px !important;"
                                        src="{{ actvieJob.profileImage }}">
                                    &nbsp;{{ actvieJob?.hiringManagerName }}
                                </div>
                            </div>
                        </div>
                        <div *ngIf="actvieJob.dateFrom" class="mt-05">
                            <h6 class="unique-background-color p-05 mr-1">
                                {{ 'JOBOPENING.DATEFROM' | translate }}:&nbsp;{{ actvieJob?.dateFrom | date:
                                'dd/MM/yyyy' }}
                            </h6>
                        </div>
                        <div *ngIf="actvieJob.dateTo" class="mt-05">
                            <h6 class="unique-background-color p-05 mr-1">
                                {{ 'JOBOPENING.DATETO' | translate }}:&nbsp;{{ actvieJob?.dateTo | date: 'dd/MM/yyyy' }}
                            </h6>
                        </div>
                        <div class="mt-05">
                            <h6 class="unique-background-color p-05 mr-1">
                                {{ 'JOBOPENING.NOOFJOBOPENINGS' | translate }}:&nbsp;{{ actvieJob?.noOfOpenings }}
                            </h6>
                        </div>
                        <div class="mt-05">
                            <h6 class="unique-background-color p-05 mr-1">
                                {{ 'JOBOPENING.TOTALOFFERED' | translate }}: &nbsp;{{ actvieJob.totaloffered }}
                            </h6>
                        </div>
                        <div class="mt-05">
                            <h6 class="unique-background-color p-05 mr-1">
                                {{ 'JOBOPENING.TOTALCANDIDATES' | translate }}: &nbsp;{{
                                actvieJob.totalCandidatesInJobOpening }}
                            </h6>
                        </div>
                    </div>

                    <div fxFlex class="unique-details-bg p-05" fxLayout="column">
                        <h5 class="unique-details-text pl-1">{{'USERSTORYUNIQUE.DESCRIPTION' | translate}}</h5>
                        <div fxFlex class="ml-05" fxLayout="column">
                            <div fxLayout="row wrap" fxFlex="100" class="word-break">
                                <span *ngIf="description && !isEditorVisible" (click)="enableEditor()"
                                    [innerHTML]=description class="pl-2" style="cursor: pointer;">
                                </span>
                                <span
                                    *ngIf="(description == null || description == '') && (!isEditorVisible) && canAccess_feature_AddorEditJobOpening"
                                    (click)="enableEditor()" style="cursor: pointer;" class="pl-2">
                                    <b>{{'USERSTORYUNIQUE.THEREISNODESCRIPTIONCLICKHERETOADDDESCRIPTION' |
                                        translate}}</b>
                                </span>
                                <span
                                    *ngIf="(description == null || description == '') && (!isEditorVisible) && !canAccess_feature_AddorEditJobOpening"
                                    (click)="enableEditor()" style="cursor: pointer;" class="pl-2">
                                    <b>{{'USERSTORYUNIQUE.THEREISNODESCRIPTION' | translate}}</b>
                                </span>
                            </div>

                            <div fxFlex *ngIf="isEditorVisible">
                                <div class="full-width custom-input">
                                    <editor class="dfree-header custom-logtime-comment"
                                        apiKey="ewi2adl9u4cmc1lic9wcz3zq03696a3ihlodo4n1oaveo3kk"
                                        placeholder="Description" menubar="false" [init]="initSettings"
                                        background="white" height="120" [(ngModel)]="description">
                                    </editor>
                                </div>
                                <div class="mt-1 ml-05">
                                    <button mat-raised-button color="primary" class="mr-05"
                                        (click)="handleDescriptionEvent($event)"
                                        [disabled]="savingInProgress || isAnyOperationIsInprogress">
                                        <i class="fa fa-spin fa-spinner" *ngIf="savingInProgress"></i>
                                        <fa-icon icon="check" class="mr-05"></fa-icon> {{ 'SAVE' | translate }}
                                    </button>
                                    <button mat-raised-button (click)="cancelDescription()" class="mr-05"
                                        [disabled]="savingInProgress || isAnyOperationIsInprogress">
                                        <fa-icon icon="times" class="mr-05"></fa-icon> {{ 'CANCEL' | translate }}
                                    </button>
                                    <button mat-raised-button color="primary" (click)="descriptionReset()"
                                        [disabled]="savingInProgress || isAnyOperationIsInprogress">
                                        <fa-icon icon="undo" class="mr-05"></fa-icon>
                                        {{ 'ADVANCEDSEARCH.RESET' | translate }}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <mat-card *ngIf="actvieJob" class="p-05 ml-1">
                        <gc-candidate-list [candidateSearchCriteria]="candidateSearchCriteria"
                            [isCandidateExists]="isCandidateExists" (selectCandidate)="selectCandidate($event);" [isInterviewerBoard]="false"
                            [job]="actvieJob" (candiateAddedEmit)="candiateAdded($event)">
                        </gc-candidate-list>
                    </mat-card>
                    <div fxLayout="row wrap" class="mt-1 p-05 ml-05 ">
                        <div fxFlex="90px" fxLayoutAlign="start center">
                            <span>
                                <h6 class="unique-details-text custom-activity-margin">
                                    {{'USERSTORYUNIQUE.COMMENTS'|translate}} </h6>
                            </span>
                        </div>
                    </div>
                    <div class="unqiue-activity-tab ml-05">
                        <div fxFlex>
                            <snovasys-comments *ngIf="actvieJob.jobOpeningId" [receiverId]="actvieJob.jobOpeningId"
                                [componentModel]="componentModel" [isPermissionExists]="true">
                            </snovasys-comments>
                        </div>
                    </div>
                </mat-card-content>
            </div>
            <div fxFlex="33" *ngIf="selectedCandidate">
                <mat-card class="p-0">

                    <gc-candidate-detail *ngIf="selectedCandidate" [candidateId]="selectedCandidate"
                        [isCandidatePage]="true" (candidateCloseClicked)="candidateCloseClicked()"
                        [selectedTab]="selectedTab" (candidateUpdated)="candidateUpdated($event)" [job]="actvieJob">
                    </gc-candidate-detail>

                </mat-card>
            </div>
        </div>
    </mat-card>
</div>
<div *ngIf="isJobArchived && canAccess_feature_Viewjobopening">
    <app-common-message-box
        textToDisplay="{{ 'JOBOPENING.JOBOPENINGARCHIVED' | translate | softLabelsPipe : softLabels}}">
        <ng-template ng-message-tmp>
            <button mat-button mat-raised-button class="mr-05 text-center mt-1" color="primary"
                (click)="redirectToRecruitment()">
                {{ 'JOBOPENING.GOTORECRUITMENT' | translate | softLabelsPipe : softLabels}}
            </button>
        </ng-template>
    </app-common-message-box>
</div>
<ng-container *ngIf="!(canAccess_feature_Viewjobopening)">
    <app-common-message-box textToDisplay="{{'DONTHAVEANYPERMISSIONS'|translate}}">
    </app-common-message-box>
</ng-container>