<div>
    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isLoading">
    </mat-progress-bar>
    <mat-card style="max-height: 100vh !important;margin:0px !important;padding: 0px 0px 0px 0px !important;"
        id="style-1">
        <div fxFlex fxLayout="column" style="margin-top:8px;">
            <div fxFlex="100" fxLayout="row" class="mb-1">
                <div fxFlex="10">
                    <ng-select fxLayoutAlign="center center" [items]="options1" bindLabel="label" bindValue="value"
                        (change)="productTypeChangeEvent($event)" [(ngModel)]="productType" placeholder="Select Type"
                        [multiple]="false" style="border: 1px solid #ced4da;border-radius:0.25rem;cursor: pointer;">
                    </ng-select>
                </div>
                <div fxFlex="30" class="ml-1">
                    <ng-select fxLayoutAlign="center center" [items]="options" bindLabel="label" bindValue="value"
                        (change)="valueChangeEvent($event)" [(ngModel)]="contractUniqueId"
                        placeholder="Contract Unique ID" [multiple]="false"
                        style="border: 1px solid #ced4da;border-radius:0.25rem;cursor: pointer;">
                    </ng-select>
                </div>
                <div fxFlex="50">
                    <div fxFlex fxLayout="row nowrap" fxLayoutAlign="center start" fxLayoutAlign.xs="center center"
                        fxLayoutAlign.sm="end center">
                        <div class="tracker-day-filter" fxLayoutAlign="center center" fxLayoutAlign.xs="center center"
                            fxLayoutAlign.sm="end center" style="margin-right:6px !important;">
                            <div fxLayout="row wrap">
                                <div fxFlex fxLayout="row" class="date-value-margin">
                                    <input matInput [matDatepicker]="picker2"
                                        class="date-picker tracker-date-filter-value date-picker-size cursor-date"
                                        (dateChange)="getDataList()" (click)="picker2.open()" [(ngModel)]='dateFrom'
                                        [readonly]="true"
                                        style="width:120px;border: none;padding: 0px 10px;color: #2f3065 !important;font-weight: 500;">
                                    <fa-icon icon="calendar" (click)="picker2.open()" aria-hidden="true"
                                        class="mr-05 mt-06"
                                        style="color:#2f3065;font-weight: 400;font-size: large;cursor: pointer;"></fa-icon>
                                    <mat-datepicker #picker2></mat-datepicker>
                                </div>
                            </div>
                        </div>
                        <div class="tracker-day-filter" fxLayoutAlign="center center" fxLayoutAlign.xs="center center"
                            fxLayoutAlign.sm="end center">
                            <div fxLayout="row wrap">
                                <div fxFlex fxLayout="row" class="date-value-margin">
                                    <input matInput [matDatepicker]="picker3"
                                        class="date-picker tracker-date-filter-value date-picker-size cursor-date"
                                        (click)="picker3.open()" [(ngModel)]='dateTo' [readonly]="true"
                                        (dateChange)="getDataList()"
                                        style="width:120px;border: none;padding: 0px 10px;color: #2f3065 !important;font-weight: 500;">
                                    <fa-icon icon="calendar" (click)="picker3.open()" aria-hidden="true"
                                        class="mr-05 mt-06"
                                        style="color:#2f3065;font-weight: 400;font-size: large;cursor: pointer;"></fa-icon>
                                    <mat-datepicker #picker3></mat-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div fxFlex fxLayout="column" #cpodashboard>
                <div fxLayout="row nowrap" fxLayout.md="row wrap" class="ml-02">
                    <div fxFlex fxFlex.md="33">
                        <mat-card class="insights-grids-mat-card mat-card-height dashboard-font">
                            <mat-card-content>
                                <div class="insights-grids-text">
                                    <div fxFlex class="mb-05">
                                        <div class="dashboard-font"> Source Commodity</div>
                                    </div>
                                </div>
                                <div class="insights-grids-value text-red dashboard-font">
                                    <div class="dashboard-font" *ngIf="sourceCommodity">{{
                                        sourceCommodity}}
                                    </div>
                                    <div class="dashboard-font" *ngIf="!sourceCommodity">NA
                                    </div>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                    <div fxFlex fxFlex.md="33">
                        <mat-card class="insights-grids-mat-card mat-card-height dashboard-font">
                            <mat-card-content>
                                <div class="insights-grids-text">
                                    <div fxFlex class="mb-05">
                                        <div class="dashboard-font">Contract Qty (MT)</div>
                                    </div>
                                </div>
                                <div class="insights-grids-value text-blue">
                                    <div class="dashboard-font" *ngIf="totalContractQuantity">
                                        {{getFormatData(totalContractQuantity)}}
                                    </div>
                                    <div class="dashboard-font" *ngIf="!totalContractQuantity">0
                                    </div>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>

                    <div fxFlex fxFlex.md="33">
                        <mat-card class="insights-grids-mat-card mat-card-height dashboard-font">
                            <mat-card-content>
                                <div class="insights-grids-text">
                                    <div fxFlex class="mb-05">
                                        <div class="dashboard-font">Utilized in 2022 Qty (MT)</div>
                                    </div>
                                </div>
                                <div class="insights-grids-value text-green">
                                    <div class="dashboard-font" *ngIf="utilizedQuantity">
                                        {{getFormatData(utilizedQuantity)}}
                                    </div>
                                    <div class="dashboard-font" *ngIf="!utilizedQuantity">0
                                    </div>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                    <div fxFlex fxFlex.md="33">
                        <mat-card class="insights-grids-mat-card mat-card-height dashboard-font">
                            <mat-card-content>
                                <div class="insights-grids-text">
                                    <div fxFlex class="mb-05">
                                        <div class="dashboard-font"> Net Purchases Jan 2023 (MT)</div>
                                    </div>
                                </div>
                                <div class="insights-grids-value text-red">
                                    <div class="dashboard-font" *ngIf="netPurchases">{{getFormatData(netPurchases)}}
                                    </div>
                                    <div class="dashboard-font" *ngIf="!netPurchases">0
                                    </div>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                    <div fxFlex fxFlex.md="33">
                        <mat-card class="insights-grids-mat-card mat-card-height dashboard-font">
                            <mat-card-content>
                                <div class="insights-grids-text">
                                    <div fxFlex class="mb-05">
                                        <div class="dashboard-font"> SOT Qty (MT) </div>
                                    </div>
                                </div>
                                <div class="insights-grids-value text-primary">
                                    <div class="dashboard-font" *ngIf="totalSotQuantity">
                                        {{getFormatData(totalSotQuantity)}}
                                    </div>
                                    <div class="dashboard-font" *ngIf="!totalSotQuantity">0
                                    </div>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                    <div fxFlex fxFlex.md="33">
                        <mat-card class="insights-grids-mat-card mat-card-height dashboard-font">
                            <mat-card-content>
                                <div class="insights-grids-text">
                                    <div fxFlex class="mb-05">
                                        <div class="dashboard-font"> Add Back YTD (MT)</div>
                                    </div>
                                </div>
                                <div class="insights-grids-value text-yellow">
                                    <div class="dashboard-font" *ngIf="addBack">{{getFormatData(addBack)}}
                                    </div>
                                    <div class="dashboard-font" *ngIf="!addBack">0
                                    </div>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>

                    <div fxFlex fxFlex.md="33">
                        <mat-card class="insights-grids-mat-card mat-card-height dashboard-font">
                            <mat-card-content>
                                <div class="insights-grids-text">
                                    <div fxFlex class="mb-05">
                                        <div class="dashboard-font"> Utilization YTD (MT)</div>
                                    </div>
                                </div>
                                <div class="insights-grids-value text-green">
                                    <div class="dashboard-font" *ngIf="utilization">{{getFormatData(utilization)}}
                                    </div>
                                    <div class="dashboard-font" *ngIf="!utilization">0
                                    </div>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                    <div fxFlex fxFlex.md="33">
                        <mat-card class="insights-grids-mat-card mat-card-height dashboard-font">
                            <mat-card-content>
                                <div class="insights-grids-text">
                                    <div fxFlex class="mb-05">
                                        <div class="dashboard-font"> Total P & L</div>
                                    </div>
                                </div>
                                <div class="insights-grids-value text-purple">
                                    <div class="dashboard-font" *ngIf="pandLINR" style="font-size: 16px !important;">
                                        {{getFormatData(pandLINR)}}(INR)
                                    </div>
                                    <div class="dashboard-font" *ngIf="!pandLINR">00000(INR)
                                    </div>
                                    <div class="dashboard-font" *ngIf="pandLUSD" style="font-size: 16px !important;">
                                        {{getFormatData(pandLUSD)}}(USD)
                                    </div>
                                    <div class="dashboard-font" *ngIf="!pandLUSD">00000(USD)
                                    </div>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                </div>
                <div fxFlex="100" class="mb-1" style="margin-top:7px;">
                    <table mat-table [dataSource]="positionData">
                        <ng-container matColumnDef="producedCommodity">
                            <th mat-header-cell *matHeaderCellDef> PRODUCED COMMODITY
                            </th>
                            <td mat-cell *matCellDef="let element"
                                [ngClass]="element.isBold == true ? 'text-bold' : ''">
                                {{element.producedCommodity}} </td>
                        </ng-container>


                        <ng-container matColumnDef="producedQuantity">
                            <th mat-header-cell *matHeaderCellDef> PRODUCED QTY (YTD)
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{getFormatData(element.producedQuantity)}} </td>
                        </ng-container>


                        <ng-container matColumnDef="soldQuantity">
                            <th mat-header-cell *matHeaderCellDef> SOLD QTY (YTD)
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{getFormatData(element.soldQuantity)}} </td>
                        </ng-container>


                        <ng-container matColumnDef="realisedValue">
                            <th mat-header-cell *matHeaderCellDef> REALISED VALUE (YTD)
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{getFormatData(element.realisedValue)}} </td>
                        </ng-container>

                        <ng-container matColumnDef="availableBalance">
                            <th mat-header-cell *matHeaderCellDef> AVAILABLE BALANCE (YTD)
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{getFormatData(element.availableBalance)}} </td>
                        </ng-container>

                        <ng-container matColumnDef="mtmRate">
                            <th mat-header-cell *matHeaderCellDef class="mtm-rate-width"> MTM RATE
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{getFormatData(element.mtmRate)}} </td>
                        </ng-container>

                        <ng-container matColumnDef="unRealisedValue">
                            <th mat-header-cell *matHeaderCellDef> UNREALISED VALUE
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{getFormatData(element.unRealisedValue)}} </td>
                        </ng-container>

                        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                        <mat-row *matRowDef="let row; columns: displayedColumns;"
                            [ngClass]="{'row-background': row.isBackground === true}"></mat-row>
                    </table>

                </div>
            </div>

        </div>
        <br />
    </mat-card>
</div>