<div class="m-1">
    <button type="button" mat-raised-button color="accent" (click)="openDialog()">Add Modules</button>
    <button type="button" mat-raised-button color="accent" (click)="goToAddModule()" class="pull-right">Go To Modules
        Page</button>
</div>
<mat-progress-bar color="primary" mode="indeterminate" *ngIf="isLoading">
</mat-progress-bar>
<kendo-grid [data]="getDynamicModuleData">
    <!-- (cellClick)="selectedRow($event)"> -->

    <kendo-grid-column title="Sr. No" [width]="60">
        <ng-template kendoGridHeaderTemplate let-column="col">
            <span matTooltipClass="tooltipClass-mat" matTooltip="Sr. No" class="headers-color">Sr. No</span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-rowIndex="rowIndex">
            {{rowIndex+1}}
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column title="Module Name" field="name">
        <ng-template kendoGridHeaderTemplate let-column="col">
            <span matTooltipClass="tooltipClass-mat" matTooltip="Module Name" class="headers-color">Module Name</span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem>
            {{dataItem.dynamicModuleName}}
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column title=" Module Icon" field="country">
        <ng-template kendoGridHeaderTemplate let-column="col">
            <span matTooltipClass="tooltipClass-mat" matTooltip="Module Icon" class="headers-color">Module Icon</span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem>
           <!-- <div class="avatar-upload" style="margin:0 auto;" *ngIf="dataItem.moduleIcon">
             <div class="avatar-preview" id="imagePreview" matTooltipClass="tooltipClass-mat"
               matTooltip="Module Icon">
               <img class="upload-image" src="{{dataItem.moduleIcon}}" />
             </div>
           </div> -->
           <div [ngStyle]="{ 'margin-bottom': dataItem.moduleIcon ? '10px' : '0px' }" fxLayoutAlign="start center">
            <app-avatar 
                fxLayoutAlign="start center" matTooltipClass="tooltipClass-mat" matTooltip="{{ dataItem.dynamicModuleName }}"
                [src]="dataItem.moduleIcon | fetchSizedAndCachedImage: '20':''"
                [isRound]="true" size="20">
            </app-avatar>
        </div>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column title="Tabs List" field="roleNames" [width]="350">
        <ng-template kendoGridHeaderTemplate let-column="col">
            <span matTooltipClass="tooltipClass-mat" matTooltip="Tabs List" class="headers-color">Tabs List</span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem>
            {{dataItem.dynamicTabNames}}
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column title="Edit Permission" field="kycCompleted">
        <ng-template kendoGridHeaderTemplate let-column="col">
            <span matTooltipClass="tooltipClass-mat" matTooltip="Edit Permission" class="headers-color">Edit
                Permission</span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem>
            {{dataItem.editRoleName}}
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column title="view Permission">
        <ng-template kendoGridHeaderTemplate let-column="col">
            <span matTooltipClass="tooltipClass-mat" matTooltip="view Permission" class="headers-color">View
                Permission</span>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem>
            {{dataItem.viewRoleName}}
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column title="Actions">
        <ng-template kendoGridHeaderTemplate let-column="col">
            <span matTooltipClass="tooltipClass-mat" matTooltip="Actions" class="headers-color">Actions</span>
        </ng-template>

        <ng-template kendoGridCellTemplate let-dataItem>
            <button mat-icon-button class="material-icons app-toolbar-menu save-button" matTooltip="Edit"
                color="primary" (click)="selectedRow(dataItem)">
                <mat-icon>edit</mat-icon>
            </button>&nbsp;&nbsp;

            <button mat-icon-button class="material-icons app-toolbar-menu delete-button" matTooltip="Delete" [satPopoverAnchorFor]="deleteModule"
            #deleteModulePopUp="satPopoverAnchor" (click)="deletePopUpOpen(deleteModulePopUp, dataItem);$event.stopPropagation();"
                color="warn">
                <mat-icon>delete</mat-icon>
            </button>
        </ng-template>
    </kendo-grid-column>
</kendo-grid>
<sat-popover #deleteModule verticalAlign="start" hasBackdrop horizontalAlign="before">
    <mat-card class="filter-data p-0">
        <mat-card-title class="text-center">
            <div class="card-title-text mat-bg-primary p-05">
                Delete Module</div>
        </mat-card-title>
        <p class="p-05 m-0">Are you sure want to delete this module
        </p>
        <div class="text-center p-05">
            <button  mat-raised-button color="primary" class="mr-1 glossy-button-button" (click)="deleteDynamicModule()">
                <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isDeleteLoading">
                </mat-progress-bar>
                <fa-icon icon="check" class="mr-05"></fa-icon> Yes
            </button>
            <button mat-raised-button class="mr-1" (click)="closeDeletePopUp()" [disabled]="isDeleteLoading">
                <fa-icon icon="times" class="mr-05"></fa-icon> No
            </button>
        </div>
    </mat-card>
</sat-popover>