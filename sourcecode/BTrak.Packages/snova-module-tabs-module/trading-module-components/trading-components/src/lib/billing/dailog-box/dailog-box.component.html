<div style="max-height: calc(100vh - 90px) !important;" id="style-1">
    <form [formGroup]="moduleForm" novalidate #formDirective="ngForm">
        <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutGap="10px">
            <mat-form-field class="full-width" fxFlex>
                <input matInput formControlName="moduleName" placeholder="Module Name" required>
                <mat-error *ngIf="moduleForm.get('moduleName').hasError('maxlength')">
                    Max length error</mat-error>
                <mat-error
                    *ngIf="moduleForm.get('moduleName').hasError('required') && moduleForm.get('moduleName').touched">
                    Required error
                </mat-error>
            </mat-form-field>

            <div class="mar">
                <div class="group-gap mb-lg-auto">
                    <!-- Upload image -->
                    <div class="avatar-upload cursor" (click)="fileUpload.click()" style="margin:0 auto;">
                        <div class="avatar-edit" style="margin:0 auto;">
                            <input type='file' id="imageUpload" formControlName="moduleIcon"
                                accept=".jpeg, .jpg, .png, .gif" #fileUpload
                                (change)=clientuploadEventHandler($event.target.files)
                                matTooltipClass="tooltipClass-mat" matTooltip="Upload File" />
                        </div>
                        <button mat-mini-fab color="primary" class="upload-btn">
                            <mat-icon>attach_file</mat-icon>
                        </button>
                    </div>
                </div>
            </div>

            <mat-form-field class="full-width" fxFlex>
                <mat-select placeholder="View Permission" formControlName="viewPermission" multiple required>
                    <mat-option *ngFor="let item of roles" [value]="item.roleId">
                        {{item.roleName}}
                    </mat-option>
                </mat-select>
                <mat-error
                    *ngIf="moduleForm.get('viewPermission').hasError('required') && moduleForm.get('viewPermission').touched">
                    Please slect role</mat-error>
            </mat-form-field>


            <mat-form-field class="full-width" fxFlex>
                <mat-select multiple placeholder="Edit Permission" formControlName="editPermission" required>
                    <mat-option *ngFor="let item of roles" [value]="item.roleId">
                        {{item.roleName}}
                    </mat-option>
                </mat-select>
                <mat-error
                    *ngIf="moduleForm.get('editPermission').hasError('required') && moduleForm.get('editPermission').touched">
                    Please slect role</mat-error>
            </mat-form-field>
        </div>
        <!-- <span style="font-weight: bold;">Module Icon</span>
        <div class="custom-hrm-dropzone">
            <app-dropzone [moduleTypeId]="moduleTypeId" [isToUploadFiles]="toUploadFiles"
                [referenceTypeId]="referenceTypeId" [getFilesByReferenceId]="true"
                [referenceId]="referenceId" [selectedParentFolderId]="selectedParentFolderId"
                [selectedStoreId]="selectedStoreId" [isButtonVisible]="false" (isFilesExist)="filesExist($event)"
                (closeFilePopup)="closeFilePopup()">
            </app-dropzone>
        </div> -->
        <button mat-raised-button color="primary" (click)="addTab()">Add Tab</button>
        <br>
        <div formArrayName="tabs">
            <mat-progress-bar color="primary" mode="indeterminate" *ngIf="tabsInprogress">
            </mat-progress-bar>
            <div *ngFor="let item of getTabs.controls; let i=index">
                <div [formGroupName]="i">
                    <!-- <span class="badge-item test-case-step-count count-padding">{{i + 1}}</span> -->
                    <div fxFlex fxLayout="row wrap" fxLayout.xs="column" fxLayoutGap="15px">
                        <input formControlName="dynamicTabId" matInput hidden />
                        <!-- <mat-form-field class="dynamic-tab full-width" fxFlex>
                            <input matInput   formControlName="dynamicTabId" placeholder="DynamicTabId">
                        </mat-form-field>&nbsp;&nbsp; -->
                        <mat-form-field class="full-width" fxFlex>
                            <input matInput formControlName="tabName" placeholder="Tab Name" required>
                            <mat-error *ngIf="getTabs.controls[i].get('tabName')?.errors?.maxlength">
                                Max length error</mat-error>
                            <mat-error
                                *ngIf="getTabs.controls[i].get('tabName')?.errors?.required && getTabs.controls[i].get('tabName')?.touched">
                                Required error
                            </mat-error>
                        </mat-form-field>&nbsp;&nbsp;
                        <mat-form-field class="full-width" fxFlex>
                            <mat-select placeholder="View Tab Permission" formControlName="viewTabPermission" required
                                multiple>
                                <mat-option *ngFor="let item of roles" [value]="item.roleId">
                                    {{item.roleName}}
                                </mat-option>
                            </mat-select>
                            <mat-error
                                *ngIf="getTabs.controls[i].get('viewTabPermission')?.errors?.required && getTabs.controls[i].get('viewTabPermission')?.touched">
                                Please slect role</mat-error>
                        </mat-form-field>&nbsp;&nbsp;
                        <mat-form-field class="full-width" fxFlex>
                            <mat-select placeholder="Edit Tab Permission" formControlName="editTabPermission" required
                                multiple>
                                <mat-option *ngFor="let item of roles" [value]="item.roleId">
                                    {{item.roleName}}
                                </mat-option>
                            </mat-select>
                            <mat-error
                                *ngIf="getTabs.controls[i].get('editTabPermission')?.errors?.required && getTabs.controls[i].get('editTabPermission')?.touched">
                                Please slect role</mat-error>
                        </mat-form-field>
                        <!-- <img class="Addbutton" src="../../assets/Images/icons8-macos-maximize-90.png" (click)="addTab()"> -->

                        <button matTooltipClass="tooltipClass-mat" mat-icon-button matTooltip="Add Another Tab"
                            (click)="addTab()" [disabled]="isLoading">
                            <fa-icon icon="plus" style="cursor: pointer;" class="action-icon-color">
                            </fa-icon>​
                        </button>
                        <button matTooltipClass="tooltipClass-mat" mat-icon-button matTooltip="Close Current Tab"
                            (click)="removeDynamicTabStep(i)" [disabled]="isLoading">
                            <fa-icon icon="minus" style="cursor: pointer;" class="action-icon-color">
                            </fa-icon>​
                        </button>
                        <!-- <img class="Addbutton" src="../../assets/Images/icons8-minus-sign-96.png" (click)="removeDynamicTabStep(i)"> -->
                    </div>
                </div>
            </div>

        </div>
    </form>

    <div style="padding: 0px 500px 0px 500px;">
        <div fxFlex fxLayout="column">
            <div fxFlex="100" fxLayout="row" class="text-center">
                <button mat-raised-button="" type="reset" mat-dialog-close [disabled]="isLoading"
                    class="mat-focus-indicator  dark-blue-shadow mat-raised-buttonmat-button-base"
                    style="color: #0020B8 !important;"><span class="mat-button-wrapper">
        
                        Cancel </span><span matripple="" class="mat-ripple mat-button-ripple"></span><span
                        class="mat-button-focus-overlay"></span></button>&nbsp;&nbsp;
                <button mat-raised-button color="primary" [disabled]="isLoading" type="submit"
                    [disabled]="(moduleForm && !moduleForm.valid)" (click)="saveIcon()">
                    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isLoading">
                    </mat-progress-bar>
                    Save</button>
            </div>

        </div>

    </div>
</div>