<mat-card class="dashboard-table-height" id="style-1">
    <div fxFlex fxLayout="column">
        <div fxFlex="100" fxLayout="row" class="mb-1">
            <div fxFlex="20">
                <ng-select fxLayoutAlign="center center" [items]="options" bindLabel="label" bindValue="value"
                    [disabled]=true (change)="valueChangeEvent($event)" [(ngModel)]="commodity"
                    placeholder="Select Product Group" [multiple]="false"
                    style="border: 1px solid #ced4da;border-radius:0.25rem">
                </ng-select>
            </div>
            <div fxFlex="20" class="ml-1">

            </div>
            <div fxFlex="30">
                <div fxFlex fxLayout="row nowrap" fxLayoutAlign="center start" fxLayoutAlign.xs="center center"
                    fxLayoutAlign.sm="end center">
                    <div class="tracker-day-filter" *ngIf="filterType==='dateRange'" fxLayoutAlign="center center"
                        fxLayoutAlign.xs="center center" fxLayoutAlign.sm="end center">
                        <div *ngIf="filterType==='dateRange'" fxLayout="row wrap">
                            <div fxFlex fxLayout="row" class="date-value-margin">
                                <input matInput [matDatepicker]="picker2"
                                    class="date-picker tracker-date-filter-value date-picker-size"
                                    (dateChange)="getDataList()" (click)="picker2.open()" [(ngModel)]='dateFrom'
                                    [readonly]="true"
                                    style="width:120px;border: none;padding: 0px 10px;color: #2f3065 !important;font-weight: 500;">
                                <fa-icon icon="calendar" (click)="picker2.open()" aria-hidden="true" class="mr-05"
                                    style="color:#2f3065;font-weight: 400;font-size: large;cursor: pointer;"></fa-icon>
                                <mat-datepicker #picker2></mat-datepicker>
                            </div>
                        </div>
                    </div>
                    <div class="tracker-day-filter" *ngIf="filterType==='dateRange'" fxLayoutAlign="center center"
                        fxLayoutAlign.xs="center center" fxLayoutAlign.sm="end center">
                        <div *ngIf="filterType==='dateRange'" fxLayout="row wrap">
                            <div fxFlex fxLayout="row" class="date-value-margin">
                                <input matInput [matDatepicker]="picker3"
                                    class="date-picker tracker-date-filter-value date-picker-size"
                                    (click)="picker3.open()" [(ngModel)]='dateTo' [readonly]="true"
                                    (dateChange)="getDataList()"
                                    style="width:120px;border: none;padding: 0px 10px;color: #2f3065 !important;font-weight: 500;">
                                <fa-icon icon="calendar" (click)="picker3.open()" aria-hidden="true" class="mr-05"
                                    style="color:#2f3065;font-weight: 400;font-size: large;cursor: pointer;"></fa-icon>
                                <mat-datepicker #picker3></mat-datepicker>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="filterType==='day' || filterType==='week' || filterType==='month'"
                        fxLayoutAlign="center center" fxLayoutAlign.xs="center center" fxLayoutAlign.sm="end center">
                        <div *ngIf="filterType!='dateRange'" fxFlex="20px" fxLayoutAlign="center center" class="mr-05">
                            <fa-icon icon="circle-chevron-left" (click)="getBackwordValues()" aria-hidden="true"
                                style="color:#2f3065;font-weight: 400;font-size: 22px;cursor: pointer;">
                            </fa-icon>
                        </div>
                        <div class="tracker-day-filter" fxLayoutAlign="center center" fxLayoutAlign.xs="center center"
                            fxLayoutAlign.sm="end center">
                            <div *ngIf="filterType==='day'" fxLayout="row wrap">
                                <div fxFlex fxLayout="row" class="date-value-margin">
                                    <input matInput [matDatepicker]="picker1" (dateChange)="onDateChange($event)"
                                        class="date-picker tracker-date-filter-value date-picker-size"
                                        (click)="picker1.open()" [(ngModel)]='dateToday' [readonly]="true"
                                        style="width:120px;border: none;padding: 0px 10px;color: #2f3065 !important;font-weight: 500;">
                                    <fa-icon icon="calendar" (click)="picker1.open()" aria-hidden="true" class="mr-05"
                                        style="color:#2f3065;font-weight: 400;font-size: large;cursor: pointer;">
                                    </fa-icon>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </div>
                            </div>
                            <div *ngIf="filterType==='week'" fxLayoutAlign="center center" style="font-size: 15px;">
                                <span class="tracker-date-filter-value" [matTooltipShowDelay]="1000"
                                    [matTooltipShowDelay]="1000"
                                    matTooltip="{{dateFrom | date: 'dd MMM yyyy'}}  to  {{dateTo | date: 'dd MMM yyyy'}}"
                                    style="color: #2f3065 !important;font-weight: 500;">&nbsp;&nbsp;&nbsp;&nbsp;{{selectedWeek
                                    | date: "MMM yyyy"}}
                                    &nbsp;&nbsp;</span><span style="color: #2f3065 !important;font-weight: 500;"
                                    class="tracker-date-filter-value">W{{weekNumber}}&nbsp;&nbsp;&nbsp;&nbsp;</span>
                            </div>
                            <div *ngIf="filterType==='month'" fxLayoutAlign="center center" style="font-size: 15px;">
                                <span class="tracker-date-filter-value" [matTooltipShowDelay]="1000"
                                    [matTooltipShowDelay]="1000" style="color: #2f3065 !important;font-weight: 500;"
                                    matTooltip="{{dateFrom | date: 'dd MMM yyyy'}}  to  {{dateTo | date: 'dd MMM yyyy'}}">&nbsp;&nbsp;&nbsp;&nbsp;{{selectedMonth
                                    | date:
                                    "MMMM yyyy"}}&nbsp;&nbsp;&nbsp;&nbsp;</span>
                            </div>
                        </div>
                        <div *ngIf="filterType!='dateRange'" fxFlex="19px" fxLayoutAlign="center center" class="ml-05">
                            <fa-icon icon="circle-chevron-right" (click)="getForwordValues()" aria-hidden="true"
                                style="color:#2f3065;font-weight: 400;font-size: 22px;cursor: pointer;"></fa-icon>
                        </div>
                    </div>
                </div>
            </div>
            <div fxFlex="30.5" fxLayout="row">
                <mat-button-toggle-group name="dateRange" aria-label="Date filter" class="button-group-size pt-pl"
                    (change)="onChange($event)" [value]="buttonSelected" fxLayoutAlign="center center">
                    <mat-button-toggle value="day" style="width:90px !important;font-size:18px;"><span
                            class="mat-button-wrapper">Day
                        </span></mat-button-toggle>
                    <mat-button-toggle value="week" style="width:90px !important;font-size:18px;">Week
                    </mat-button-toggle>
                    <mat-button-toggle value="month" style="width:90px !important;font-size:18px;">Month
                    </mat-button-toggle>
                    <mat-button-toggle value="dateRange" style="width:140px !important;font-size:18px;">Date Range
                    </mat-button-toggle>
                </mat-button-toggle-group>
            </div>
        </div>
        <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isLoadingInprogress">
        </mat-progress-bar>
        <div fxFlex fxLayout="column" #consolidatedDashboard>
            <div fxFlex fxLayout="row">
                <div class="col-md-6 col-lg-3 mb-4" style="margin-left: 0px !important;width:18% !important;">
                    <div class="card bg-red-light">
                        <div class="card-body align-items-center justify-content-between">
                            <div>
                                <h6 style="font-weight: bold;text-align: center;">Product Group</h6>
                                <h3 matTooltip={{commodity}} style="font-weight: bold;text-align: center;"
                                    class="mt-05 text-red hide-content-overflow"> {{commodity}}</h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3 mb-4" style="width:18% !important;">
                    <div class="card bg-blue-light">
                        <div class="card-body align-items-center justify-content-between">
                            <div>
                                <h6 style="font-weight: bold;text-align: center;">Total Import Contracts</h6>

                                <h3 matTooltip="{{totalImportContracts}}" style="font-weight: bold;text-align: center;"
                                    class="mt-05 text-blue hide-content-overflow">{{totalImportContracts}}</h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3 mb-4" style="width:18% !important;">
                    <div class="card bg-green-light">
                        <div class="card-body align-items-center justify-content-between">
                            <div fxFlex fxLayout="column" fxLayoutAlign="center center">
                                <h6 style="font-weight: bold;text-align: center;">Total Local Contracts</h6>
                                <h3 class="mt-05 text-green" style="font-weight: bold;text-align: center;">
                                    {{totalLocalContracts}}</h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3 mb-4" style="width:18% !important;">
                    <div class="card bg-primary-light">
                        <div class="card-body align-items-center justify-content-between">
                            <div fxFlex fxLayout="column" fxLayoutAlign="center center">
                                <h6 style="font-weight: bold;text-align: center;">Total Source Quantity(MT)</h6>
                                <h3 style="font-weight: bold;text-align: center;" class="mt-05 text-primary">
                                    {{totalSourceQuantity
                                    | number :'1.0-3'}}</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-3 mb-4" style="width:18% !important;">
                    <div class="card bg-cyan-light">
                        <div class="card-body align-items-center justify-content-between">
                            <div fxFlex fxLayout="column" fxLayoutAlign="center center">
                                <h6 style="font-weight: bold;text-align: center;">Total Sales Quantity(MT)</h6>
                                <h3 style="font-weight: bold;text-align: center;" class="mt-05 text-cyan">
                                    {{totalSalesQuantity
                                    | number :'1.0-3'}}</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div fxFlex>
                <table class="table" id="simple">
                    <thead>
                        <tr class="background-header">
                            <th scope="col" class="background-header-padding">
                                <!-- <a class="datatable-sorter" style="text-align: center;">
                                    <span>Product Group : {{productGroup}}</span>
                                </a> -->
                            </th>
                            <th scope="col" class="background-header-padding">
                                <a class="datatable-sorter" style="text-align: right !important;">
                                    <span style="text-align: right !important;">Opening Balance</span>
                                </a>
                            </th>
                            <th scope="col" class="background-header-padding">
                                <a class="datatable-sorter" style="text-align: right !important;">
                                    <span style="text-align: right !important;">Consumption</span>
                                </a>
                            </th>
                            <th scope="col" class="background-header-padding">
                                <a class="datatable-sorter" style="text-align: right !important;">
                                    <span style="text-align: right !important;">Production</span>
                                </a>
                            </th>
                            <th scope="col" class="background-header-padding">
                                <a class="datatable-sorter" style="text-align: right !important;">
                                    <span style="text-align: right !important;">Sales</span>
                                </a>
                            </th>
                            <th scope="col" class="background-header-padding">
                                <a class="datatable-sorter" style="text-align: right !important;">
                                    <span style="text-align: right !important;">Untagged Sales</span>
                                </a>
                            </th>
                            <th scope="col" class="background-header-padding">
                                <a class="datatable-sorter" style="text-align: right !important;">
                                    <span style="text-align: right !important;">Closing Balance</span>
                                </a>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of dataList" [style]="getIsBold(data)">
                            <td>{{data.productName}}
                                <!-- <span fxFlex fxLayoutAlign="center center">{{data.productName}}</span> -->
                            </td>
                            <td>
                                <span style="text-align: right !important;"
                                    *ngIf="data.isBold == false">{{data.openingBalance!=0?(data.openingBalance |
                                    number
                                    :'1.0-3'): 0}}</span>
                            </td>
                            <td>
                                <span style="text-align: right !important;">{{data.consumption!=0?(data.consumption |
                                    number
                                    :'1.0-3'):''}}</span>
                            </td>
                            <td>
                                <span style="text-align: right !important;">{{data.production!=0?(data.production |
                                    number
                                    :'1.0-3'):''}}</span>
                            </td>
                            <td>
                                <span style="text-align: right !important;">{{data.sales!=0?(data.sales | number
                                    :'1.0-3'):''}}</span>
                            </td>
                            <td>
                                <span style="text-align: right !important;">{{data.unTaggedSales!=0?(data.unTaggedSales
                                    |
                                    number
                                    :'1.0-3'):''}}</span>
                            </td>
                            <td>
                                <span style="text-align: right !important;">{{((data.openingBalance!=0 &&
                                    data.openingBalance!=null)||(data.consumption!=0 &&
                                    data.consumption!=null)||(data.production!=0 &&
                                    data.production!=null)||(data.sales!=0 && data.sales !=null)||
                                    (data.unTaggedSales!=0 &&
                                    data.unTaggedSales !=null))?(data.closingBalance |
                                    number
                                    :'1.0-3'):''}}</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <br />
            <br />
            <div fxFlex fxLayout="row" fxLayoutAlign="center center">
                <div fxFlex="100" class="profit-loss-card border-radius-card" (click)="enableProfitLossTable()"
                    style="cursor: pointer;">
                    <div class="card-body align-items-center justify-content-between" style="margin:auto" fxFlex="100">
                        <div fxFlex="35" fxLayoutAlign="center center" class="col-md-4 mr-4 cursor-pointer">
                            <div fxFlex fxLayout="row" class="ml-2">
                                <h3 class="profit-loss-text">P r o f i t & L o s s
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    <span class="dollar-icon">💰</span>
                                </h3>

                            </div>
                        </div>

                        <div fxFlex="10" fxLayoutAlign="end center" class="mr-2">
                            <fa-icon *ngIf="!enableProfitAndLoss" icon="chevron-down"
                                style="text-align: center; cursor: pointer;"></fa-icon>
                            <fa-icon *ngIf="enableProfitAndLoss" icon="chevron-up"
                                style="text-align: center; cursor: pointer;"></fa-icon>
                        </div>
                    </div>
                </div>
            </div>
            <table class="table" id="simple" *ngIf="enableProfitAndLoss">
                <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isLoadingPL"
                    style="display:table-caption !important;">
                </mat-progress-bar>
                <tr class="background-header">
                    <th scope="col" class="background-header-padding">
                        <a class="datatable-sorter" style="text-align: right !important;">
                            <span style="text-align: right !important;">Instance Name</span>
                        </a>
                    </th>

                    <th scope="col" class="background-header-padding">
                        <a class="datatable-sorter" style="text-align: right !important;">
                            <span style="text-align: right !important;color:green !important">Realised</span>
                        </a>
                    </th>
                    <th scope="col" class="background-header-padding">
                        <a class="datatable-sorter" style="text-align: right !important;">
                            <span style="text-align: right !important;color:red !important">Unrealised</span>
                        </a>
                    </th>
                    <th scope="col" class="background-header-padding">
                        <a class="datatable-sorter">
                            Total</a>
                    </th>
                </tr>
                <tr *ngFor="let data of pandLTableValues" [style]="getIsBold(data)">
                    <td style="vertical-align: 'middle';text-transform: capitalize !important;">{{data.vesselName}}</td>
                    <td style="vertical-align:middle !important;">{{data.realisedTotal | number
                        :'1.0-3'}}</td>
                    <td style="vertical-align:middle !important;">{{data.unRealisedTotal | number
                        :'1.0-3'}}</td>
                    <td style="vertical-align:middle !important;">
                        {{getTotalValue(data)}}
                    </td>

                </tr>
            </table>
        </div>

    </div>
</mat-card>