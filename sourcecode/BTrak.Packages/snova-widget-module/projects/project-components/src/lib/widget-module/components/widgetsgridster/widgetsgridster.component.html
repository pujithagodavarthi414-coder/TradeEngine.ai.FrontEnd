<div id="btrak-preloader" *ngIf="loading">
  <span class="preloading-text">
    {{ 'LOADINGPLEASEWAIT' | translate }} (<span id="loadingTime"></span> {{ 'SECONDS' | translate}})
  </span>
  <div id="btrak-loader" *ngIf="loading">
  </div>
</div>

<gridster [options]="options" (drop)="onDrop($event)"  class="p-0 vessel-widget-not-editable-background"
  *ngIf="isWidget && selectedWidgetsList.length > 0 && !loading && isScrollVisible == false" style="position: absolute;overflow : hidden !important;">
  <gridster-item [item]="widget" *ngFor="let widget of selectedWidgetsList;let i = index" id="{{idPrefix}}{{i}}">
    <div class="gridster-item-border widget-gridster m-0">
      <app-widget-loader [widget]="widget" [injector]="injector" (closePopUp)="closeAppPopUp($event)" (fileBytesData)="getFileDownload($event)">
      </app-widget-loader>
      <div class="floating-right-delete-button"
        *ngIf="(canAccess_feature_DragApps) && ((isWidget || isListView) && workspaceId) && allowCustomizations">
        <div class="handle" matTooltip="{{'APP.UNINSTALL' | translate}}" [satPopoverAnchorFor]="deleteApp"
          #deleteAppPopover="satPopoverAnchor" (click)="openDeleteAppPopover(deleteAppPopover,widget)">
          <mat-icon>delete</mat-icon>
        </div>
      </div>
    </div>
  </gridster-item>
</gridster>

<gridster [options]="options" (drop)="onDrop($event)" id="style-1" class="p-0 widget-not-editable-background"
  *ngIf="isWidget && selectedWidgetsList.length > 0 && !loading && isScrollVisible == true" style="position: absolute">
  <gridster-item [item]="widget" *ngFor="let widget of selectedWidgetsList;let i = index" id="{{idPrefix}}{{i}}">
    <div class="gridster-item-border widget-gridster m-0">
      <app-widget-loader [widget]="widget" [injector]="injector" (closePopUp)="closeAppPopUp($event)" (fileBytesData)="getFileDownload($event)">
      </app-widget-loader>
      <div class="floating-right-delete-button"
        *ngIf="(canAccess_feature_DragApps) && ((isWidget || isListView) && workspaceId) && allowCustomizations">
        <div class="handle" matTooltip="{{'APP.UNINSTALL' | translate}}" [satPopoverAnchorFor]="deleteApp"
          #deleteAppPopover="satPopoverAnchor" (click)="openDeleteAppPopover(deleteAppPopover,widget)">
          <mat-icon>delete</mat-icon>
        </div>
      </div>
    </div>
  </gridster-item>
</gridster>

<div class="gridster-item-border widget-gridster individual-app m-0"
  *ngIf="!isWidget && selectedWidgetsList.length > 0  && !loading">
  <app-widget-loader [widget]="selectedWidgetsList[0]" id="{{idPrefix}}0" [injector]="injector"
    (closePopUp)="closeAppPopUp($event)"></app-widget-loader>
</div>

<div class="text-center" *ngIf="!(selectedWidgetsList.length > 0) && !loading">
  {{ 'APP.EMPTYDASHBOARDTEXT' | translate }}
</div>

<sat-popover #deleteApp hasBackdrop backdropClass="backdrop-color" [restoreFocus]="false" verticalAlign="below"
  [interactiveClose]="false" horizontalAlign="end">
  <mat-card class="p-0">
    <mat-card-title class="text-center mat-bg-primary">
      <div class="card-title-text mb-1">{{ 'TESTMANAGEMENT.CONFIRMATION' | translate}}</div>
    </mat-card-title>
    <mat-card-content>
      <div class="card-content mb-1">
        {{ 'APP.APPDELETETEXT' | translate }}
      </div>
      <div class="text-center">
        <button class="mr-1" mat-button mat-raised-button color="accent" [disabled]="disableAppDelete"
          (click)="removeItem($event, selectedApp)">
          <fa-icon class="mr-05" icon="trash"></fa-icon> {{ 'APP.UNINSTALL' | translate }}
        </button>
        <button mat-button mat-raised-button (click)="closeDeleteAppPopover()">
          <fa-icon class="mr-05" icon="times"></fa-icon> {{'TESTMANAGEMENT.CANCEL' | translate}}
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</sat-popover>