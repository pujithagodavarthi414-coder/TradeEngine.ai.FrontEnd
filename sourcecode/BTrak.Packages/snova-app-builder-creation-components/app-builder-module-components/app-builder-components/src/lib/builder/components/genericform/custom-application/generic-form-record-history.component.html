<div class="custom-dialog">
    <div class="custom-close" mat-dialog-close (click)="onClose()">
        <fa-icon icon="times" class="project-dialog"></fa-icon>
    </div>
</div>
<mat-card class="full-height p-0  m-0" fxLayout='column'>
    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isLoading">
    </mat-progress-bar>
    <mat-card-content class="p-0 full-height" *ngIf="!isLoading" id="style-1" style="overflow: scroll;max-height: calc(100vh - 100px);">

        <div *ngFor="let history of historyRecords">
            <div fxLayout="row wrap" class="p-1">
                <div mat-card-avatar fxFlex="40px" class="mr-05">
                    <app-avatar
                        [name]="history.createdByUserId |userFilter : usersList : false  | removeSpecialCharacters"
                        [src]="history.createdByUserId |userFilter : usersList : true | fetchSizedAndCachedImage: '40':''"
                        [isRound]="true" size="40">
                    </app-avatar>
                </div>
                <div fxLayout="row wrap" fxFlex="93%">
                    <div fxFlex="100" style="margin-top: 8px !important;">
                        <div fxFlex="50">
                            <div *ngIf="history.description" class="assets-comments">
                                <b>{{history.createdByUserId |userFilter : usersList : false}}</b> created new record
                            </div>
                            <div *ngIf="!history.description">
                                <b>{{history.createdByUserId |userFilter : usersList : false}}</b> updated the
                                <b>{{history.label}}</b>

                            </div>
                        </div>
                        <div fxFlex fxLayoutAlign="start start">
                            <span class="pull-right" matTooltip="{{history.createdDateTime | timeZone : 'dd MMM yyyy h:mm:ss
                            a' }}">{{history.createdDateTime | timeZone : 'dd MMM
                                yyyy h:mm:ss a' }}</span>
                        </div>
                    </div>

                </div>
                <div fxLayout="column wrap" fxFlex="93%">
                    <div fxFlex="93%" style="margin-left: 46px !important;">

                        <div *ngIf="!history.oldValue && history.newValue">
                            <span *ngIf="history.type == 'number'">
                                None &nbsp;&nbsp;<fa-icon icon="arrow-right"></fa-icon>&nbsp;&nbsp; {{history.newValue |
                                number : '1.0-0'}}

                            </span>
                            <span
                                *ngIf="history.type == 'textfield' || history.type == 'select' || history.type == 'radio' || history.type == 'checkbox'  || history.type == 'selectBoxes'">
                                None &nbsp;&nbsp;<fa-icon icon="arrow-right"></fa-icon>&nbsp;&nbsp; {{history.newValue}}
                            </span>
                            <span *ngIf="history.type == 'datetime'">
                                None &nbsp;&nbsp;<fa-icon icon="arrow-right"></fa-icon>&nbsp;&nbsp;
                                {{getFormattedValue(history.format,history.newValue)}}
                            </span>

                        </div>
                        <div *ngIf="history.oldValue && history.newValue">
                            <span *ngIf="history.type == 'number'">
                                {{history.oldValue | number:'1.0-0'}} &nbsp;&nbsp;<fa-icon
                                    icon="arrow-right"></fa-icon>&nbsp;&nbsp; {{history.newValue | number : '1.0-0'}}
                            </span>
                            <span
                                *ngIf="history.type == 'textfield' || history.type == 'select' || history.type == 'radio' || history.type == 'checkbox' || history.type == 'selectBoxes'">
                                {{history.oldValue}} &nbsp;&nbsp;<fa-icon icon="arrow-right"></fa-icon>&nbsp;&nbsp;
                                {{history.newValue}}
                            </span>
                            <span *ngIf="history.type == 'datetime'">
                                {{getFormattedValue(history.format,history.oldValue)}} &nbsp;&nbsp;<fa-icon
                                    icon="arrow-right"></fa-icon>&nbsp;&nbsp;
                                {{getFormattedValue(history.format,history.newValue)}}
                            </span>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="p-1" *ngIf="!historyRecords && !isLoading">No data to display
        </div>

    </mat-card-content>
    <mat-paginator *ngIf="(totalCount > 20) && !(isLoading)" [length]="totalCount" class="mr-8" [pageSize]="pageSize"
        [pageIndex]="pageIndex" [pageSizeOptions]="pageSizeOptions" (page)="setPageEvent($event)">
    </mat-paginator>
</mat-card>