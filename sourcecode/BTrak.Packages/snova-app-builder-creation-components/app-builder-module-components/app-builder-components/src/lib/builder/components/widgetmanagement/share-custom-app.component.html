<mat-card class="p-0" style="width:500px !important;">

    <mat-card-title class="text-center mat-bg-primary">
        <div class="card-title-text mb-1">Share form
        </div>
    </mat-card-title>
    <mat-card-content class="pl-05">
        <div fxFlex>
            <form [formGroup]="mailAlertForm" novalidate>
                <div id="style-1" class="goal-create-height p-1">
                    <div fxLayout="row wrap" class="p-05 ">
                        <div fxFlex="98">
                            <div fxFlex fxLayout="row wrap">
                                <mat-form-field class="full-width" fxFlex="100">
                                    <mat-chip-list #chipList aria-label="Roles selection">
                                        <mat-chip *ngFor="let role of selectedRoles" [selectable]="selectable"
                                            [removable]="removable" (removed)="removeSelectedRole(role)"
                                            style="display: flex !important;">
                                            {{role.roleName}}
                                            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                                        </mat-chip>
                                        <input matInput placeholder="Select roles" #rolesInput
                                            #autocompleteTrigger="matAutocompleteTrigger" formControlName="rolesInput"
                                            [matAutocomplete]="auto" [matChipInputFor]="chipList"
                                            [matAutocomplete]="auto"
                                            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                            (matChipInputTokenEnd)="add($event)"
                                            (focus)="openAuto(autocompleteTrigger)">
                                    </mat-chip-list>
                                    <mat-autocomplete #auto="matAutocomplete"
                                        (optionSelected)="selectedRole($event.option.value)">
                                        <mat-option *ngFor="let roles of filteredRoles$ | async" [value]="roles.roleId">
                                            <mat-checkbox color="primary" style="padding: 0 12px;"
                                                [checked]="selectedRoles.indexOf(roles) >= 0"></mat-checkbox>
                                            {{roles.roleName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                    <mat-error>
                                        <span>
                                            Please select Role</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                        <div fxFlex="98">
                            <div fxFlex fxLayout="row wrap">
                                <mat-form-field class="full-width" fxFlex="100">
                                    <mat-chip-list #userChipList aria-label="Users selection">
                                        <mat-chip *ngFor="let user of selectedToUsers" [selectable]="selectable"
                                            [removable]="removable" (removed)="removeSelectedUser(user)"
                                            style="display: flex !important;">
                                            {{user.email}}
                                            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                                        </mat-chip>
                                        <input matInput placeholder="Select users" #userToInput
                                            #userAutocompleteTrigger="matAutocompleteTrigger" formControlName="toInput"
                                            [matAutocomplete]="toAuto" [matChipInputFor]="userChipList"
                                            [matAutocomplete]="toAuto"
                                            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                            (matChipInputTokenEnd)="addToUser($event)"
                                            (focus)="openUserAuto(userAutocompleteTrigger)">
                                    </mat-chip-list>
                                    <mat-autocomplete #toAuto="matAutocomplete"
                                        (optionSelected)="selectedTo($event.option.value)">
                                        <mat-option *ngFor="let user of filteredToUsers$ | async" [value]="user.userId">
                                            <mat-checkbox color="primary" style="padding: 0 12px;"
                                                [checked]="selectedToUsers.indexOf(user) >= 0"></mat-checkbox>
                                            {{user.fullName}} ({{user.email}})
                                        </mat-option>
                                    </mat-autocomplete>
                                    <span *ngIf="isValidate" class="chip-error">
                                        Invalid email
                                    </span>
                                    <mat-error>
                                        <span>
                                            Please select To</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center mt-05" style="margin-right:124px !important;">
                    <button class="pull-right mr-1" mat-raised-button (click)="shareMail()" color="primary"
                        [disabled]="!mailAlertForm.valid || isMailLoading">
                        <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isMailLoading">
                        </mat-progress-bar>
                        <fa-icon class="mr-05" icon="check"></fa-icon>
                        Save
                    </button>
                    <button class="pull-right mr-1" mat-raised-button (click)="closePopUp()" [disabled]="isMailLoading"
                        type="button">
                        <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isMailLoading">
                        </mat-progress-bar>
                        <fa-icon class="mr-05" icon="times"></fa-icon>
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </mat-card-content>
</mat-card>