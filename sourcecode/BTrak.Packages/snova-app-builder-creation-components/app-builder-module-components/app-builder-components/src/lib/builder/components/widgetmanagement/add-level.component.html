<div>
    <mat-card class="p-0 mr-0">
        <mat-card-title class="text-center">
            <div class="card-title-text  mat-bg-primary p-05 mb-1">{{isEdit ? 'Edit Level':'Add Level'}}
            </div>
        </mat-card-title>
        <mat-card-content class="P-05">
            <form [formGroup]="levelForm" #formDirective="ngForm" novalidate
                (submit)="levelForm.valid && upsertLevel(formDirective)">
                <div fxFlex fxLayout="column">
                    <div fxFlex fxLayout="column">
                        <mat-form-field>
                            <input matInput formControlName="level" type="number" min=1 (keypress)="numberOnly($event)" min="0" placeholder="Level Number" required>
                            <mat-error *ngIf="levelForm.get('level').hasError('min')">
                                Level should be greate than 0
                            </mat-error>
                            <mat-error
                                *ngIf="levelForm.get('level').hasError('required') && levelForm.get('level').touched">
                                Level is required
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <input matInput formControlName="levelName" placeholder="Level Name" required>
                            <mat-error *ngIf="levelForm.get('levelName').hasError('maxlength')">
                                Level Name is required
                            </mat-error>
                            <mat-error
                                *ngIf="levelForm.get('levelName').hasError('required') && levelForm.get('levelName').touched">
                                Level Name is required
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field class="full-width" (click)="$event.stopPropagation();">
                            <mat-select formControlName="pdfTemplate"  (selectionChange)="pdfSelected($event)"
                                placeholder="Pdf Template" required>
                                <mat-option [value]="template" *ngFor="let template of pdfTemplates">
                                    {{ template.fileName }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="levelForm.get('pdfTemplate').hasError('maxlength')">
                                Pdf Template is required
                            </mat-error>
                            <mat-error
                                *ngIf="levelForm.get('pdfTemplate').hasError('required') && levelForm.get('pdfTemplate').touched">
                                Pdf Template is required
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <input matInput formControlName="displayName" placeholder="Display Name" required>
                            <mat-error *ngIf="levelForm.get('displayName').hasError('maxlength')">
                                Display Name is required
                            </mat-error>
                            <mat-error
                                *ngIf="levelForm.get('displayName').hasError('required') && levelForm.get('displayName').touched">
                                Display Name is required
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <input matInput formControlName="path" placeholder="Path" required>
                            <mat-error *ngIf="levelForm.get('path').hasError('maxlength')">
                                Path is required
                            </mat-error>
                            <mat-error
                                *ngIf="levelForm.get('path').hasError('required') && levelForm.get('path').touched">
                                Path is required
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <input matInput formControlName="apiKey" placeholder="API Key" required>
                            <mat-error *ngIf="levelForm.get('apiKey').hasError('maxlength')">
                                API Key is required
                            </mat-error>
                            <mat-error
                                *ngIf="levelForm.get('apiKey').hasError('required') && levelForm.get('apiKey').touched">
                                API Key is required
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <input matInput formControlName="parameters" placeholder="Parameters" required>
                            <mat-error *ngIf="levelForm.get('parameters').hasError('maxlength')">
                                Parameters is required
                            </mat-error>
                            <mat-error
                                *ngIf="levelForm.get('parameters').hasError('required') && levelForm.get('parameters').touched">
                                Parameters is required
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="mt-1 text-center">
                        <button mat-raised-button color="primary" class="mr-1"
                            [disabled]="!levelForm.valid ||isAnyOperationIsInprogress">
                            <mat-progress-bar color="primary" mode="indeterminate" *ngIf="isAnyOperationIsInprogress">
                            </mat-progress-bar>
                            <fa-icon class="mr-05" icon="check"></fa-icon> Save
                        </button>
                        <button mat-button mat-raised-button (click)="closeUpsertLevelPopup(formDirective)"
                            type="button">
                            <fa-icon class="mr-05" icon="times"></fa-icon>
                            Cancel
                        </button>
                    </div>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>