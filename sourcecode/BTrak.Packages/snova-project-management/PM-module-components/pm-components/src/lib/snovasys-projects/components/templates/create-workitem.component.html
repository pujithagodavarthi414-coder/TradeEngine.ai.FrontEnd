<div class="p-05" *ngIf="!isUserStoryInputVisible">
    <a (click)="showUserstoryInput();" class="new-userstory">
        <fa-icon icon="plus" class="mr-05"></fa-icon>
        <span>
            {{ 'USERSTORY.CREATEAUSERSTORY' | translate | softLabelsPipe : softLabels }}
        </span>
    </a>
</div>
<div class="mt-05 mb-05 p-05" *ngIf="isUserStoryInputVisible">
    <form [formGroup]="createUserStory" #formDirective="ngForm" novalidate
        (submit)="createUserStory.valid && saveUserStory()">
        <div fxLayout="row wrap">
            <div fxFlex="12" fxLayout="column wrap" class="mr-05">
                <mat-form-field class="full-width custom-selectbox" (click)="$event.stopPropagation()">
                    <mat-select placeholder="{{ 'USERDETAIL.USERSTORYTYPE'|translate | softLabelsPipe : softLabels}}" formControlName="userStoryTypeId" required>
                        <mat-option *ngFor="let userStoryType of (userStoryTypes$ | async)"
                            [value]="userStoryType.userStoryTypeId">
                            {{ userStoryType.userStoryTypeName | softLabelsPipe : softLabels}}
                        </mat-option>
                    </mat-select>
                    <mat-error>
                        <span
                            *ngIf="!createUserStory.get('userStoryTypeId').valid && createUserStory.get('userStoryTypeId').touched">
                            {{ 'USERSTORY.PLEASESELECTUSERSTORYTYPE' | translate | softLabelsPipe : softLabels}}
                        </span>
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxFlex fxLayout="column wrap" class="full-width mr-05">
                <mat-form-field class="full-width">
                    <textarea formControlName="userStoryName" matInput rows="3" matInputAutofocus 
                        placeholder="{{ 'USERSTORY.USERSTORY' | translate | softLabelsPipe : softLabels}}" trim required></textarea>
                    <mat-error>
                        <span
                            *ngIf="createUserStory.get('userStoryName').hasError('required') && createUserStory.get('userStoryName').touched">
                            {{ 'USERSTORY.PLEASEENTERUSERSTORYNAME' | translate | softLabelsPipe : softLabels}}
                        </span>
                    </mat-error>
                </mat-form-field>
            </div>
        </div>

        <div class="text-center p-05">
            <button mat-raised-button color="primary"
                [disabled]="!createUserStory.valid || (anyOperationInProgress$ |async)" class="mr-05" type="submit"
                title="{{ 'ADD' | translate }}" (click)="saveUserStory()">
                <mat-progress-bar color="primary" mode="indeterminate" *ngIf="(anyOperationInProgress$ |async)">
                </mat-progress-bar>
                <fa-icon icon="plus" class="mr-05"></fa-icon>{{ 'ADD' | translate }}
            </button>
            <button mat-raised-button type="button" title="Cancel" (click)="CancelUserstoryInput();(false)"
                [disabled]="(anyOperationInProgress$ |async)">
                <fa-icon icon="times" class="mr-05"></fa-icon> {{ 'CANCEL' | translate }}
            </button>
        </div>
    </form>
</div>