<mat-progress-bar color="primary" mode="indeterminate" *ngIf="(anyOperationInProgress$ | async) || !loadScenarios">
</mat-progress-bar>
<mat-card *ngIf="!showScenarios" class="p-0 test-display" fxFlex="100" fxFlex.gt-sm="100">
    <div fxLayout="row" fxFlex="100" class="p-05">
        <fa-icon icon="info-circle"></fa-icon>
        <p class="ml-1">{{'TESTMANAGEMENT.THREEARENOSCENARIOSAVILABLEINUSERSTORY' | translate | softLabelsPipe : softLabels}}</p>
    </div>
</mat-card>
<div *ngIf="(!(anyOperationInProgress$ | async) && loadScenarios) && showScenarios">
    <div class="mb-05" fxLayout="row">
        <span class="section-description word-break user-select-text"
            matTooltip="{{'TESTMANAGEMENT.SECTIONNAME' | translate}}">{{userStoryData.testSuiteSectionName}}
        </span>
        <span matTooltip="{{'TESTMANAGEMENT.CASESCOUNT' | translate}}"
            class="ml-05 badge-item test-case-count-number">{{casesCount}}
        </span>
    </div>
    <mat-card-content class="p-0">
        <mat-list class="compact-list ml-02 mb-1">
            <mat-list-item class="userstory-case-scenario" *ngFor="let case of (testCases$ | async)">
                <userstory-test-case-scenario class="full-width" (click)="handleClick(case)"
                    [userStoryData]="userStoryData" [caseSelected]="case.testCaseId === selectedCaseId"
                    [caseDetails]="case" [isSprintUserStories]="isSprintUserStories">
                </userstory-test-case-scenario>
            </mat-list-item>
        </mat-list>
    </mat-card-content>
    <div *ngIf="(canAccess_entityType_feature_AddOrUpdateTestcases)">
        <div fxLayout="row" *ngIf="!isAddTestCaseOpened">
            <div fxFlex="100" class="mb-1">
                <a class="ml-1 mt-1 new-testcase" matTooltip="{{'TESTMANAGEMENT.ADDTESTCASE' | translate}}"
                    *ngIf="!isAddTestCaseOpened" (click)="openAddTestCase()">
                    <fa-icon icon="plus" class="mr-05 add-icon"></fa-icon>
                    <b>{{'TESTMANAGEMENT.ADDCASE' | translate}}</b>
                </a>
            </div>
        </div>
    </div>
    <div *ngIf="isAddTestCaseOpened">
        <div class="full-width  p-05">
            <textarea rows="3" class="full-width testcase-custom-input" placeholder="{{'TESTMANAGEMENT.ADDNEWTESTCASE' | translate}}"
                [(ngModel)]="testCaseName">
        </textarea>
        </div>
        <div class="p-05 text-center">
            <button mat-raised-button color="primary" class="mr-05" type="button"
                matTooltip="{{'TESTMANAGEMENT.ADD' | translate}}"
                [disabled]="testCaseName.trim().length == 0 || disableAddCase" (click)="addTestCase()">
                <fa-icon icon="plus" class="mr-05"></fa-icon> {{'TESTMANAGEMENT.ADD' | translate}}
            </button>
            <button mat-raised-button type="button" matTooltip="{{'TESTMANAGEMENT.CANCEL' | translate}}"
                (click)="openAddTestCase()">
                <fa-icon icon="times" class="mr-05"></fa-icon> {{'TESTMANAGEMENT.CANCEL' | translate}}
            </button>
        </div>
    </div>
</div>