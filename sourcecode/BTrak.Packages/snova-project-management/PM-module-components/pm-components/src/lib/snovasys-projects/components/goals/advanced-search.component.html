<div class="filter-section allgoals-filter">
    <div *ngIf="!uniquegoalpage" fxLayout="column" class="goals-filter-height filter-height-large" id="style-1">
        <h6 class="mt-1">
            {{ 'ADVANCEDSEARCH.WORKITEMFILTERS' | translate | softLabelsPipe : softLabels}}
        </h6>
        <div class="masonry-with-columns" fxLayoutAlign="space-between none">
            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectOwnerId">
                    <mat-form-field class=" custom-select-matform">
                        <mat-select formControlName="ownerUserId" [compareWith]="compareSelectedOwnerUserFn" multiple
                            placeholder="{{'ADVANCEDSEARCH.SELECTOWNER' | translate | softLabelsPipe : softLabels}}"
                            (selectionChange)="selectOwner()">
                            <mat-select-trigger>
                                {{selectedOwners}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allSelected (click)="toggleAllMembersSelection()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                            </mat-option>
                            <mat-option [value]="emp.id" *ngFor="let emp of (projectResponsiblePersons$ | async)"
                                (click)="toggleOwnerSelected(allSelected.value)">
                                <app-avatar class="employee_img" *ngIf="!emp.profileImage"
                                    [name]="emp.fullName | removeSpecialCharacters" [isRound]="true" size="30">
                                </app-avatar>
                                <img class="employee_img" *ngIf="emp.profileImage"
                                    [src]="emp.profileImage | fetchSizedAndCachedImage: '40':''">{{ emp.fullName }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>
            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectStatusId">
                    <mat-form-field class=" custom-select-matform">
                        <mat-select formControlName="userStoryStatusId" [compareWith]="compareSelectedUserStoryStatusFn"
                            placeholder="{{'ADVANCEDSEARCH.SELECTUSERSTORYSTATUS' | translate | softLabelsPipe : softLabels}}"
                            multiple (selectionChange)="selectUserStoryStatus()">
                            <mat-select-trigger>
                                {{selectedUserStoryStatus}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allUserStoryStatusSelected
                                (click)="toggleAllUserStoryStatusSelection()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                            </mat-option>
                            <mat-option [value]="userStoryStatus.userStoryStatusId"
                                (click)="toggleUserStoryStatusSelected(allUserStoryStatusSelected.value)"
                                *ngFor="let userStoryStatus of (userStoryStatus$ | async | workItemStatusOrder)">
                                {{ userStoryStatus.userStoryStatusName }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectDependencyUserId">
                    <mat-form-field class=" custom-select-matform">
                        <mat-select formControlName="dependencyUserId" [compareWith]="compareSelectedDependencyUserFn"
                            multiple
                            placeholder="{{'ADVANCEDSEARCH.SELECTDEPENDENCUUSER' | translate | softLabelsPipe : softLabels}}"
                            (selectionChange)="selectDependencyUser()">
                            <mat-select-trigger>
                                {{selectedDependencyUsers}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allDependencySelected
                                (click)="toggleAllDependencyMembersSelection()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                            </mat-option>
                            <mat-option [value]="emp.id" *ngFor="let emp of (projectResponsiblePersons$ | async)"
                                (click)="toggleDependencySelected(allDependencySelected.value)">
                                <app-avatar class="employee_img" *ngIf="!emp.profileImage"
                                    [name]="emp.fullName | removeSpecialCharacters" [isRound]="true" size="30">
                                </app-avatar>
                                <img class="employee_img" *ngIf="emp.profileImage"
                                    [src]="emp.profileImage | fetchSizedAndCachedImage: '40':''">{{ emp.fullName }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectBugCausedUserId">
                    <mat-form-field class=" custom-select-matform">
                        <mat-select formControlName="bugCausedUserId" [compareWith]="compareSelectedBugCausedUserFn"
                            multiple
                            placeholder="{{'ADVANCEDSEARCH.SELECTBUGCAUSEDUSER' | translate | softLabelsPipe : softLabels}}"
                            (selectionChange)="selectBugCausedUser()">
                            <mat-select-trigger>
                                {{selectedBugCausedUsers}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allBugCausedSelected
                                (click)="toggleAllBugCausedMembersSelection()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                            </mat-option>
                            <mat-option [value]="emp.id" *ngFor="let emp of (projectResponsiblePersons$ | async)"
                                (click)="toggleBugCausedSelected(allBugCausedSelected.value)">
                                <app-avatar class="employee_img" *ngIf="!emp.profileImage"
                                    [name]="emp.fullName | removeSpecialCharacters" [isRound]="true" size="30">
                                </app-avatar>
                                <img class="employee_img" *ngIf="emp.profileImage"
                                    [src]="emp.profileImage | fetchSizedAndCachedImage: '40':''">{{ emp.fullName }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectUserStoryTypeForm">
                    <mat-form-field class="custom-select-matform">
                        <mat-select
                            placeholder="{{ 'USERDETAIL.USERSTORYTYPE'|translate | softLabelsPipe : softLabels}}"
                            formControlName="userStoryTypeId" (selectionChange)="selectWorkItemTypes()" multiple
                            [compareWith]="compareSelectedUserStoryTypesFn">
                            <mat-select-trigger>
                                {{selectedUserStoryTypes}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allUserStoryTypesSelected
                                (click)="toggleAllUserStoryTypesSelection()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}</mat-option>
                            <mat-option [value]="userStoryType.userStoryTypeId"
                                (click)="toggleUserStorySelected(allUserStoryTypesSelected.value)"
                                *ngFor="let userStoryType of (userStoryTypes$ | async)">
                                {{ userStoryType.userStoryTypeName | softLabelsPipe : softLabels}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectBugPriority">
                    <mat-form-field class="custom-select-matform">
                        <mat-select
                            placeholder="{{'ADVANCEDSEARCH.PRIORITY' | translate | softLabelsPipe : softLabels}}"
                            formControlName="bugPriorityId" (selectionChange)="selectBugPriorities()" multiple
                            [compareWith]="compareSelectedBugPriorotiesFn">
                            <mat-select-trigger>
                                {{selectedBugPriorities}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allBugPrioritySelected (click)="toggleAllBugPrioritySelection()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}</mat-option>
                            <mat-option [value]="bug.bugPriorityId"
                                (click)="toggleBugPrioritySelected(allBugPrioritySelected.value)"
                                *ngFor="let bug of (bugPriorities$ | async)">
                                <fa-icon icon="{{bug.icon}}" [ngStyle]="
                                    setColorForBugPriorityTypes(bug.color)
                                  "></fa-icon> {{ bug.priorityName }}&nbsp;-&nbsp;{{ bug.description }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectComponent" class="mt-02">
                    <mat-form-field class="custom-select-matform">
                        <mat-select placeholder="{{ 'USERSTORY.SELECTCOMPONENT' | translate }}"
                            formControlName="projectFeatureId" (selectionChange)="selectProjectFeatures()" multiple
                            [compareWith]="compareProjectFeaturesFn">
                            <mat-select-trigger>
                                {{selectedComponents}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allProjectFeaturesSelectedOption
                                (click)="toggleAllProjectFeatureSelection()">{{'ADVANCEDSEARCH.SELECTALL' | translate}}
                            </mat-option>
                            <mat-option [value]="component.projectFeatureId"
                                (click)="toggleProjectFeatureSelected(allProjectFeaturesSelectedOption.value)"
                                *ngFor="let component of (projectFeature$ | async)">
                                {{ component.projectFeatureName }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <mat-form-field class="custom-select-matform">
                    <mat-select [(value)]="selectedOrderValue" (selectionChange)="changeOrderValue($event.value)"
                        placeholder="{{'ADVANCEDSEARCH.ORDERBY' | translate}}">
                        <mat-option value="createdDateTime">
                            {{'ADVANCEDSEARCH.CREATEDDATE' | translate | softLabelsPipe : softLabels}}</mat-option>
                        <mat-option value="updatedDateTime">
                            {{'ADVANCEDSEARCH.UPDATEDDATE' | translate | softLabelsPipe : softLabels}}</mat-option>
                        <mat-option value="estimatedTime">
                            {{'ADVANCEDSEARCH.ESTIMATETIME' | translate | softLabelsPipe : softLabels}}</mat-option>
                        <mat-option value="deadlineDate">
                            {{'ADVANCEDSEARCH.DEADLINEDATE' | translate | softLabelsPipe : softLabels}}</mat-option>
                        <mat-option value="ownerName">
                            {{'ADVANCEDSEARCH.OWNERNAME' | translate | softLabelsPipe : softLabels}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <mat-form-field class="custom-searchbar">
                    <div class="m-0 p-0" fxLayout="row">
                        <div fxFlex class="m-0 p-0">
                            <input matInput [(ngModel)]="workItemTags" trim
                                placeholder="{{'GOALS.SEARCHWORKITEMTAGS' | translate | softLabelsPipe : softLabels}} "
                                (input)="searchWorkItemTags()" />
                            <span class="filters-close mr-05 work-item-tags mt-02">
                                <mat-icon *ngIf="workItemTags" class="icon-button" aria-hidden="false"
                                    (click)="closeSearchWorkItemTags()" style="cursor:pointer">close</mat-icon>
                            </span>
                            <mat-hint>{{ 'ADVANCEDSEARCH.PLEASEADDCOMMATOSEARCHMORETHANONETAG' | translate }}</mat-hint>
                        </div>
                    </div>
                </mat-form-field>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <mat-form-field class="custom-searchbar">
                    <div class="m-0 p-0" fxLayout="row">
                        <div fxFlex class="m-0 p-0">
                            <input matInput [(ngModel)]="versionName"
                                placeholder="{{ 'ADVANCEDSEARCH.SEARCHVERSIONNAME' | translate | softLabelsPipe : softLabels}}"
                                (input)="searchVersionName()" />
                            <span class="filters-close version-search mr-05 mt-02">
                                <mat-icon *ngIf="versionName" class="icon-button" aria-hidden="false"
                                    (click)="clearVersionName()" style="cursor:pointer">close</mat-icon>
                            </span>
                        </div>
                    </div>
                </mat-form-field>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <mat-form-field class="custom-searchbar">
                    <div class="m-0 p-0" fxLayout="row">
                        <div fxFlex class="m-0 p-0">
                            <input matInput [(ngModel)]="userStoryName"
                                placeholder="{{ 'ADVANCEDSEARCH.SEARCHUSERSTORYNAME' | translate | softLabelsPipe : softLabels}}"
                                (input)="searchUserStoryName()" />

                            <span class="filters-close user-story-search mt-02">
                                <mat-icon *ngIf="userStoryName" class="icon-button" aria-hidden="false"
                                    (click)="clearUserStoryName()" style="cursor:pointer">close</mat-icon>
                            </span>
                        </div>
                    </div>
                </mat-form-field>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">

            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <div fxLayout="row" class="deadline-border mt-1">
                    <div [ngClass]="(dateFrom || dateTo) ? 'form-close-width' : 'form-width'">
                        <mat-form-field class="mr-1 deadline-width">
                            <input [(ngModel)]="dateFrom" matInput [matDatepicker]="picker" (click)="picker.open()"
                                placeholder="{{ 'ADVANCEDSEARCH.DEADLINEDATEFROMDATE' | translate | softLabelsPipe : softLabels}}"
                                (dateChange)="getDateFrom($event.value)" />
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                        </mat-form-field>
                        <mat-form-field class="mr-4 mt-03 deadline-width">
                            <input [(ngModel)]="dateTo" matInput [matDatepicker]="deadlineDatePicker"
                                autocomplete="false"
                                placeholder="{{ 'ADVANCEDSEARCH.DEADLINEDATETODATE' | translate | softLabelsPipe : softLabels}}"
                                [min]="minDate" (dateChange)="getDateTo($event.value)"
                                (click)="deadlineDatePicker.open()" />
                            <mat-datepicker-toggle matSuffix [for]="deadlineDatePicker"></mat-datepicker-toggle>
                            <mat-datepicker #deadlineDatePicker></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div fxFlex="35px" *ngIf="dateFrom || dateTo" fxLayoutAlign="center center">
                        <span class="filters-close cursor-pointer">
                            <mat-icon class="icon-button" aria-hidden="false" (click)="closeSearchDate()">close
                            </mat-icon>
                        </span>
                    </div>
                </div>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <div fxLayout="row" class="deadline-border mt-1">
                    <div [ngClass]="(createFrom || createTo) ? 'form-close-width' : 'form-width'">
                        <mat-form-field class="mr-1 deadline-width">
                            <input [(ngModel)]="createFrom" matInput [matDatepicker]="picker1" (click)="picker1.open()"
                                placeholder="{{ 'ADVANCEDSEARCH.CREATEDDATEFROM' | translate | softLabelsPipe : softLabels}}"
                                (dateChange)="getCreateFrom($event.value)" />
                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                        </mat-form-field>
                        <mat-form-field class="mr-4 mt-03 deadline-width">
                            <input [(ngModel)]="createTo" matInput [matDatepicker]="deadlineDatePicker1"
                                autocomplete="false"
                                placeholder="{{ 'ADVANCEDSEARCH.CREATEDDATETO' | translate | softLabelsPipe : softLabels}}"
                                [min]="createMinDate" (dateChange)="getCreateTo($event.value)"
                                (click)="deadlineDatePicker1.open()" />
                            <mat-datepicker-toggle matSuffix [for]="deadlineDatePicker1"></mat-datepicker-toggle>
                            <mat-datepicker #deadlineDatePicker1></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div fxFlex="35px" *ngIf="createFrom || createTo" fxLayoutAlign="center center">
                        <span class="filters-close cursor-pointer">
                            <mat-icon *ngIf="createFrom || createTo" class="icon-button" aria-hidden="false"
                                (click)="closeCreateDate()">close</mat-icon>
                        </span>
                    </div>
                </div>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <div fxLayout="row" class="deadline-border mt-1">
                    <div [ngClass]="(updateFrom || updateTo) ? 'form-close-width' : 'form-width'">
                        <mat-form-field class="mr-1 deadline-width">
                            <input [(ngModel)]="updateFrom" matInput [matDatepicker]="picker2" (click)="picker2.open()"
                                placeholder="{{ 'ADVANCEDSEARCH.UPDATEDDATEFROM' | translate | softLabelsPipe : softLabels}}"
                                (dateChange)="getUpdatedFrom($event.value)" />
                            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                            <mat-datepicker #picker2></mat-datepicker>
                        </mat-form-field>
                        <mat-form-field class="mr-4 mt-03 deadline-width">
                            <input [(ngModel)]="updateTo" matInput [matDatepicker]="deadlineDatePicker2"
                                autocomplete="false"
                                placeholder="{{ 'ADVANCEDSEARCH.UPDATEDDATETO' | translate | softLabelsPipe : softLabels}}"
                                [min]="updateMinDate" (dateChange)="getUpdatedTo($event.value)"
                                (click)="deadlineDatePicker2.open()" />
                            <mat-datepicker-toggle matSuffix [for]="deadlineDatePicker2"></mat-datepicker-toggle>
                            <mat-datepicker #deadlineDatePicker2></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div fxFlex="35px" *ngIf="updateFrom || updateTo" fxLayoutAlign="center center">
                        <span class="filters-close cursor-pointer">
                            <mat-icon class="icon-button" aria-hidden="false" (click)="closeUpdateDate()">close
                            </mat-icon>
                        </span>
                    </div>
                </div>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <div class="mt-1">
                    <mat-checkbox [(ngModel)]="includeArchive" [checked]="includeArchive"
                        class="checkbox-text full-width pull-left" (change)="getIncludedArchivedGoals()">
                        {{'ADVANCEDSEARCH.INCLUDEARCHIVE' | translate | softLabelsPipe : softLabels}}
                    </mat-checkbox>
                    <mat-checkbox [(ngModel)]="includePark" [checked]="includePark"
                        class="checkbox-text full-width pull-left" (change)="getIncludedParkedGoals()">
                        {{'ADVANCEDSEARCH.INCLUDEPARK' | translate | softLabelsPipe : softLabels}}
                    </mat-checkbox>
                    <mat-checkbox [(ngModel)]="isOnTrack" [checked]="isOnTrack"
                        class="checkbox-text full-width pull-left" (change)="getOnTrackUserStories()">
                        {{'ADVANCEDSEARCH.WORKITEMSONTRACK' | translate | softLabelsPipe : softLabels}}
                    </mat-checkbox>
                    <mat-checkbox [(ngModel)]="isNotOnTrack" [checked]="isNotOnTrack"
                        class="checkbox-text full-width pull-left" (change)="getNotOnTrackUserStories()">
                        {{'ADVANCEDSEARCH.WORKITEMSNOTONTRACK' | translate | softLabelsPipe : softLabels}}
                    </mat-checkbox>
                </div>
            </div>
        </div>
        <h6 class="mt-1">
            {{ 'ADVANCEDSEARCH.GOALFILTERS' | translate | softLabelsPipe : softLabels}}
        </h6>
        <div class="masonry-with-columns" fxLayoutAlign="space-between none">
            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectGoalResponsibleId">
                    <mat-form-field class=" custom-select-matform">
                        <mat-select formControlName="goalResponsibleUserId"
                            [compareWith]="compareSelectedResponsibleMembersFn" multiple
                            placeholder="{{'ADVANCEDSEARCH.SELECTGOALRESPONSIBLEPERSON' | translate | softLabelsPipe : softLabels}}"
                            (selectionChange)="selectGoalResponsiblePerson()">
                            <mat-select-trigger>
                                {{selectedUsers}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allMembersSelected
                                (click)="toggleAllResponsiblePersonsSelection()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                            </mat-option>
                            <mat-option [value]="grp.id"
                                (click)="toggleResponsiblePersonSelected(allMembersSelected.value)"
                                *ngFor="let grp of (projectResponsiblePersons$ | async)">
                                <app-avatar class="employee_img" *ngIf="!grp.profileImage"
                                    [name]="grp.fullName | removeSpecialCharacters" [isRound]="true" size="30">
                                </app-avatar>
                                <img class="employee_img" *ngIf="grp.profileImage"
                                    [src]="grp.profileImage | fetchSizedAndCachedImage: '40':''">{{ grp.fullName }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectGoalStatusId">
                    <mat-form-field class=" custom-select-matform">
                        <mat-select formControlName="goalStatusId" multiple [compareWith]="compareSelectedGoalStatusFn"
                            placeholder="{{'ADVANCEDSEARCH.SELECTGOALSTATUS' | translate | softLabelsPipe : softLabels}}"
                            (selectionChange)="selectGoalStatus()">
                            <mat-select-trigger>
                                {{selectedGoalStatus}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allGoalStatusSelected (click)="toggleAllGoalStatusSelection()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                            </mat-option>
                            <mat-option [value]="goalstatus.goalStatusId"
                                (click)="toggleGoalStatusSelected(allGoalStatusSelected.value)"
                                *ngFor="let goalstatus of (goalStatus$ | async)">
                                {{ goalstatus.goalStatusName }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <mat-form-field class="custom-searchbar">
                    <div class="m-0 p-0" fxLayout="row">
                        <div fxFlex class="m-0 p-0">
                            <input matInput [(ngModel)]="goalShortName" trim
                                placeholder="{{'ADVANCEDSEARCH.SEARCHGOAL' | translate | softLabelsPipe : softLabels}} "
                                (input)="searchGoalName()" />
                            <span class="goal-name-search filters-close mr-05 mt-02">
                                <mat-icon *ngIf="goalShortName" class="icon-button" aria-hidden="false"
                                    (click)="closeSearchGoal()" style="cursor:pointer">close</mat-icon>
                            </span>
                        </div>
                    </div>
                </mat-form-field>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <mat-form-field class="custom-searchbar">
                    <div class="m-0 p-0" fxLayout="row">
                        <div fxFlex class="m-0 p-0">
                            <input matInput [(ngModel)]="goalTags"
                                placeholder="{{'GOALS.SEARCHGOALTAGS' | translate | softLabelsPipe : softLabels}} "
                                (input)="searchGoalTags()" />
                            <span class="goal-tags-search filters-close mr-05 mt-02">
                                <mat-icon *ngIf="goalTags" class="icon-button" aria-hidden="false"
                                    (click)="closeSearchGoalTags()" style="cursor:pointer">close</mat-icon>
                            </span>
                        </div>
                    </div>
                </mat-form-field>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <mat-checkbox [(ngModel)]="toBeTracked" [checked]="toBeTracked"
                    class="checkbox-text full-width pull-left" (change)="getTrackedGoals()">
                    {{'ADVANCEDSEARCH.TRACKED' | translate | softLabelsPipe : softLabels}}
                </mat-checkbox>

                <mat-checkbox [(ngModel)]="isProductiveBoard" [checked]="isProductiveBoard"
                    class="checkbox-text full-width pull-left" (change)="getProductiveGoals()">
                    {{'ADVANCEDSEARCH.PRODUCTIVE' | translate | softLabelsPipe : softLabels}}
                </mat-checkbox>
            </div>
            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">

            </div>
        </div>
       <h6 class="mt-1" *ngIf="isSprintsEnable">
            {{ 'ADVANCEDSEARCH.SPRINTFILTERS' | translate | softLabelsPipe : softLabels}}
        </h6>
        <div class="masonry-with-columns" fxLayoutAlign="space-between none" *ngIf="isSprintsEnable">
            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectSprintResponsibleId">
                    <mat-form-field class=" custom-select-matform">
                        <mat-select formControlName="sprintResponsibleUserId"
                            [compareWith]="compareSprintSelectedResponsibleMembersFn" multiple
                            placeholder="{{'SPRINTS.RESPONSIBLEPERSON' | translate | softLabelsPipe : softLabels}}"
                            (selectionChange)="selectSprintResponsiblePerson()">
                            <mat-select-trigger>
                                {{selectedSprintUsers}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allSprintMembersSelected
                                (click)="toggleAllSprintResponsiblePersonsSelection()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                            </mat-option>
                            <mat-option [value]="grp.id"
                                (click)="toggleSprintResponsiblePersonSelected(allSprintMembersSelected.value)"
                                *ngFor="let grp of (projectResponsiblePersons$ | async)">
                                <app-avatar class="employee_img" *ngIf="!grp.profileImage"
                                    [name]="grp.fullName | removeSpecialCharacters" [isRound]="true" size="30">
                                </app-avatar>
                                <img class="employee_img" *ngIf="grp.profileImage"
                                    [src]="grp.profileImage | fetchSizedAndCachedImage: '40':''">{{ grp.fullName }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>
            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectSprintStatusId">
                    <mat-form-field class=" custom-select-matform">
                        <mat-select formControlName="sprintStatusId" multiple [compareWith]="compareSelectedSprintStatusFn"
                            placeholder="{{'ADVANCEDSEARCH.SELECTSPRINTSTATUS' | translate | softLabelsPipe : softLabels}}"
                            (selectionChange)="selectSprintStatus()">
                            <mat-select-trigger>
                                {{selectedSprintStatus}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allSprintStatusSelected (click)="toggleAllSprintStatusSelection()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                            </mat-option>
                            <mat-option [value]="sprintStatus.sprintStatusId"
                                (click)="toggleSprintStatusSelected(allSprintStatusSelected.value)"
                                *ngFor="let sprintStatus of (sprintStatusList)">
                                {{ sprintStatus.sprintStatusName }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <mat-form-field class="custom-searchbar">
                    <div class="m-0 p-0" fxLayout="row">
                        <div fxFlex class="m-0 p-0">
                            <input matInput [(ngModel)]="sprintName" trim
                                placeholder="{{'ADVANCEDSEARCH.SEARCHSPRINT' | translate | softLabelsPipe : softLabels}} "
                                (input)="searchSprintName()" />
                            <span class="goal-name-search filters-close mr-05 mt-02">
                                <mat-icon *ngIf="sprintName" class="icon-button" aria-hidden="false"
                                    (click)="closeSearchSprint()" style="cursor:pointer">close</mat-icon>
                            </span>
                        </div>
                    </div>
                </mat-form-field>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <div fxLayout="row" class="deadline-border mt-1">
                    <div [ngClass]="(sprintStartDate || sprintEndDate) ? 'form-close-width' : 'form-width'">
                        <mat-form-field class="mr-1 deadline-width">
                            <input [(ngModel)]="sprintStartDate" matInput [matDatepicker]="startPicker" (click)="startPicker.open()"
                                placeholder="{{ 'SPRINTS.SPRINTSTARTDATE' | translate | softLabelsPipe : softLabels}}"
                                (dateChange)="getSprintStartDateFrom($event.value)" />
                            <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
                            <mat-datepicker #startPicker></mat-datepicker>
                        </mat-form-field>
                        <mat-form-field class="mr-4 mt-03 deadline-width">
                            <input [(ngModel)]="sprintEndDate" matInput [matDatepicker]="endPicker"
                                autocomplete="false"
                                placeholder="{{ 'SPRINTS.SPRINTENDDATE' | translate | softLabelsPipe : softLabels}}"
                                [min]="minStartDate" (dateChange)="getSprintEndDateTo($event.value)"
                                (click)="endPicker.open()" />
                            <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
                            <mat-datepicker #endPicker></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div fxFlex="35px" *ngIf="sprintStartDate || sprintEndDate" fxLayoutAlign="center center">
                        <span class="filters-close cursor-pointer">
                            <mat-icon class="icon-button" aria-hidden="false" (click)="closeSearchSprintDate()">close
                            </mat-icon>
                        </span>
                    </div>
                </div>
            </div>

            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">

            </div>
        </div> 
        <h6 class="mt-1">
            {{ 'ADVANCEDSEARCH.PROJECTFILTERS' | translate | softLabelsPipe : softLabels}}
        </h6>

        <div class="masonry-with-columns" fxLayoutAlign="space-between none">
            <div fxFlex.lt-md="100" fxFlex.md="49" fxFlex.lg="32.6" fxFlex="24">
                <form [formGroup]="selectProjectId">
                    <mat-form-field class=" custom-select-matform">
                        <mat-select formControlName="projectId" [compareWith]="compareSelectedProjectsFn"
                            placeholder="{{'ADVANCEDSEARCH.SELECTPROJECT' | translate | softLabelsPipe : softLabels}}"
                            multiple (selectionChange)="selectProject()">
                            <mat-select-trigger>
                                {{selectedProjects}}
                            </mat-select-trigger>
                            <mat-option [value]="0" #allProjectsSelected (click)="toggleAllProjectsSelection()">
                                {{'ADVANCEDSEARCH.SELECTALL' | translate}}
                            </mat-option>
                            <mat-option [value]="proj.projectId"
                                (click)="toggleProjectsSelected(allProjectsSelected.value)"
                                *ngFor="let proj of (projectSearchResults$ | async | projectOrder)">
                                {{ proj.projectName }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </form>
            </div>
        </div>
    </div>
    <div class="mt-1 prl-1" fxLayoutAlign="center center" *ngIf="!uniquegoalpage">
        <button mat-button mat-raised-button color="primary" class="mr-1"
            [disabled]="(saveFiltersIsInProgress$ | async)"
            (click)="saveFiltersPopOver.toggle();clearGoalFiltersForm();onlySaveFilter()"
            [satPopoverAnchorFor]="saveFiltersPopOver">
            <mat-progress-bar color="primary" mode="indeterminate" *ngIf="loading">
            </mat-progress-bar>
            <span *ngIf="!goalFilterId">
                <fa-icon class="mr-05" icon="save"></fa-icon>{{'SAVE' | translate }}
            </span>
            <span *ngIf="goalFilterId">
                <fa-icon class="mr-05" icon="pen"></fa-icon>{{'ADVANCEDSEARCH.UPDATE' | translate}}
            </span>
        </button>

        <button mat-button mat-raised-button color="primary" class="mr-1 hide-content-overflow"
            style="max-width: 149px;" [disabled]="(saveFiltersIsInProgress$ | async)"
            [satPopoverAnchorFor]="saveFiltersPopOver" (click)="saveFiltersPopOver.toggle();clearGoalFiltersForm();">
            <mat-progress-bar color="primary" mode="indeterminate" *ngIf="loading">
            </mat-progress-bar>
            <span *ngIf="!goalFilterId">
                <fa-icon class="mr-05" icon="save"></fa-icon>{{'ADVANCEDSEARCH.SAVEANDAPPLY' | translate}}
            </span>
            <span *ngIf="goalFilterId">
                <fa-icon class="mr-05" icon="pen"></fa-icon>{{'ADVANCEDSEARCH.UPDATEANDAPPLY' | translate}}
            </span>
        </button>

        <button mat-button mat-raised-button color="primary" class="mr-1" [disabled]="loading" (click)="applyFilters()">
            <mat-progress-bar color="primary" mode="indeterminate" *ngIf="loading">
            </mat-progress-bar>
            <span>
                <fa-icon class="mr-05" icon="arrow-right"></fa-icon> {{'ADVANCEDSEARCH.APPLY' | translate}}
            </span>
        </button>
    </div>
</div>

<sat-popover #saveFiltersPopOver verticalAlign="below" hasBackdrop horizontalAlign="start" [interactiveClose]="false">
    <mat-card class="filter-data p-0">
        <mat-card-title class="text-center">
            <div class="card-title-text p-1 mat-bg-primary">
                {{'ADVANCEDSEARCH.SAVEFILTERS' | translate}}
            </div>
        </mat-card-title>
        <form [formGroup]="advancedSearchFiltersForm" #formDirective="ngForm" novalidate
            (submit)="advancedSearchFiltersForm.valid && saveAdvancedGoalFilters()">
            <div class="card-content p-05">
                <mat-form-field class="full-width">
                    <input matInput formControlName="goalFilterName" trim
                        placeholder="{{'ADVANCEDSEARCH.GOALFILTERNAME' | translate | softLabelsPipe : softLabels}}" />
                    <mat-error>
                        <span
                            *ngIf=" advancedSearchFiltersForm.get('goalFilterName').hasError('required') && advancedSearchFiltersForm.get('goalFilterName').touched">{{ 'ADVANCEDSEARCH.PLEASEENTERFILTERNAME' | translate }}</span>
                        <span *ngIf="advancedSearchFiltersForm.get('goalFilterName').hasError('maxlength')">
                            {{ 'ADVANCEDSEARCH.FILTERNAMECANNOTEXCEED50CHARACTERS' | translate | softLabelsPipe : softLabels }}
                        </span>
                    </mat-error>
                </mat-form-field>
                <mat-checkbox class=" mb-1 checkbox-text checkbox_allgoals full-width" formControlName="isPublic">
                    {{'ADVANCEDSEARCH.ISPUBLIC' | translate}}
                </mat-checkbox>
                <div class="text-center">
                    <button mat-raised-button color="primary" class="mr-1"
                        [disabled]="!advancedSearchFiltersForm.valid ||(saveFiltersIsInProgress$ | async)">
                        <mat-progress-bar color="primary" mode="indeterminate"
                            *ngIf="(saveFiltersIsInProgress$ | async)">
                        </mat-progress-bar>
                        <fa-icon icon="save" class="mr-05 mb-05"></fa-icon>
                        {{ 'SAVE' | translate }}
                    </button>
                    <button mat-raised-button (click)="closeFilterDialog(); (false)"
                        [disabled]="(saveFiltersIsInProgress$ | async)">
                        <fa-icon icon="times" class="mr-05"></fa-icon>{{'CANCEL' | translate}}
                    </button>
                </div>
            </div>
        </form>
    </mat-card>
</sat-popover>

<ul *ngIf="uniquegoalpage">
    <li class="advancedSearch-btns">
        <button mat-icon-button class="advanced-search-icon" (click)="resetSearch()"
            matTooltip="{{'ADVANCEDSEARCH.RESET' | translate}}">
            <fa-icon class="filter mat-color-accent" icon="undo"></fa-icon>
        </button>
    </li>
</ul>