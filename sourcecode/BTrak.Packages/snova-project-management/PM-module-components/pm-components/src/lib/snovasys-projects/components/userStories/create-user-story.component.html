<div class="p-05" *ngIf="!isUserStoryInputVisible">
    <a (click)="showUserstoryInput();" class="new-userstory">
        <fa-icon icon="plus" class="mr-05"></fa-icon>
        <span *ngIf="!userStoryId">
            {{ 'USERSTORY.CREATEAUSERSTORY' | translate | softLabelsPipe : softLabels }}
        </span>
        <span *ngIf="userStoryId">
            {{ 'USERSTORY.CREATESUBTASK' | translate }}
        </span>
    </a>
</div>
<div class="mt-05 mb-05 p-05" *ngIf="isUserStoryInputVisible">
    <form [formGroup]="createUserStory" #formDirective="ngForm" novalidate
        (submit)="createUserStory.valid && saveUserStory()">
        <div fxLayout="row wrap">
            <div fxFlex fxLayout="column wrap" class="full-width mr-05">
                <mat-form-field class="full-width">
                    <textarea formControlName="userStoryName" matInput rows="3" matInputAutofocus
                        placeholder="{{ 'USERSTORY.USERSTORY' | translate | softLabelsPipe : softLabels}}" trim
                        required></textarea>
                    <mat-hint>{{ 'USERSTORY.WORKITEMHINT' | translate | softLabelsPipe : softLabels}}</mat-hint>
                    <mat-error>
                        <span
                            *ngIf="createUserStory.get('userStoryName').hasError('required') && createUserStory.get('userStoryName').touched">
                            {{ 'USERSTORY.PLEASEENTERUSERSTORYNAME' | translate | softLabelsPipe : softLabels}}
                        </span>
                    </mat-error>
                </mat-form-field>
            </div>
        </div>

        <div class="text-center p-05">
            <button mat-raised-button color="primary"
                [disabled]="!createUserStory.valid || (addOperationInProgress$ |async) || (anyOperationInProgress$|async)"
                class="mr-05" type="submit" title="{{ 'ADD' | translate }}" (click)="saveUserStory()">
                <mat-progress-bar color="primary" mode="indeterminate"
                    *ngIf="(addOperationInProgress$ |async) || (anyOperationInProgress$|async)">
                </mat-progress-bar>
                <fa-icon icon="plus" class="mr-05"></fa-icon>{{ 'ADD' | translate }}
            </button>
            <button mat-raised-button type="button" title="Cancel" (click)="CancelUserstoryInput();(false)"
                [disabled]="(addOperationInProgress$ |async) || (anyOperationInProgress$|async)">
                <fa-icon icon="times" class="mr-05"></fa-icon> {{ 'CANCEL' | translate }}
            </button>
        </div>
    </form>
</div>