<mat-card *ngIf="userStoryData" class="details_userstory template_userstory" id="style-1">
  <mat-progress-bar color="primary" mode="indeterminate" *ngIf="userStoryIsInProgress$|async">
  </mat-progress-bar>

  <mat-card-header>
    <mat-card-title>
      <b class="userstory-detail-header"><span *ngIf="isEditUserStory" (dblclick)="showMatFormField()">
          {{ userStoryName}} &nbsp;
        </span></b>
      <mat-form-field class="full-width search_goalinput" *ngIf="!isEditUserStory">
        <input matInput placeholder="{{'USERDETAIL.USERSTORY'|translate | softLabelsPipe : softLabels}}"
          [(ngModel)]="userStoryName" (blur)="updateUserStoryName()" />
      </mat-form-field>
    </mat-card-title>
    <a class="detail_close mt-05" color="warn" (click)="closeUserStoryDetailWindow()">
      <fa-icon icon="times"></fa-icon>
    </a>
  </mat-card-header>
  <!-- <kendo-tabstrip [tabPosition]="position" (tabSelect)="onTabSelect($event)" id="tab" #tabstrip>
    <kendo-tabstrip-tab title="{{'USERDETAIL.GENERAL'|translate}}" [selected]="true">
      <ng-template kendoTabContent> -->
  <mat-card-content class="p-0 ml-08 mt-08">
    <div class="example-container" fxLayout='column'>
      <app-common-estimatedTime [estimatedTime]="estimatedTime" [isDetailsPage]=true [isDisabled]="false"
        (totalEstimatedTimeInHours)="changeEstimatedTime($event)"></app-common-estimatedTime>

      <div fxFlex class="p-05" fxLayout='column'>
        <h5 class="unique-details-text">{{'USERSTORYUNIQUE.DESCRIPTION' | translate}}</h5>
        <div fxLayout="row wrap" fxFlex="100" class="word-break">
          <span *ngIf="descriptionSlug && !isEditorVisible" (click)="enableEditor()" style="cursor: pointer;"
            [innerHTML]=descriptionSlug>
          </span>
          <span *ngIf="!descriptionSlug  && !isEditorVisible" (click)="enableEditor()" style="cursor: pointer;">
            <b>{{'USERSTORYUNIQUE.THEREISNODESCRIPTIONCLICKHERETOADDDESCRIPTION' | translate}}</b>
          </span>
        </div>
        <div *ngIf="isEditorVisible">
          <div class="full-width custom-input">
            <editor class="dfree-header custom-logtime-comment"
              apiKey="ewi2adl9u4cmc1lic9wcz3zq03696a3ihlodo4n1oaveo3kk" [init]="initSettings1" menubar="false"
              background="white" height="120" [(ngModel)]="descriptionSlug">
            </editor>
          </div>
          <div class="mt-05">
            <button mat-raised-button color="primary" class="mr-05" type="button"
              (click)="handleDescriptionEvent($event)" [disabled]="(descriptionLoading$ | async)">
              <fa-icon icon="check" class="mr-05"></fa-icon> {{ 'SAVE' | translate }}
            </button>
            <button mat-raised-button (click)="cancelDescription()" class="mr-05"
              [disabled]="(descriptionLoading$ | async)">
              <fa-icon icon="times" class="mr-05"></fa-icon> {{ 'CANCEL' | translate }}
            </button>
            <button mat-raised-button color="primary" (click)="descriptionReset()"
              [disabled]="(descriptionLoading$ | async)">
              <fa-icon icon="undo" class="mr-05"></fa-icon> {{ 'ADVANCEDSEARCH.RESET' | translate }}
            </button>
          </div>
        </div>
      </div>

      <!-- <app-custom-field-component [moduleTypeId]="moduleTypeId" [referenceTypeId]="formReferenceTypeId"
        [referenceId]="userStoryId"
        [isEditFieldPermission]="canAccess_feature_CanSubmitCustomFieldsForProjectManagement">
      </app-custom-field-component> -->
      <div *ngIf="customFieldModuleLoaded">
        <ndc-dynamic
          [ndcDynamicFactory]="customFieldComponent.component" 
          [ndcDynamicComponent]="customFieldComponent.component"
          [ndcDynamicInjector]="injector" [ndcDynamicInputs]="customFieldComponent.inputs"
          [ndcDynamicOutputs]="customFieldComponent.outputs">
        </ndc-dynamic>
      </div>
    </div>
  </mat-card-content>
  <!-- </ng-template>
    </kendo-tabstrip-tab>
    <kendo-tabstrip-tab title="{{'USERSTORY.CUSTOMFIELDSHISTORY'|translate}}">
      <ng-template kendoTabContent>
        <app-custom-field-history [referenceId]="userStoryId">
        </app-custom-field-history>
      </ng-template>
    </kendo-tabstrip-tab>
  </kendo-tabstrip> -->

</mat-card>