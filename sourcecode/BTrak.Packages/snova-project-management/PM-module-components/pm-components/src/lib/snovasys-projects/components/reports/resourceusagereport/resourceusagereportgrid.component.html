<div class="custom-dialog">
    <div class="custom-close" mat-dialog-close (click)="onNoClick()">
        <fa-icon icon="times" class="project-dialog"></fa-icon>
    </div>
</div>
<mat-card-title class="full-width data-table-header">
    <div class="p-05">
        {{userName}}'s {{ 'PROJECTUSAGEREPORT.DETAILS' | translate }}
    </div>
</mat-card-title>
<kendo-grid [kendoGridBinding]="this.data.gridData" [pageSize]="state.take" [skip]="state.skip" [sort]="state.sort"
    [group]="state.group" [sortable]="true" [pageable]="true" [groupable]="{ showFooter: true, enabled: false  }"
    style="max-height: 600px;" (dataStateChange)="dataStateChange($event)" [filterable]="true">
    <kendo-grid-column field="userStoryName" title="{{ 'RESOURCEUSAGEREPORT.TASKNAME' | translate }}" width="150">
        <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
            <kendo-grid-string-filter-cell [showOperators]="true" [column]="column" [filter]="filter">
            </kendo-grid-string-filter-cell>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="userStoryAllocatedHours" title="{{ 'RESOURCEUSAGEREPORT.ALLOCATEDHOURS' | translate }}"
        width="200">
        <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
            <kendo-grid-string-filter-cell [showOperators]="true" [column]="column" [filter]="filter">
            </kendo-grid-string-filter-cell>
        </ng-template>
        <ng-template kendoGridGroupHeaderColumnTemplate let-group="group" let-aggregates="aggregates"
            let-dataItem="dataItem">
            <span>
                {{ aggregates.userStoryAllocatedHours.sum | number: '1.2-2' }}
            </span>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="userStoryUsedHours" title="{{ 'RESOURCEUSAGEREPORT.USEDHOURS' | translate }}" width="150">
        <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
            <kendo-grid-string-filter-cell [showOperators]="true" [column]="column" [filter]="filter">
            </kendo-grid-string-filter-cell>
        </ng-template>
        <ng-template kendoGridGroupHeaderColumnTemplate let-group="group" let-aggregates="aggregates"
            let-dataItem="dataItem">
            <span>
                {{ aggregates.userStoryUsedHours.sum | number: '1.2-2' }}
            </span>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="userStoryBalanceHours" title="{{ 'RESOURCEUSAGEREPORT.BALANCEHOURS' | translate }}"
        width="150">
        <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
            <kendo-grid-string-filter-cell [showOperators]="true" [column]="column" [filter]="filter">
            </kendo-grid-string-filter-cell>
        </ng-template>
        <ng-template kendoGridGroupHeaderColumnTemplate let-group="group" let-aggregates="aggregates"
            let-dataItem="dataItem">
            <span>
                {{ aggregates.userStoryBalanceHours.sum | number: '1.2-2' }}
            </span>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="resourceUtilizationPercentage"
        title="{{ 'RESOURCEUSAGEREPORT.RESOURCEUTILIZATION' | translate }}%" width="150">
        <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
            <kendo-grid-string-filter-cell [showOperators]="true" [column]="column" [filter]="filter">
            </kendo-grid-string-filter-cell>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            <span>
            </span>
        </ng-template>
        <ng-template kendoGridGroupHeaderColumnTemplate let-group="group" let-aggregates="aggregates">
            <span *ngIf="group.field == 'userName'">
                {{ group.items[0].resourceUtilizationPercentage}}
            </span>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="completionPercentage" title="{{ 'RESOURCEUSAGEREPORT.COMPLETION' | translate }}%"
        width="150">
        <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
            <kendo-grid-string-filter-cell [showOperators]="true" [column]="column" [filter]="filter">
            </kendo-grid-string-filter-cell>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem="dataItem">
            <span>
            </span>
        </ng-template>
        <ng-template kendoGridGroupHeaderColumnTemplate let-group="group" let-aggregates="aggregates">
            <span *ngIf="group.field == 'userName'">
                {{ group.items[0].completionPercentage}}
            </span>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="resourceAvailable" title="{{ 'RESOURCEUSAGEREPORT.RESOURCEAVAILABLE' | translate }}"
        width="150">
        <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
            <kendo-grid-string-filter-cell [showOperators]="true" [column]="column" [filter]="filter">
            </kendo-grid-string-filter-cell>
        </ng-template>
        <ng-template kendoGridCellTemplate let-dataItem="dataItem" let-group>
            <span>
            </span>
        </ng-template>
        <ng-template kendoGridGroupHeaderColumnTemplate let-group="group" let-aggregates="aggregates"
            let-dataItem="dataItem">
            <span *ngIf="group.field == 'userName'">
                {{ (noOfHours-aggregates.userStoryUsedHours.sum) | number: '1.0-0'}}
            </span>
        </ng-template>
    </kendo-grid-column>
</kendo-grid>