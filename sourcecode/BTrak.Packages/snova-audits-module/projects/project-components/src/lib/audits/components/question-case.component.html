<div class="testrail-case-details section-cases-operations category-questions"
    [ngStyle]="{ 'background-color': questionSelected == true ? '#e0dbdb' : '' }" fxLayout="row">
    <!-- <div fxFlex="2px" class="testrail-userstory-left testsuit-left-border">
        &nbsp;
    </div> -->
    <div fxFlex="20px" class="custom-testrun-checkbox"
        *ngIf="canAccess_entityType_feature_CopyOrMoveQuestionsFromCategoryToCategory && !isAuditArchived"
        (click)="$event.stopPropagation()">
        <mat-checkbox class="mr-05" [(ngModel)]="isQuestionSelected" (change)="changeStatus($event.checked)"
            (click)="$event.stopPropagation()"></mat-checkbox>
    </div>
    <div fxFlex="5" fxFlex.lg="7" fxFlex.md="7" class="text-overflow-wrap" (click)="previewQuestion(questionDetail)">
        <a>{{questionDetail.questionIdentity}}</a>
    </div>
    <div fxFlex class="m-0 ml-05 text-overflow-wrap userStory-name" (click)="previewQuestion(questionDetail)"
        #questionTitle (mouseover)="checkTitleTooltipStatus()" style="position: relative;">
        <span class="user-select-text" [matTooltip]="showTitleTooltip ? questionDetail.questionName : ''"
            matTooltipShowDelay="300" style="position: absolute; top: -8px;">
            {{questionDetail.questionName}}
        </span>
        <div style="position: absolute; top: 11px; font-size: 11px;">
            <span *ngIf="!questionDetail.isMasterQuestionType" class="question-tag"
                matTooltip="{{'AUDIT.QUESTIONSTYPE' | translate | softLabelsPipe :softLabels}}" matTooltipShowDelay="300"
                style="background-color: #a1b466;">{{questionDetail.questionTypeName}}</span>
            <span *ngIf="questionDetail.isMasterQuestionType" class="question-tag"
                matTooltip="{{'AUDIT.MASTERQUESTIONTYPE' | translate | softLabelsPipe :softLabels}}" matTooltipShowDelay="300"
                style="background-color: #a1b466;">{{questionDetail.masterQuestionTypeName}}</span>
            <span class="question-tag"
                *ngIf="questionDetail.questionResult 
            && (questionDetail.masterQuestionTypeId == booleanQuestionTypeId || questionDetail.masterQuestionTypeId == dropdownQuestionTypeId)"
                matTooltip="{{'AUDIT.RESULT' | translate}}" matTooltipShowDelay="300"
                style="background-color: #8b99b9;">{{questionDetail.questionResult}}</span>
            <span class="question-tag" *ngIf="questionDetail.questionResultDate"
                matTooltip="{{'AUDIT.RESULT' | translate}}" matTooltipShowDelay="300"
                style="background-color: #8b99b9;">{{questionDetail.questionResultDate | utcToLocalTime | date: "dd-MMM-yyyy"}}</span>
            <span class="question-tag" *ngIf="questionDetail.questionResultNumeric"
                matTooltip="{{'AUDIT.RESULT' | translate}}" matTooltipShowDelay="300"
                style="background-color: #8b99b9;">{{questionDetail.questionResultNumeric}}</span>
            <span class="question-tag" *ngIf="questionDetail.questionResultText"
                matTooltip="{{'AUDIT.RESULT' | translate}}" matTooltipShowDelay="300"
                style="background-color: #8b99b9;">{{questionDetail.questionResultText}}</span>
            <span class="question-tag" *ngIf="questionDetail.questionResultTime"
                matTooltip="{{'AUDIT.RESULT' | translate}}" matTooltipShowDelay="300"
                style="background-color: #8b99b9;">{{questionDetail.questionResultTime}}</span>
            <!-- <span class="question-tag"
                *ngIf="questionDetail.masterQuestionTypeId == booleanQuestionTypeId && questionDetail.questionResultBoolean == true"
                matTooltip="{{'AUDIT.RESULT' | translate}}" matTooltipShowDelay="300"
                style="background-color: #8b99b9;">Yes</span>
            <span class="question-tag"
                *ngIf="questionDetail.masterQuestionTypeId == booleanQuestionTypeId && questionDetail.questionResultBoolean == false"
                matTooltip="{{'AUDIT.RESULT' | translate}}" matTooltipShowDelay="300"
                style="background-color: #8b99b9;">No</span> -->
            <span class="question-tag" matTooltip="{{'AUDIT.SCORE' | translate}}" matTooltipShowDelay="300"
                style="background-color: #989090;">{{questionDetail.questionScore}}</span>
        </div>
    </div>
    <div fxFlex="{{isFromUniquePage ? '9' : '6'}}" class="mr-05 text-overflow-wrap" (click)="$event.stopPropagation()"
        ngClass.sm="mr-05" *ngIf="canAccess_entityType_feature_CanHaveQuestionResponsiblePerson"
        [ngClass]="{'mt-02': questionDetail.questionResponsiblePersonId}">
        <img class="testcase-user-img" src="../../../assets/images/faces/18.png"
            *ngIf="!questionDetail.questionResponsiblePersonName" />
        <!-- (click)="goToProfilePage(questionDetail.questionResponsiblePersonId)" -->
        <div *ngIf="questionDetail.questionResponsiblePersonName && questionDetail.questionResponsiblePersonId">
            <app-avatar matTooltip="{{questionDetail.questionResponsiblePersonName}}"
                [name]="questionDetail.questionResponsiblePersonName | removeSpecialCharacters"
                [src]="questionDetail.questionResponsiblePersonProfileImage" [isRound]="true" size="25"
                (click)="previewQuestion(questionDetail)">
            </app-avatar>
        </div>
    </div>
    <div fxFlex="45px" fxLayoutAlign="end center" class="m-0 testsuite-cases-operations" *ngIf="!isAuditArchived">
        <a matTooltip="{{'AUDIT.EDITQUESTION' | translate | softLabelsPipe :softLabels}}"
            *ngIf="canAccess_entityType_feature_AddOrUpdateAuditQuestions" (click)="editQuestion(questionDetail)">
            <fa-icon icon="edit"></fa-icon>
        </a>
        <a class="ml-1" matTooltip="{{'AUDIT.DELETEQUESTION' | translate | softLabelsPipe :softLabels}}"
            *ngIf="canAccess_entityType_feature_ArchiveOrUnarchiveAuditQuestions" [satPopoverAnchorFor]="deleteCase"
            #deleteCasePopover="satPopoverAnchor" (click)="deleteCases(questionDetail,deleteCasePopover)">
            <fa-icon icon="trash"></fa-icon>
        </a>
    </div>
</div>
<!--Delete Case dialog-->
<sat-popover #deleteCase hasBackdrop backdropClass="backdrop-color" verticalAlign="below" horizontalAlign="end">
    <mat-card class="p-0">
        <mat-card-title class="text-center mat-bg-primary">
            <div class="card-title-text p-05">{{'TESTMANAGEMENT.CONFIRMATION' | translate}}</div>
        </mat-card-title>
        <mat-card-content class="p-05">
            <div class="card-content mb-1">
                {{'AUDIT.AREYOUSUREDELETETHEQUESTION' | translate | softLabelsPipe :softLabels}}
            </div>
            <div class="text-center">
                <button class="mr-1" mat-button mat-raised-button color="primary" [disabled]="disableDeleteTestCase"
                    (click)="removeTestCase()">
                    <mat-progress-bar color="primary" mode="indeterminate" *ngIf="disableDeleteTestCase">
                    </mat-progress-bar>
                    <fa-icon class="mr-05" icon="trash"></fa-icon> {{'TESTMANAGEMENT.DELETE' | translate}}
                </button>
                <button mat-button mat-raised-button (click)="closeDeleteCaseDialog();">
                    <fa-icon class="mr-05" icon="times"></fa-icon> {{'TESTMANAGEMENT.CANCEL' | translate}}
                </button>
            </div>
        </mat-card-content>
    </mat-card>
</sat-popover>
<!--Delete Case dialog-->