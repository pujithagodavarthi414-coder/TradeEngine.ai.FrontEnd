<mat-progress-bar color="primary" mode="indeterminate" *ngIf="(anyOperationInProgress$ | async)">
</mat-progress-bar>
<div fxLayoutAlign="end center" class="mb-1">
    <span class="mr-05">{{'AUDIT.QUESTIONVIEWED' | translate | softLabelsPipe :softLabels}}</span>
    <mat-slide-toggle [(ngModel)]="isQuestionViewed" [checked]="isQuestionViewed">
    </mat-slide-toggle>
</div>
<div class="p-03 testsuite-history-scroll fit-content-testsuite-history-scroll"
    *ngIf="!(anyOperationInProgress$ | async)" id="style-1">
    <div *ngFor="let queHistory of (questionHistory$ | async)">
        <div fxLayout="row wrap" fxLayoutGap="10px" *ngIf="isFromAudits && queHistory.description != 'QuestionViewed'">
            <div mat-card-avatar fxFlex="5" fxFlex.gt-lg="3" fxFlex.xs="13">
                <app-avatar matTooltip="{{ queHistory.performedByUserName }}"
                    [name]="queHistory.performedByUserName | removeSpecialCharacters"
                    [src]="queHistory.performedByUserProfileImage | fetchSizedAndCachedImage: '20':''" [isRound]="true"
                    size="20">
                </app-avatar>
            </div>
            <div fxFlex fxLayout="column" fxLayoutGap="5px">
                <div fxLayout="row">
                    <div fxFlex="65">
                        <b>{{queHistory.performedByUserName}}</b>
                    </div>
                    <div fxFlex>
                        <!-- <span class="pull-right">{{queHistory.createdDateTime | utcToLocalTime | timeago: live }}</span> -->
                        <span class="pull-right">{{queHistory.createdDateTime | utcToLocalTime | timeago }}</span>
                    </div>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'UnInstalledApp'">
                    <span>
                        {{'AUDIT.UNINSTALLEDAPP' | translate}} <b> {{queHistory?.oldValue}}</b>
                    </span>

                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'InstalledApp'">
                    <span>
                        {{'AUDIT.INSTALLEDAPP' | translate}} <b> {{queHistory?.oldValue}}</b>
                    </span>

                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionCreated'">
                    <span>
                        {{'AUDIT.CREATEDTHISQUESTION' | translate | softLabelsPipe :softLabels}}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionTypeUpdated'">
                    <span>
                        {{'AUDIT.QUESTIONTYPECHANGEDFROM' | translate | softLabelsPipe :softLabels }} <b>{{queHistory?.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory?.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionTitleUpdated'">
                    <span>
                        {{'BILLINGMANAGEMENT.TITLECHANGEDFROM' | translate}} <b>{{queHistory?.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory?.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionOriginalScoreMarked'">
                    <span *ngIf="queHistory.newValue == 'marked'">
                        {{'AUDIT.QUESTIONMARKEDASORIGINAL' | translate | softLabelsPipe :softLabels }}
                    </span>
                    <span *ngIf="queHistory.newValue == 'unmarked'">
                        {{'AUDIT.QUESTIONUNMARKEDASORIGINAL' | translate | softLabelsPipe :softLabels }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionMandatoryMarked'">
                    <span *ngIf="queHistory.newValue == 'marked'">
                        {{'AUDIT.QUESTIONMARKEDASMANDATORY' | translate | softLabelsPipe :softLabels }}
                    </span>
                    <span *ngIf="queHistory.newValue == 'unmarked'">
                        {{'AUDIT.QUESTIONMARKEDASNOTMANDATORY' | translate | softLabelsPipe :softLabels }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionHintUpdated'">
                    <span *ngIf="queHistory.oldValue == null || queHistory.oldValue.trim() == ''">
                        {{ 'AUDIT.HINTCHANGEDTO' | translate }} <b>{{queHistory.newValue}}</b>
                    </span>
                    <span
                        *ngIf="queHistory.oldValue != null && queHistory.oldValue.trim() != '' && queHistory.newValue != null && queHistory.newValue.trim() != ''">
                        {{ 'AUDIT.HINTCHANGEDFROM' | translate }} <b>{{queHistory.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                    <span
                        *ngIf="(queHistory.oldValue != null && queHistory.oldValue.trim() != '') && (queHistory.newValue == null || queHistory.newValue.trim() == '')">
                        {{ 'AUDIT.HINTREMOVED' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionEstimateUpdated'">
                    <span *ngIf="queHistory.oldValue == null || queHistory.oldValue.trim() == ''">
                        {{ 'AUDIT.ESTIMATEDTIMECHANGEDTO' | translate }} <b>{{queHistory.newValue}}</b>
                    </span>
                    <span
                        *ngIf="queHistory.oldValue != null && queHistory.oldValue.trim() != '' && queHistory.newValue != null && queHistory.newValue.trim() != ''">
                        {{ 'AUDIT.ESTIMATEDTIMEFROM' | translate }} <b>{{queHistory.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                    <span
                        *ngIf="(queHistory.oldValue != null && queHistory.oldValue.trim() != '') && (queHistory.newValue == null || queHistory.newValue.trim() == '')">
                        {{ 'AUDIT.ESTIMATEDTIMEREMOVED' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionResponsiblePersonUpdated'">
                    <span *ngIf="queHistory.oldValue == null || queHistory.oldValue.trim() == ''">
                        {{ 'AUDIT.RESPONSIBLEPERSONCHANGEDTO' | translate }} <b>{{queHistory.newValue}}</b>
                    </span>
                    <span
                        *ngIf="queHistory.oldValue != null && queHistory.oldValue.trim() != '' && queHistory.newValue != null && queHistory.newValue.trim() != ''">
                        {{ 'AUDIT.RESPONSIBLEPERSONUPDATEDFROM' | translate }} <b>{{queHistory.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                    <span
                        *ngIf="(queHistory.oldValue != null && queHistory.oldValue.trim() != '') && (queHistory.newValue == null || queHistory.newValue.trim() == '')">
                        {{ 'AUDIT.RESPONSIBLEPERSONREMOVED' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionAuditImpactUpdated'">
                    <span *ngIf="queHistory.oldValue == null || queHistory.oldValue.trim() == ''">
                        {{ 'AUDIT.AUDITIMPACTCHANGEDTO' | translate | softLabelsPipe :softLabels }} <b>{{queHistory.newValue}}</b>
                    </span>
                    <span
                        *ngIf="queHistory.oldValue != null && queHistory.oldValue.trim() != '' && queHistory.newValue != null && queHistory.newValue.trim() != ''">
                        {{ 'AUDIT.AUDITIMPACTUPDATEDFROM' | translate | softLabelsPipe :softLabels }} <b>{{queHistory.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionAuditPriorityUpdated'">
                    <span *ngIf="queHistory.oldValue == null || queHistory.oldValue.trim() == ''">
                        {{ 'AUDIT.AUDITPRIORITYCHANGEDTO' | translate | softLabelsPipe :softLabels }} <b>{{queHistory.newValue}}</b>
                    </span>
                    <span
                        *ngIf="queHistory.oldValue != null && queHistory.oldValue.trim() != '' && queHistory.newValue != null && queHistory.newValue.trim() != ''">
                        {{ 'AUDIT.AUDITPRIORITYUPDATEDFROM' | translate | softLabelsPipe :softLabels }} <b>{{queHistory.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionAuditRiskUpdated'">
                    <span *ngIf="queHistory.oldValue == null || queHistory.oldValue.trim() == ''">
                        {{ 'AUDIT.AUDITRISKCHANGEDTO' | translate | softLabelsPipe :softLabels }} <b>{{queHistory.newValue}}</b>
                    </span>
                    <span
                        *ngIf="queHistory.oldValue != null && queHistory.oldValue.trim() != '' && queHistory.newValue != null && queHistory.newValue.trim() != ''">
                        {{ 'AUDIT.AUDITRISKUPDATEDFROM' | translate | softLabelsPipe :softLabels }} <b>{{queHistory.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionDescriptionUpdated'">
                    <span class="audit-description"
                        *ngIf="queHistory.oldValue == null || queHistory.oldValue.trim() == ''">
                        {{ 'BILLINGMANAGEMENT.DESCRIPTIONCHANGEDTO' | translate }}
                        <b><span [innerHtml]="queHistory.newValue"></span></b>
                    </span>
                    <span class="audit-description"
                        *ngIf="queHistory.oldValue != null && queHistory.oldValue.trim() != '' && queHistory.newValue != null && queHistory.newValue.trim() != ''">
                        {{ 'BILLINGMANAGEMENT.DESCRIPTIONCHANGEDFROM' | translate }}
                        <b><span [innerHtml]="queHistory.oldValue"></span></b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }}
                        <b><span [innerHtml]="queHistory.newValue"></span></b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                    <span
                        *ngIf="(queHistory.oldValue != null && queHistory.oldValue.trim() != '') && (queHistory.newValue == null || queHistory.newValue.trim() == '')">
                        {{ 'BILLINGMANAGEMENT.DESCRIPTIONREMOVED' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionOptionResultUpdated'">
                    <span
                        *ngIf="(queHistory.oldValue == null || queHistory.oldValue.trim() == '') && (queHistory.newValue != null && queHistory.newValue.trim() != '')">
                        {{'AUDIT.RESULTCHANGEDFROM' | translate}} <b>null</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory?.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                    <span
                        *ngIf="queHistory.oldValue != null && queHistory.oldValue.trim() != '' && queHistory.newValue != null && queHistory.newValue.trim() != ''">
                        {{'AUDIT.RESULTCHANGEDFROM' | translate}} <b>{{queHistory?.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory?.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                    <span
                        *ngIf="(queHistory.oldValue != null && queHistory.oldValue.trim() != '') && (queHistory.newValue == null || queHistory.newValue.trim() == '')">
                        {{'AUDIT.RESULTCHANGEDFROM' | translate}} <b>{{queHistory?.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>null</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionOptionScoreUpdated'">
                    <span
                        *ngIf="(queHistory.oldValue == null || queHistory.oldValue.trim() == '') && (queHistory.newValue != null && queHistory.newValue.trim() != '')">
                        {{'AUDIT.SCORECHANGEDFROM' | translate}} <b>null</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory?.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                    <span
                        *ngIf="queHistory.oldValue != null && queHistory.oldValue.trim() != '' && queHistory.newValue != null && queHistory.newValue.trim() != ''">
                        {{'AUDIT.SCORECHANGEDFROM' | translate}} <b>{{queHistory?.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory?.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                    <span
                        *ngIf="(queHistory.oldValue != null && queHistory.oldValue.trim() != '') && (queHistory.newValue == null || queHistory.newValue.trim() == '')">
                        {{'AUDIT.SCORECHANGEDFROM' | translate}} <b>{{queHistory?.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>null</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionMovedToAudit'">
                    <span>
                        {{'AUDIT.AUDITCHANGEDFROM' | translate | softLabelsPipe :softLabels}} <b>{{queHistory?.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory?.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionCopiedToAudit'">
                    <span>
                        {{'AUDIT.AUDITCOPIEDFROM' | translate | softLabelsPipe :softLabels}} <b>{{queHistory?.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory?.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionCopiedToCategory'">
                    <span>
                        {{'AUDIT.AUDITCOPIEDFROM' | translate | softLabelsPipe :softLabels}} <b>{{queHistory?.oldValue}}</b>
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionMovedToCategory'">
                    <span>
                        {{'AUDIT.CATEGORYCHANGEDFROM' | translate}} <b>{{queHistory?.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }} <b>{{queHistory?.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                </div>
            </div>
        </div>
        <div fxLayout="row wrap" fxLayoutGap="10px" *ngIf="!isFromAudits && queHistory.description != 'QuestionViewed'">
            <div mat-card-avatar fxFlex="5" fxFlex.gt-lg="3" fxFlex.xs="13">
                <app-avatar matTooltip="{{ queHistory.performedByUserName }}"
                    [name]="queHistory.performedByUserName | removeSpecialCharacters"
                    [src]="queHistory.performedByUserProfileImage | fetchSizedAndCachedImage: '20':''" [isRound]="true"
                    size="20">
                </app-avatar>
            </div>
            <div fxFlex fxLayout="column" fxLayoutGap="5px">
                <div fxLayout="row">
                    <div fxFlex="65">
                        <b>{{queHistory.performedByUserName}}</b>
                    </div>
                    <div fxFlex>
                        <!-- <span class="pull-right">{{queHistory.createdDateTime | utcToLocalTime | timeago: live }}</span> -->
                        <span class="pull-right">{{queHistory.createdDateTime | utcToLocalTime | timeago }}</span>
                    </div>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionConductCreated'">
                    <span>
                        {{'AUDIT.CREATEDTHISQUESTION' | translate | softLabelsPipe :softLabels }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'UnInstalledApp'">
                    <span>
                        {{'AUDIT.UNINSTALLEDAPP' | translate}} <b> {{queHistory?.oldValue}}</b>
                    </span>

                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'InstalledApp'">
                    <span>
                        {{'AUDIT.INSTALLEDAPP' | translate}} <b> {{queHistory?.oldValue}}</b>
                    </span>

                </div>
                <div class="mb-05 audit-description" fxLayout="row"
                    *ngIf="queHistory.description == 'QuestionCommentUpdated'">
                    <span *ngIf="queHistory.oldValue == null || queHistory.oldValue.trim() == ''">
                        {{ 'AUDIT.COMMENTCHANGEDTO' | translate }}
                        <b><span [innerHtml]="queHistory.newValue"></span></b>
                    </span>
                    <span class="audit-description"
                        *ngIf="queHistory.oldValue != null && queHistory.oldValue.trim() != '' && queHistory.newValue != null && queHistory.newValue.trim() != ''">
                        {{ 'AUDIT.COMMENTCHANGEDFROM' | translate }}
                        <b><span [innerHtml]="queHistory.oldValue"></span></b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }}
                        <b><span [innerHtml]="queHistory.newValue"></span></b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                    <span
                        *ngIf="(queHistory.oldValue != null && queHistory.oldValue.trim() != '') && (queHistory.newValue == null || queHistory.newValue.trim() == '')">
                        {{ 'AUDIT.COMMENTREMOVED' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'QuestionConductResultUpdated'">
                    <span *ngIf="queHistory.oldValue == null || queHistory.oldValue.trim() == ''">
                        {{ 'AUDIT.RESULTCHANGEDTO' | translate }}
                        <b>{{queHistory.newValue}}</b>
                    </span>
                    <span
                        *ngIf="queHistory.oldValue != null && queHistory.oldValue.trim() != '' && queHistory.newValue != null && queHistory.newValue.trim() != ''">
                        {{ 'AUDIT.RESULTCHANGEDFROM' | translate }}
                        <b>{{queHistory.oldValue}}</b>
                        {{ 'BILLINGMANAGEMENT.SMALLTO' | translate }}
                        <b>{{queHistory.newValue}}</b>
                        {{ 'BILLINGMANAGEMENT.DONE' | translate }}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'ActionAdded'">
                    <span>
                        {{ 'IPADDRESSES.ACTION' | translate | softLabelsPipe :softLabels }} -
                        <b>{{queHistory.newValue}}</b>
                        {{'AUDIT.SMALLADDED' | translate}}
                    </span>
                </div>
                <div class="mb-05" fxLayout="row" *ngIf="queHistory.description == 'ActionRemoved'">
                    <span>
                        {{ 'AUDIT.ACTIONSREMOVED' | translate | softLabelsPipe :softLabels }}
                    </span>
                </div>
            </div>
        </div>
        <div fxLayout="row wrap" fxLayoutGap="10px"
            [hidden]="!(isQuestionViewed && queHistory.description == 'QuestionViewed')">
            <div mat-card-avatar fxFlex="5" fxFlex.gt-lg="3" fxFlex.xs="13">
                <app-avatar matTooltip="{{ queHistory.performedByUserName }}"
                    [name]="queHistory.performedByUserName | removeSpecialCharacters"
                    [src]="queHistory.performedByUserProfileImage | fetchSizedAndCachedImage: '20':''" [isRound]="true"
                    size="20">
                </app-avatar>
            </div>
            <div fxFlex fxLayout="column" fxLayoutGap="5px">
                <div fxLayout="row">
                    <div fxFlex="65">
                        <b>{{queHistory.performedByUserName}}</b>
                    </div>
                    <div fxFlex>
                        <!-- <span class="pull-right">{{queHistory.createdDateTime | utcToLocalTime | timeago: live }}</span> -->
                        <span class="pull-right">{{queHistory.createdDateTime | utcToLocalTime | timeago }}</span>
                    </div>
                </div>
                <div class="mb-05" fxLayout="row">
                    <span>
                        {{'AUDIT.HADSEENTHISQUESTION' | translate | softLabelsPipe :softLabels }}
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>